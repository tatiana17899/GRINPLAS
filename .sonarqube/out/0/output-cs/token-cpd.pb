å
?C:\Users\ACER\Desktop\GRINPLAS\ViewModel\TrabajadorViewModel.cs
	namespace

 	
GRINPLAS


 
.

 
	ViewModel

 
{ 
public 

class 
TrabajadorViewModel $
{ 
public 

int 
IdTrabajador 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Required 
( 
ErrorMessage 
= 
$str 7
)7 8
]8 9
[ 
StringLength 
( 
$num 
, 
ErrorMessage #
=$ %
$str& Q
)Q R
]R S
public 

string 
Nombre 
{ 
get 
; 
set  #
;# $
}% &
[ 
Required 
( 
ErrorMessage 
= 
$str =
)= >
]> ?
[ 
StringLength 
( 
$num 
, 
ErrorMessage #
=$ %
$str& V
)V W
]W X
public 

string 
	Apellidos 
{ 
get !
;! "
set# &
;& '
}( )
[ 
Required 
( 
ErrorMessage 
= 
$str 9
)9 :
]: ;
[ 
Phone 

(
 
ErrorMessage 
= 
$str 8
)8 9
]9 :
public 

string 
Telefono 
{ 
get  
;  !
set" %
;% &
}' (
[ 
Required 
( 
ErrorMessage 
= 
$str 4
)4 5
]5 6
[ 
StringLength 
( 
$num 
, 
MinimumLength "
=# $
$num% &
,& '
ErrorMessage( 4
=5 6
$str7 W
)W X
]X Y
public 

string 
DNI 
{ 
get 
; 
set  
;  !
}" #
[   
Required   
(   
ErrorMessage   
=   
$str   A
)  A B
]  B C
public!! 

string!! 
PosicionLaboral!! !
{!!" #
get!!$ '
;!!' (
set!!) ,
;!!, -
}!!. /
[## 
Required## 
(## 
ErrorMessage## 
=## 
$str## 7
)##7 8
]##8 9
public$$ 

decimal$$ 
Sueldo$$ 
{$$ 
get$$ 
;$$  
set$$! $
;$$$ %
}$$& '
}%% 
}&& Ω
BC:\Users\ACER\Desktop\GRINPLAS\ViewModel\ReclamacionesViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public		 

class		  
ReclamacionViewModel		 %
{

 
public 
List 
< 
Reclamaciones !
>! "
Reclamaciones# 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
=? @
newA D
ListE I
<I J
ReclamacionesJ W
>W X
(X Y
)Y Z
;Z [
public 
int 
CurrentPage 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 

TotalPages 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} í

@C:\Users\ACER\Desktop\GRINPLAS\ViewModel\ProfileEditViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public		 

class		  
ProfileEditViewModel		 %
{

 
public 
string 
? 
NombreEmpresa $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
TipDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
NumDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Telefono 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
Imagen 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} º
=C:\Users\ACER\Desktop\GRINPLAS\ViewModel\ProductoViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{		 
public

 

class

 
ProductoViewModel

 "
{ 
public 
List 
< 
Producto 
> 
	Productos '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
=6 7
new8 ;
List< @
<@ A
ProductoA I
>I J
(J K
)K L
;L M
public 
Producto 
nuevoProducto %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
Producto: B
(B C
)C D
;D E
public 
string 
? 
NombreFiltro #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
string 
? 
CategoriaFiltro &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public 
List 
< 
	Categoria 
> 

Categorias )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
=8 9
new: =
List> B
<B C
	CategoriaC L
>L M
(M N
)N O
;O P
} 
} à

;C:\Users\ACER\Desktop\GRINPLAS\ViewModel\PerfilViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public 

class 
PerfilViewModel  
{		 
public

 
string

 
?

 
NombreEmpresa

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
? 
Email 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
TipDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
NumDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Telefono 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
Imagen 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} Ã
;C:\Users\ACER\Desktop\GRINPLAS\ViewModel\PedidoViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public		 

class		 
PedidoViewModel		  
{

 
public 
List 
< 
Pedido 
> 
Pedidos #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
new4 7
List8 <
<< =
Pedido= C
>C D
(D E
)E F
;F G
public 
Pedido 
nuevoPedido !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
new2 5
Pedido6 <
(< =
)= >
;> ?
public 
List 
< 
Cliente 
> 
Clientes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
List: >
<> ?
Cliente? F
>F G
(G H
)H I
;I J
public 
List 
< 
Producto 
> 
	Productos '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
=6 7
new8 ;
List< @
<@ A
ProductoA I
>I J
(J K
)K L
;L M
public 
decimal 
TotalMangas "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
decimal 
TotalBolsas "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
FechaInicioFiltro (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
string 
? 
FechaFinFiltro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} Ô
<C:\Users\ACER\Desktop\GRINPLAS\ViewModel\CarritoViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public

 

class

 
CarritoViewModel

 !
{ 
public 
List 
< 
Producto 
> 
	Productos '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
List 
< 
DetalleCarrito "
>" #
Carrito$ +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
public 
decimal 
Subtotal 
=>  "
Carrito# *
?* +
.+ ,
Sum, /
(/ 0
detalle0 7
=>8 :
detalle; B
.B C
SubtotalC K
)K L
??M O
$numP Q
;Q R
} 
} √
=C:\Users\ACER\Desktop\GRINPLAS\ViewModel\AnalisisViewModel.cs
	namespace 	
GRINPLAS
 
. 
	ViewModel 
{ 
public		 

class		 
AnalisisViewModel		 "
{

 
public 
List 
< 
Pedido 
> 
Pedidos #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
new4 7
List8 <
<< =
Pedido= C
>C D
(D E
)E F
;F G
public 
List 
< 
Cliente 
> 
Clientes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
List: >
<> ?
Cliente? F
>F G
(G H
)H I
;I J
public 
int 
TotalClientes  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
GananciaTotal $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
VentasBolsas 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
VentasMangas 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} Ü
DC:\Users\ACER\Desktop\GRINPLAS\ViewComponent\ProfileViewComponent.cs
	namespace 	
GRINPLAS
 
. 
ViewComponents !
{		 
public

 

class

  
ProfileViewComponent

 %
:

& '
ViewComponent

( 5
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public  
ProfileViewComponent #
(# $
UserManager$ /
</ 0
ApplicationUser0 ?
>? @
userManagerA L
,L M 
ApplicationDbContext" 6
context7 >
)> ?
{ 	
_userManager 
= 
userManager &
;& '
_context 
= 
context 
; 
} 	
public 
async 
Task 
<  
IViewComponentResult .
>. /
InvokeAsync0 ;
(; <
)< =
{ 	
var 
user 
= 
await 
_userManager )
.) *
GetUserAsync* 6
(6 7
HttpContext7 B
.B C
UserC G
)G H
;H I
if 
( 
user 
== 
null 
) 
return $
Content% ,
(, -
string- 3
.3 4
Empty4 9
)9 :
;: ;
var 
cliente 
= 
await 
_context  (
.( )
Clientes) 1
. 
FirstOrDefaultAsync $
($ %
c% &
=>' )
c* +
.+ ,
ApplicationUserId, =
==> @
userA E
.E F
IdF H
)H I
;I J
var 
model 
= 
new  
ProfileEditViewModel 0
{ 
Email   
=   
user   
.   
Email   "
,  " #
NombreEmpresa!! 
=!! 
cliente!!  '
?!!' (
.!!( )
NombreEmpresa!!) 6
,!!6 7
TipDoc"" 
="" 
cliente""  
?""  !
.""! "
TipDoc""" (
,""( )
NumDoc## 
=## 
cliente##  
?##  !
.##! "
NumDoc##" (
,##( )
Telefono$$ 
=$$ 
cliente$$ "
?$$" #
.$$# $
Telefono$$$ ,
,$$, -
Imagen%% 
=%% 
cliente%%  
?%%  !
.%%! "
Imagen%%" (
}&& 
;&& 
return(( 
View(( 
((( 
model(( 
)(( 
;(( 
})) 	
}** 
}++ Ç
6C:\Users\ACER\Desktop\GRINPLAS\Services\EmailSender.cs
public 
class 
EmailSender 
: 
IEmailSender '
{ 
private 
readonly 
string 
_smtpServer '
;' (
private		 
readonly		 
int		 
	_smtpPort		 "
;		" #
private

 
readonly

 
string

 

_fromEmail

 &
;

& '
private 
readonly 
string 
_smtpUsername )
;) *
private 
readonly 
string 
_smtpPassword )
;) *
public 

EmailSender 
( 
string 

smtpServer (
,( )
int* -
smtpPort. 6
,6 7
string8 >
	fromEmail? H
,H I
stringJ P
smtpUsernameQ ]
,] ^
string_ e
smtpPasswordf r
)r s
{ 
_smtpServer 
= 

smtpServer  
;  !
	_smtpPort 
= 
smtpPort 
; 

_fromEmail 
= 
	fromEmail 
; 
_smtpUsername 
= 
smtpUsername $
;$ %
_smtpPassword 
= 
smtpPassword $
;$ %
} 
public 

async 
Task 
SendEmailAsync $
($ %
string% +
email, 1
,1 2
string3 9
subject: A
,A B
stringC I
htmlMessageJ U
)U V
{ 
try 
{ 	
var 
client 
= 
new 

SmtpClient '
(' (
_smtpServer( 3
,3 4
	_smtpPort5 >
)> ?
{ 
Credentials 
= 
new !
NetworkCredential" 3
(3 4
$str4 L
,L M
$strN `
)` a
,a b
	EnableSsl 
= 
true  
} 
; 
var!! 
mailMessage!! 
=!! 
new!! !
MailMessage!!" -
{"" 
From## 
=## 
new## 
MailAddress## &
(##& '

_fromEmail##' 1
)##1 2
,##2 3
Subject$$ 
=$$ 
subject$$ !
,$$! "
Body%% 
=%% 
htmlMessage%% "
,%%" #

IsBodyHtml&& 
=&& 
true&& !
}'' 
;'' 
mailMessage(( 
.(( 
To(( 
.(( 
Add(( 
((( 
email(( $
)(($ %
;((% &
await** 
client** 
.** 
SendMailAsync** &
(**& '
mailMessage**' 2
)**2 3
;**3 4
Console++ 
.++ 
	WriteLine++ 
(++ 
$str++ 4
+++5 6
email++7 <
)++< =
;++= >
},, 	
catch-- 
(-- 
	Exception-- 
ex-- 
)-- 
{.. 	
Console// 
.// 
	WriteLine// 
(// 
$str// :
+//; <
ex//= ?
.//? @
Message//@ G
)//G H
;//H I
throw00 
;00 
}11 	
}22 
}33 ≠c
)C:\Users\ACER\Desktop\GRINPLAS\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder

 
.

 
Services

 
.

 
	Configure

 
<

 .
"DataProtectionTokenProviderOptions

 =
>

= >
(

> ?
options

? F
=>

G I
{ 
options 
. 
TokenLifespan 
= 
TimeSpan $
.$ %
	FromHours% .
(. /
$num/ 0
)0 1
;1 2
} 
) 
; 
var 
connectionString 
= 
builder 
. 
Configuration ,
., -
GetConnectionString- @
(@ A
$strA W
)W X
??Y [
throw\ a
newb e%
InvalidOperationExceptionf 
(	 Ä
$str
Ä û
)
û ü
;
ü †
builder 
. 
Services 
. 
AddDbContext 
<  
ApplicationDbContext 2
>2 3
(3 4
options4 ;
=>< >
options 
. 
	UseNpgsql 
( 
connectionString &
)& '
)' (
;( )
builder 
. 
Services 
. 3
'AddDatabaseDeveloperPageExceptionFilter 8
(8 9
)9 :
;: ;
builder 
. 
Services 
. 
AddDefaultIdentity #
<# $
ApplicationUser$ 3
>3 4
(4 5
options5 <
=>= ?
options@ G
.G H
SignInH N
.N O#
RequireConfirmedAccountO f
=g h
truei m
)m n
. 
AddRoles 
< 
IdentityRole 
> 
( 
) 
. $
AddEntityFrameworkStores 
<  
ApplicationDbContext 2
>2 3
(3 4
)4 5
;5 6
builder 
. 
Services 
. #
AddControllersWithViews (
(( )
)) *
;* +
var 
emailConfig 
= 
builder 
. 
Configuration '
.' (

GetSection( 2
(2 3
$str3 B
)B C
;C D
builder 
. 
Services 
. 
AddTransient 
< 
IEmailSender *
>* +
(+ ,
provider, 4
=>5 7
new 
EmailSender 
( 
emailConfig 
[ 
$str  
]  !
,! "
int 
. 
Parse 
( 
emailConfig 
[ 
$str (
]( )
)) *
,* +
emailConfig   
[   
$str   
]    
,    !
emailConfig!! 
[!! 
$str!! "
]!!" #
,!!# $
emailConfig"" 
["" 
$str"" "
]""" #
)## 
)## 
;## 

AppContext%% 

.%%
 
	SetSwitch%% 
(%% 
$str%% ;
,%%; <
true%%= A
)%%A B
;%%B C
var'' 
app'' 
='' 	
builder''
 
.'' 
Build'' 
('' 
)'' 
;'' 
using)) 
()) 
var)) 

scope)) 
=)) 
app)) 
.)) 
Services)) 
.))  
CreateScope))  +
())+ ,
))), -
)))- .
{** 
var++ 
services++ 
=++ 
scope++ 
.++ 
ServiceProvider++ (
;++( )
try,, 
{-- 
var.. 
userManager.. 
=.. 
services.. "
..." #
GetRequiredService..# 5
<..5 6
UserManager..6 A
<..A B
ApplicationUser..B Q
>..Q R
>..R S
(..S T
)..T U
;..U V
var// 
roleManager// 
=// 
services// "
.//" #
GetRequiredService//# 5
<//5 6
RoleManager//6 A
<//A B
IdentityRole//B N
>//N O
>//O P
(//P Q
)//Q R
;//R S
var00 
context00 
=00 
services00 
.00 
GetRequiredService00 1
<001 2 
ApplicationDbContext002 F
>00F G
(00G H
)00H I
;00I J
var22 
roles22 
=22 
new22 
[22 
]22 
{22 
$str22 ,
,22, -
$str22. =
,22= >
$str22? I
,22I J
$str22J V
,22V W
$str22W j
}22j k
;22k l
foreach44 
(44 
var44 
role44 
in44 
roles44 "
)44" #
{55 	
if66 
(66 
!66 
await66 
roleManager66 "
.66" #
RoleExistsAsync66# 2
(662 3
role663 7
)667 8
)668 9
{77 
await88 
roleManager88 !
.88! "
CreateAsync88" -
(88- .
new88. 1
IdentityRole882 >
(88> ?
role88? C
)88C D
)88D E
;88E F
}99 
}:: 	
var;; 
clienteEmail;; 
=;; 
$str;; 1
;;;1 2
var<< 
clientePassword<< 
=<< 
$str<< ,
;<<, -
var== 

adminEmail== 
=== 
$str== 6
;==6 7
var>> 
adminPassword>> 
=>> 
$str>> *
;>>* +
await?? 
EnsureUserAsync?? 
(?? 
userManager?? )
,??) *

adminEmail??+ 5
,??5 6
adminPassword??7 D
,??D E
$str??F U
)??U V
;??V W
varAA 
gerenteEmailAA 
=AA 
$strAA 6
;AA6 7
varBB 
gerentePasswordBB 
=BB 
$strBB ,
;BB, -
awaitCC 
EnsureUserAsyncCC 
(CC 
userManagerCC )
,CC) *
gerenteEmailCC+ 7
,CC7 8
gerentePasswordCC9 H
,CCH I
$strCCJ Z
)CCZ [
;CC[ \
awaitEE 
contextEE 
.EE 
SaveChangesAsyncEE &
(EE& '
)EE' (
;EE( )
}FF 
catchGG 	
(GG
 
	ExceptionGG 
exGG 
)GG 
{HH 
varII 
loggerII 
=II 
servicesII 
.II 
GetRequiredServiceII 0
<II0 1
ILoggerII1 8
<II8 9
ProgramII9 @
>II@ A
>IIA B
(IIB C
)IIC D
;IID E
loggerJJ 
.JJ 
LogErrorJJ 
(JJ 
exJJ 
,JJ 
$strJJ D
)JJD E
;JJE F
}KK 
}LL 
ifNN 
(NN 
appNN 
.NN 
EnvironmentNN 
.NN 
IsDevelopmentNN !
(NN! "
)NN" #
)NN# $
{OO 
appPP 
.PP !
UseMigrationsEndPointPP 
(PP 
)PP 
;PP  
}QQ 
elseRR 
{SS 
appTT 
.TT 
UseExceptionHandlerTT 
(TT 
$strTT )
)TT) *
;TT* +
appUU 
.UU 
UseHstsUU 
(UU 
)UU 
;UU 
}VV 
appXX 
.XX 
UseHttpsRedirectionXX 
(XX 
)XX 
;XX 
appYY 
.YY 
UseStaticFilesYY 
(YY 
)YY 
;YY 
app[[ 
.[[ 

UseRouting[[ 
([[ 
)[[ 
;[[ 
app\\ 
.\\ 
UseAuthentication\\ 
(\\ 
)\\ 
;\\ 
app]] 
.]] 
UseAuthorization]] 
(]] 
)]] 
;]] 
RotativaConfiguration^^ 
.^^ 
Setup^^ 
(^^ 
app^^ 
.^^  
Environment^^  +
.^^+ ,
WebRootPath^^, 7
)^^7 8
;^^8 9
app`` 
.`` 
UseRotativa`` 
(`` 
)`` 
;`` 
appbb 
.bb 
Usebb 
(bb 
asyncbb 
(bb 
contextbb 
,bb 
nextbb 
)bb 
=>bb  
{cc 
ifdd 
(dd 
!dd 	
contextdd	 
.dd 
Userdd 
.dd 
Identitydd 
.dd 
IsAuthenticateddd .
&&dd/ 1
contextdd2 9
.dd9 :
Requestdd: A
.ddA B
PathddB F
==ddG I
$strddJ M
)ddM N
{ee 
contextff 
.ff 
Responseff 
.ff 
Redirectff !
(ff! "
$strff" /
)ff/ 0
;ff0 1
returngg 
;gg 
}hh 
awaitii 	
nextii
 
(ii 
)ii 
;ii 
}jj 
)jj 
;jj 
appmm 
.mm 
MapControllerRoutemm 
(mm 
namenn 
:nn 	
$strnn
 
,nn 
patternoo 
:oo 
$stroo 5
)oo5 6
;oo6 7
apppp 
.pp 
MapRazorPagespp 
(pp 
)pp 
;pp 
apprr 
.rr 
Runrr 
(rr 
)rr 	
;rr	 

asynctt 
Tasktt 

EnsureUserAsynctt 
(tt 
UserManagertt &
<tt& '
ApplicationUsertt' 6
>tt6 7
userManagertt8 C
,ttC D
stringttE K
emailttL Q
,ttQ R
stringttS Y
passwordttZ b
,ttb c
stringttd j
rolettk o
)tto p
{uu 
varvv 
uservv 
=vv 
awaitvv 
userManagervv  
.vv  !
FindByEmailAsyncvv! 1
(vv1 2
emailvv2 7
)vv7 8
;vv8 9
ifww 
(ww 
userww 
==ww 
nullww 
)ww 
{xx 
useryy 
=yy 
newyy 
ApplicationUseryy "
{zz 	
UserName{{ 
={{ 
email{{ 
,{{ 
Email|| 
=|| 
email|| 
,|| 
EmailConfirmed}} 
=}} 
true}} !
}~~ 	
;~~	 

var
ÄÄ 
result
ÄÄ 
=
ÄÄ 
await
ÄÄ 
userManager
ÄÄ &
.
ÄÄ& '
CreateAsync
ÄÄ' 2
(
ÄÄ2 3
user
ÄÄ3 7
,
ÄÄ7 8
password
ÄÄ9 A
)
ÄÄA B
;
ÄÄB C
if
ÅÅ 

(
ÅÅ 
!
ÅÅ 
result
ÅÅ 
.
ÅÅ 
	Succeeded
ÅÅ 
)
ÅÅ 
{
ÇÇ 	
throw
ÉÉ 
new
ÉÉ 
	Exception
ÉÉ 
(
ÉÉ  
$"
ÉÉ  "
$str
ÉÉ" 9
{
ÉÉ9 :
email
ÉÉ: ?
}
ÉÉ? @
$str
ÉÉ@ B
{
ÉÉB C
string
ÉÉC I
.
ÉÉI J
Join
ÉÉJ N
(
ÉÉN O
$str
ÉÉO S
,
ÉÉS T
result
ÉÉU [
.
ÉÉ[ \
Errors
ÉÉ\ b
)
ÉÉb c
}
ÉÉc d
"
ÉÉd e
)
ÉÉe f
;
ÉÉf g
}
ÑÑ 	
}
ÖÖ 
if
áá 
(
áá 
!
áá 	
await
áá	 
userManager
áá 
.
áá 
IsInRoleAsync
áá (
(
áá( )
user
áá) -
,
áá- .
role
áá/ 3
)
áá3 4
)
áá4 5
{
àà 
await
ââ 
userManager
ââ 
.
ââ 
AddToRoleAsync
ââ (
(
ââ( )
user
ââ) -
,
ââ- .
role
ââ/ 3
)
ââ3 4
;
ââ4 5
}
ää 
}ãã Œ
5C:\Users\ACER\Desktop\GRINPLAS\Models\Trabajadores.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
Trabajadores

 
{ 
[ 	
Key	 
] 
public 
int 
IdTrabajador 
{  !
get! $
;$ %
set& )
;) *
}* +
public 
string 
? 
ApplicationUserId (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
[ 	

ForeignKey	 
( 
$str '
)' (
]( )
public 
ApplicationUser 
? 
User  $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
Required	 
] 
public 
string 
? 
Nombre 
{ 
get "
;" #
set$ '
;' (
}( )
[ 	
Required	 
] 
public 
string 
? 
	Apellidos  
{! "
get" %
;% &
set' *
;* +
}+ ,
[ 	
Required	 
] 
public 
string 
? 
Telefono 
{  !
get! $
;$ %
set& )
;) *
}* +
[ 	
Required	 
] 
public 
string 
? 
DNI 
{ 
get 
;  
set! $
;$ %
}% &
[ 	
Required	 
] 
public 
string 
? 
PosicionLaboral &
{' (
get( +
;+ ,
set- 0
;0 1
}1 2
[ 	
Required	 
] 
public 
decimal 
? 
Sueldo 
{  
get  #
;# $
set% (
;( )
}) *
} 
}   ‘
6C:\Users\ACER\Desktop\GRINPLAS\Models\Reclamaciones.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 
class

	 
Reclamaciones

 
{ 
[ 
Key 

]
 
public 
int 
ReclamacionId 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
Nombre 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
Correo 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
Telefono 
{ 
get  #
;# $
set% (
;( )
}* +
[ 
Required 
] 
public 
string 
? 
Detalle 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
	Respuesta 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
bool 
Estado 
{ 
get 
; 
set  #
;# $
}% &
=' (
false) .
;. /
public 
DateTime 
FechaCreacion #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
DateTime4 <
.< =
Now= @
;@ A
[ 

ForeignKey 
( 
$str 
) 
] 
public 
int 
	ClienteId 
{ 
get  
;  !
set" %
;% &
}' (
public   
virtual   
Cliente   
?   
Cliente   %
{  & '
get  ( +
;  + ,
set  - 0
;  0 1
}  2 3
}!! 
}"" ˘
1C:\Users\ACER\Desktop\GRINPLAS\Models\Producto.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
[ 
Table 

(
 
$str 
) 
] 
public 

class 
Producto 
{ 
[ 	
Key	 
] 
[ 	
DatabaseGenerated	 
( #
DatabaseGeneratedOption 2
.2 3
Identity3 ;
); <
]< =
public 
int 

ProductoId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
string 
? 
Nombre 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Descripcion "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
? 
Imagen 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
double 
Stock 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public 
double 
Precio 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public   
int   
CategoriaId   
{    
get  ! $
;  $ %
set  & )
;  ) *
}  + ,
[!! 	

ForeignKey!!	 
(!! 
$str!! !
)!!! "
]!!" #
public"" 
	Categoria"" 
?"" 
	Categoria"" #
{""$ %
get""& )
;"") *
set""+ .
;"". /
}""0 1
public## 
ICollection## 
<## 
DetallePedido## (
>##( )
DetallePedidos##* 8
{##9 :
get##; >
;##> ?
set##@ C
;##C D
}##E F
=##G H
new##I L
List##M Q
<##Q R
DetallePedido##R _
>##_ `
(##` a
)##a b
;##b c
}$$ 
}%% Ø
2C:\Users\ACER\Desktop\GRINPLAS\Models\PedidoDto.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public 

class 
	PedidoDto 
{		 
public

 
string

 
	Direccion

 
{

  !
get

" %
;

% &
set

' *
;

* +
}

, -
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ë
/C:\Users\ACER\Desktop\GRINPLAS\Models\Pedido.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
Pedido

 
{ 
[ 	
Key	 
] 
public 
int 
PedidoId 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
int 
	ClienteId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	

ForeignKey	 
( 
$str 
)  
]  !
public 
Cliente 
? 
Cliente 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
public 
string 
? 
	Direccion  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
string 
? 
BoletaEmitida $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
Required	 
] 
public 
DateTime 
FechaEmision $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
DateTime 
? 
FechaEntrega %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
[ 	
StringLength	 
( 
$num 
) 
] 
public 
string 
? 
Status 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public 
decimal 
Total 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
Pago 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
ComprobantePago &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
public   
ICollection   
<   
DetallePedido   (
>  ( )
DetallePedidos  * 8
{  9 :
get  ; >
;  > ?
set  @ C
;  C D
}  E F
=  G H
new  I L
List  M Q
<  Q R
DetallePedido  R _
>  _ `
(  ` a
)  a b
;  b c
public!! 
ICollection!! 
<!! 
Notificacion!! '
>!!' (
Notificaciones!!) 7
{!!8 9
get!!: =
;!!= >
set!!? B
;!!B C
}!!D E
=!!F G
new!!H K
List!!L P
<!!P Q
Notificacion!!Q ]
>!!] ^
(!!^ _
)!!_ `
;!!` a
}## 
}$$ ´
8C:\Users\ACER\Desktop\GRINPLAS\Models\NotificacionDto.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public 

class 
NotificacionDto  
{		 
public

 
int

 
notificacionId

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
public 
string 
? 
titulo 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
mensaje 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
fechaCreacion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
bool 
leida 
{ 
get 
;  
set! $
;$ %
}& '
public 
string 
? 
tipo 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
? 
pedidoId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
? 
	usuarioId  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
} †
5C:\Users\ACER\Desktop\GRINPLAS\Models\Notificacion.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
Notificacion

 
{ 
[ 	
Key	 
] 
public 
int 
NotificacionId !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Required	 
] 
public 
string 
? 
	UsuarioId  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Required	 
] 
public 
string 
? 
Titulo 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
string 
? 
Mensaje 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
DateTime 
FechaCreacion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
DateTime6 >
.> ?
UtcNow? E
;E F
public 
bool 
Leida 
{ 
get 
;  
set! $
;$ %
}& '
=( )
false* /
;/ 0
public 
string 
? 
Tipo 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
? 
PedidoId 
{ 
get "
;" #
set$ '
;' (
}) *
[  	 


ForeignKey  
 
(   
$str   
)    
]    !
public!! 
Pedido!! 
?!! 
Pedido!! 
{!! 
get!!  #
;!!# $
set!!% (
;!!( )
}!!* +
[## 	

ForeignKey##	 
(## 
$str## 
)##  
]##  !
public$$ 
ApplicationUser$$ 
?$$ 
Usuario$$  '
{$$( )
get$$* -
;$$- .
set$$/ 2
;$$2 3
}$$4 5
}%% 
}&& ˇ
7C:\Users\ACER\Desktop\GRINPLAS\Models\ErrorViewModel.cs
	namespace 	
GRINPLAS
 
. 
Models 
; 
public 
class 
ErrorViewModel 
{ 
public 

string 
? 
	RequestId 
{ 
get "
;" #
set$ '
;' (
}) *
public 

bool 
ShowRequestId 
=>  
!! "
string" (
.( )
IsNullOrEmpty) 6
(6 7
	RequestId7 @
)@ A
;A B
} „
.C:\Users\ACER\Desktop\GRINPLAS\Models\Gasto.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
Gasto

 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
public 
DateTime 
Fecha 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Concepto 
{  !
get" %
;% &
set' *
;* +
}, -
public 
decimal 
Valor 
{ 
get "
;" #
set$ '
;' (
}) *
} 
} ﬂ
6C:\Users\ACER\Desktop\GRINPLAS\Models\DetallePedido.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
DetallePedido

 
{ 
[ 	
Key	 
] 
public 
int 
DetallePedidoId "
{# $
get% (
;( )
set* -
;- .
}/ 0
[ 	
Required	 
] 
public 
int 
PedidoId 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
[ 	

ForeignKey	 
( 
$str 
) 
]  
public 
Pedido 
? 
Pedido 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
public 
int 

ProductoId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	
Required	 
] 
[ 	

ForeignKey	 
( 
$str  
)  !
]! "
public 
Producto 
? 
Producto !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Column	 
( 
TypeName 
= 
$str *
)* +
]+ ,
public 
decimal 
PrecioTotal "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} Ñ
7C:\Users\ACER\Desktop\GRINPLAS\Models\DetalleCarrito.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
DetalleCarrito

 
{ 
[ 	
Key	 
] 
public 
int 
	DetalleId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
int 
Cantidad 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
] 
public 
decimal 
PrecioUnitario %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Required	 
] 
public 
int 
	CarritoId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	

ForeignKey	 
( 
$str 
)  
]  !
public 
Carrito 
? 
Carrito 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
public 
int 

ProductoId 
{ 
get  #
;# $
set% (
;( )
}* +
[ 	

ForeignKey	 
( 
$str  
)  !
]! "
public 
Producto 
? 
Producto !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
	NotMapped	 
] 
public 
decimal 
Subtotal 
=>  "
Cantidad# +
*, -
PrecioUnitario. <
;< =
} 
} ó
4C:\Users\ACER\Desktop\GRINPLAS\Models\Comentarios.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public 

class 
Comentarios 
{ 
public 
int 
Id 
{ 
get 
; 
set  
;  !
}" #
[		 	
Required			 
(		 
ErrorMessage		 
=		  
$str		! ;
)		; <
]		< =
public

 
string

 
Nombres

 
{

 
get

  #
;

# $
set

% (
;

( )
}

* +
[ 	
Required	 
( 
ErrorMessage 
=  
$str! =
)= >
]> ?
[ 	
Phone	 
( 
ErrorMessage 
= 
$str 9
)9 :
]: ;
public 
string 
Telefono 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ;
); <
]< =
[ 	
EmailAddress	 
( 
ErrorMessage "
=# $
$str% >
)> ?
]? @
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Required	 
( 
ErrorMessage 
=  
$str! ?
)? @
]@ A
public 
string 
	Contenido 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 

EsPositivo 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
true/ 3
;3 4
} 
} ∆
0C:\Users\ACER\Desktop\GRINPLAS\Models\Cliente.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public

 

class

 
Cliente

 
{ 
[ 	
Key	 
] 
public 
int 
	ClienteId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Required	 
] 
public 
string 
? 
ApplicationUserId (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
[ 	
Required	 
] 
[ 	

ForeignKey	 
( 
$str '
)' (
]( )
public 
ApplicationUser 
? 
User  $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
NombreEmpresa $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
TipDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
NumDoc 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
? 
Telefono 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
Imagen 
{ 
get "
;" #
set# &
;& '
}' (
public 
DateTime 
FecCre 
{  
get  #
;# $
set$ '
;' (
}( )
=) *
DateTime+ 3
.3 4
UtcNow4 :
;: ;
public 
ICollection 
< 
Pedido !
>! "
Pedidos# *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
=9 :
new; >
List? C
<C D
PedidoD J
>J K
(K L
)L M
;M N
public 
Carrito 
? 
Carrito 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} â
2C:\Users\ACER\Desktop\GRINPLAS\Models\Categoria.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public		 

class		 
	Categoria		 
{

 
[ 	
Key	 
] 
public 
int 
CategoriaId 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Required	 
] 
public 
string 
? 
Nombre 
{ 
get  #
;# $
set% (
;( )
}* +
public 
ICollection 
< 
Producto #
># $
	Productos% .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
== >
new? B
ListC G
<G H
ProductoH P
>P Q
(Q R
)R S
;S T
} 
} π
0C:\Users\ACER\Desktop\GRINPLAS\Models\Carrito.cs
	namespace 	
GRINPLAS
 
. 
Models 
{		 
public 

class 
Carrito 
{ 
[ 	
Key	 
] 
public 
int 
	CarritoId 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
	ClienteId 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	

ForeignKey	 
( 
$str 
)  
]  !
public 
Cliente 
? 
Cliente 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Required	 
] 
public 
DateTime 
FechaCreacion %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
ICollection 
< 
DetalleCarrito )
>) *
detalleCarrito+ 9
{: ;
get< ?
;? @
setA D
;D E
}F G
=H I
newJ M
ListN R
<R S
DetalleCarritoS a
>a b
(b c
)c d
;d e
} 
} ì
8C:\Users\ACER\Desktop\GRINPLAS\Models\BoletaViewModel.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public		 

class		 
BoletaViewModel		  
{

 
public 
Pedido 
Pedido 
{ 
get "
;" #
set$ '
;' (
}) *
public 
Cliente 
Cliente 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
List 
< 
DetallePedido !
>! "
DetallesPedido# 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
} 
} ¯	
8C:\Users\ACER\Desktop\GRINPLAS\Models\ApplicationUser.cs
	namespace 	
GRINPLAS
 
. 
Models 
{ 
public		 

class		 
ApplicationUser		  
:		  !
IdentityUser		" .
{

 
public 
DateTime 
FechaRegistro %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
DateTime6 >
.> ?
Now? B
;B C
public 
Cliente 
? 
Cliente 
{  !
get" %
;% &
set' *
;* +
}+ ,
public 
ICollection 
< 
Notificacion '
>' (
Notificaciones) 7
{8 9
get: =
;= >
set? B
;B C
}D E
=F G
newH K
ListL P
<P Q
NotificacionQ ]
>] ^
(^ _
)_ `
;` a
public 
Trabajadores 
? 

Trabajador '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
} 
} ˇ◊
KC:\Users\ACER\Desktop\GRINPLAS\Migrations\20251021185252_MigracionInicio.cs
	namespace 	
GRINPLAS
 
. 

Migrations 
{ 
public

 

partial

 
class

 
MigracionInicio

 (
:

) *
	Migration

+ 4
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
string& ,
>, -
(- .
type. 2
:2 3
$str4 :
,: ;
nullable< D
:D E
falseF K
)K L
,L M
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
type0 4
:4 5
$str6 N
,N O
	maxLengthP Y
:Y Z
$num[ ^
,^ _
nullable` h
:h i
truej n
)n o
,o p
NormalizedName "
=# $
table% *
.* +
Column+ 1
<1 2
string2 8
>8 9
(9 :
type: >
:> ?
$str@ X
,X Y
	maxLengthZ c
:c d
$nume h
,h i
nullablej r
:r s
truet x
)x y
,y z
ConcurrencyStamp $
=% &
table' ,
., -
Column- 3
<3 4
string4 :
>: ;
(; <
type< @
:@ A
$strB H
,H I
nullableJ R
:R S
trueT X
)X Y
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 5
,5 6
x7 8
=>9 ;
x< =
.= >
Id> @
)@ A
;A B
} 
) 
; 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str #
,# $
columns 
: 
table 
=> !
new" %
{   
Id!! 
=!! 
table!! 
.!! 
Column!! %
<!!% &
string!!& ,
>!!, -
(!!- .
type!!. 2
:!!2 3
$str!!4 :
,!!: ;
nullable!!< D
:!!D E
false!!F K
)!!K L
,!!L M
FechaRegistro"" !
=""" #
table""$ )
."") *
Column""* 0
<""0 1
DateTime""1 9
>""9 :
("": ;
type""; ?
:""? @
$str""A ^
,""^ _
nullable""` h
:""h i
false""j o
)""o p
,""p q
UserName## 
=## 
table## $
.##$ %
Column##% +
<##+ ,
string##, 2
>##2 3
(##3 4
type##4 8
:##8 9
$str##: R
,##R S
	maxLength##T ]
:##] ^
$num##_ b
,##b c
nullable##d l
:##l m
true##n r
)##r s
,##s t
NormalizedUserName$$ &
=$$' (
table$$) .
.$$. /
Column$$/ 5
<$$5 6
string$$6 <
>$$< =
($$= >
type$$> B
:$$B C
$str$$D \
,$$\ ]
	maxLength$$^ g
:$$g h
$num$$i l
,$$l m
nullable$$n v
:$$v w
true$$x |
)$$| }
,$$} ~
Email%% 
=%% 
table%% !
.%%! "
Column%%" (
<%%( )
string%%) /
>%%/ 0
(%%0 1
type%%1 5
:%%5 6
$str%%7 O
,%%O P
	maxLength%%Q Z
:%%Z [
$num%%\ _
,%%_ `
nullable%%a i
:%%i j
true%%k o
)%%o p
,%%p q
NormalizedEmail&& #
=&&$ %
table&&& +
.&&+ ,
Column&&, 2
<&&2 3
string&&3 9
>&&9 :
(&&: ;
type&&; ?
:&&? @
$str&&A Y
,&&Y Z
	maxLength&&[ d
:&&d e
$num&&f i
,&&i j
nullable&&k s
:&&s t
true&&u y
)&&y z
,&&z {
EmailConfirmed'' "
=''# $
table''% *
.''* +
Column''+ 1
<''1 2
bool''2 6
>''6 7
(''7 8
type''8 <
:''< =
$str''> G
,''G H
nullable''I Q
:''Q R
false''S X
)''X Y
,''Y Z
PasswordHash((  
=((! "
table((# (
.((( )
Column(() /
<((/ 0
string((0 6
>((6 7
(((7 8
type((8 <
:((< =
$str((> D
,((D E
nullable((F N
:((N O
true((P T
)((T U
,((U V
SecurityStamp)) !
=))" #
table))$ )
.))) *
Column))* 0
<))0 1
string))1 7
>))7 8
())8 9
type))9 =
:))= >
$str))? E
,))E F
nullable))G O
:))O P
true))Q U
)))U V
,))V W
ConcurrencyStamp** $
=**% &
table**' ,
.**, -
Column**- 3
<**3 4
string**4 :
>**: ;
(**; <
type**< @
:**@ A
$str**B H
,**H I
nullable**J R
:**R S
true**T X
)**X Y
,**Y Z
PhoneNumber++ 
=++  !
table++" '
.++' (
Column++( .
<++. /
string++/ 5
>++5 6
(++6 7
type++7 ;
:++; <
$str++= C
,++C D
nullable++E M
:++M N
true++O S
)++S T
,++T U 
PhoneNumberConfirmed,, (
=,,) *
table,,+ 0
.,,0 1
Column,,1 7
<,,7 8
bool,,8 <
>,,< =
(,,= >
type,,> B
:,,B C
$str,,D M
,,,M N
nullable,,O W
:,,W X
false,,Y ^
),,^ _
,,,_ `
TwoFactorEnabled-- $
=--% &
table--' ,
.--, -
Column--- 3
<--3 4
bool--4 8
>--8 9
(--9 :
type--: >
:--> ?
$str--@ I
,--I J
nullable--K S
:--S T
false--U Z
)--Z [
,--[ \

LockoutEnd.. 
=..  
table..! &
...& '
Column..' -
<..- .
DateTimeOffset... <
>..< =
(..= >
type..> B
:..B C
$str..D ^
,..^ _
nullable..` h
:..h i
true..j n
)..n o
,..o p
LockoutEnabled// "
=//# $
table//% *
.//* +
Column//+ 1
<//1 2
bool//2 6
>//6 7
(//7 8
type//8 <
://< =
$str//> G
,//G H
nullable//I Q
://Q R
false//S X
)//X Y
,//Y Z
AccessFailedCount00 %
=00& '
table00( -
.00- .
Column00. 4
<004 5
int005 8
>008 9
(009 :
type00: >
:00> ?
$str00@ I
,00I J
nullable00K S
:00S T
false00U Z
)00Z [
}11 
,11 
constraints22 
:22 
table22 "
=>22# %
{33 
table44 
.44 

PrimaryKey44 $
(44$ %
$str44% 5
,445 6
x447 8
=>449 ;
x44< =
.44= >
Id44> @
)44@ A
;44A B
}55 
)55 
;55 
migrationBuilder77 
.77 
CreateTable77 (
(77( )
name88 
:88 
$str88 "
,88" #
columns99 
:99 
table99 
=>99 !
new99" %
{:: 
CategoriaId;; 
=;;  !
table;;" '
.;;' (
Column;;( .
<;;. /
int;;/ 2
>;;2 3
(;;3 4
type;;4 8
:;;8 9
$str;;: C
,;;C D
nullable;;E M
:;;M N
false;;O T
);;T U
.<< 

Annotation<< #
(<<# $
$str<<$ D
,<<D E)
NpgsqlValueGenerationStrategy<<F c
.<<c d#
IdentityByDefaultColumn<<d {
)<<{ |
,<<| }
Nombre== 
=== 
table== "
.==" #
Column==# )
<==) *
string==* 0
>==0 1
(==1 2
type==2 6
:==6 7
$str==8 >
,==> ?
nullable==@ H
:==H I
false==J O
)==O P
}>> 
,>> 
constraints?? 
:?? 
table?? "
=>??# %
{@@ 
tableAA 
.AA 

PrimaryKeyAA $
(AA$ %
$strAA% 4
,AA4 5
xAA6 7
=>AA8 :
xAA; <
.AA< =
CategoriaIdAA= H
)AAH I
;AAI J
}BB 
)BB 
;BB 
migrationBuilderDD 
.DD 
CreateTableDD (
(DD( )
nameEE 
:EE 
$strEE #
,EE# $
columnsFF 
:FF 
tableFF 
=>FF !
newFF" %
{GG 
IdHH 
=HH 
tableHH 
.HH 
ColumnHH %
<HH% &
intHH& )
>HH) *
(HH* +
typeHH+ /
:HH/ 0
$strHH1 :
,HH: ;
nullableHH< D
:HHD E
falseHHF K
)HHK L
.II 

AnnotationII #
(II# $
$strII$ D
,IID E)
NpgsqlValueGenerationStrategyIIF c
.IIc d#
IdentityByDefaultColumnIId {
)II{ |
,II| }
NombresJJ 
=JJ 
tableJJ #
.JJ# $
ColumnJJ$ *
<JJ* +
stringJJ+ 1
>JJ1 2
(JJ2 3
typeJJ3 7
:JJ7 8
$strJJ9 ?
,JJ? @
nullableJJA I
:JJI J
falseJJK P
)JJP Q
,JJQ R
TelefonoKK 
=KK 
tableKK $
.KK$ %
ColumnKK% +
<KK+ ,
stringKK, 2
>KK2 3
(KK3 4
typeKK4 8
:KK8 9
$strKK: @
,KK@ A
nullableKKB J
:KKJ K
falseKKL Q
)KKQ R
,KKR S
EmailLL 
=LL 
tableLL !
.LL! "
ColumnLL" (
<LL( )
stringLL) /
>LL/ 0
(LL0 1
typeLL1 5
:LL5 6
$strLL7 =
,LL= >
nullableLL? G
:LLG H
falseLLI N
)LLN O
,LLO P
	ContenidoMM 
=MM 
tableMM  %
.MM% &
ColumnMM& ,
<MM, -
stringMM- 3
>MM3 4
(MM4 5
typeMM5 9
:MM9 :
$strMM; A
,MMA B
nullableMMC K
:MMK L
falseMMM R
)MMR S
,MMS T

EsPositivoNN 
=NN  
tableNN! &
.NN& '
ColumnNN' -
<NN- .
boolNN. 2
>NN2 3
(NN3 4
typeNN4 8
:NN8 9
$strNN: C
,NNC D
nullableNNE M
:NNM N
falseNNO T
)NNT U
}OO 
,OO 
constraintsPP 
:PP 
tablePP "
=>PP# %
{QQ 
tableRR 
.RR 

PrimaryKeyRR $
(RR$ %
$strRR% 5
,RR5 6
xRR7 8
=>RR9 ;
xRR< =
.RR= >
IdRR> @
)RR@ A
;RRA B
}SS 
)SS 
;SS 
migrationBuilderUU 
.UU 
CreateTableUU (
(UU( )
nameVV 
:VV 
$strVV 
,VV 
columnsWW 
:WW 
tableWW 
=>WW !
newWW" %
{XX 
IdYY 
=YY 
tableYY 
.YY 
ColumnYY %
<YY% &
intYY& )
>YY) *
(YY* +
typeYY+ /
:YY/ 0
$strYY1 :
,YY: ;
nullableYY< D
:YYD E
falseYYF K
)YYK L
.ZZ 

AnnotationZZ #
(ZZ# $
$strZZ$ D
,ZZD E)
NpgsqlValueGenerationStrategyZZF c
.ZZc d#
IdentityByDefaultColumnZZd {
)ZZ{ |
,ZZ| }
Fecha[[ 
=[[ 
table[[ !
.[[! "
Column[[" (
<[[( )
DateTime[[) 1
>[[1 2
([[2 3
type[[3 7
:[[7 8
$str[[9 V
,[[V W
nullable[[X `
:[[` a
false[[b g
)[[g h
,[[h i
Concepto\\ 
=\\ 
table\\ $
.\\$ %
Column\\% +
<\\+ ,
string\\, 2
>\\2 3
(\\3 4
type\\4 8
:\\8 9
$str\\: @
,\\@ A
nullable\\B J
:\\J K
true\\L P
)\\P Q
,\\Q R
Valor]] 
=]] 
table]] !
.]]! "
Column]]" (
<]]( )
decimal]]) 0
>]]0 1
(]]1 2
type]]2 6
:]]6 7
$str]]8 A
,]]A B
nullable]]C K
:]]K L
false]]M R
)]]R S
}^^ 
,^^ 
constraints__ 
:__ 
table__ "
=>__# %
{`` 
tableaa 
.aa 

PrimaryKeyaa $
(aa$ %
$straa% 0
,aa0 1
xaa2 3
=>aa4 6
xaa7 8
.aa8 9
Idaa9 ;
)aa; <
;aa< =
}bb 
)bb 
;bb 
migrationBuilderdd 
.dd 
CreateTabledd (
(dd( )
nameee 
:ee 
$stree (
,ee( )
columnsff 
:ff 
tableff 
=>ff !
newff" %
{gg 
Idhh 
=hh 
tablehh 
.hh 
Columnhh %
<hh% &
inthh& )
>hh) *
(hh* +
typehh+ /
:hh/ 0
$strhh1 :
,hh: ;
nullablehh< D
:hhD E
falsehhF K
)hhK L
.ii 

Annotationii #
(ii# $
$strii$ D
,iiD E)
NpgsqlValueGenerationStrategyiiF c
.iic d#
IdentityByDefaultColumniid {
)ii{ |
,ii| }
RoleIdjj 
=jj 
tablejj "
.jj" #
Columnjj# )
<jj) *
stringjj* 0
>jj0 1
(jj1 2
typejj2 6
:jj6 7
$strjj8 >
,jj> ?
nullablejj@ H
:jjH I
falsejjJ O
)jjO P
,jjP Q
	ClaimTypekk 
=kk 
tablekk  %
.kk% &
Columnkk& ,
<kk, -
stringkk- 3
>kk3 4
(kk4 5
typekk5 9
:kk9 :
$strkk; A
,kkA B
nullablekkC K
:kkK L
truekkM Q
)kkQ R
,kkR S

ClaimValuell 
=ll  
tablell! &
.ll& '
Columnll' -
<ll- .
stringll. 4
>ll4 5
(ll5 6
typell6 :
:ll: ;
$strll< B
,llB C
nullablellD L
:llL M
truellN R
)llR S
}mm 
,mm 
constraintsnn 
:nn 
tablenn "
=>nn# %
{oo 
tablepp 
.pp 

PrimaryKeypp $
(pp$ %
$strpp% :
,pp: ;
xpp< =
=>pp> @
xppA B
.ppB C
IdppC E
)ppE F
;ppF G
tableqq 
.qq 

ForeignKeyqq $
(qq$ %
namerr 
:rr 
$strrr F
,rrF G
columnss 
:ss 
xss  !
=>ss" $
xss% &
.ss& '
RoleIdss' -
,ss- .
principalTablett &
:tt& '
$strtt( 5
,tt5 6
principalColumnuu '
:uu' (
$struu) -
,uu- .
onDeletevv  
:vv  !
ReferentialActionvv" 3
.vv3 4
Cascadevv4 ;
)vv; <
;vv< =
}ww 
)ww 
;ww 
migrationBuilderyy 
.yy 
CreateTableyy (
(yy( )
namezz 
:zz 
$strzz (
,zz( )
columns{{ 
:{{ 
table{{ 
=>{{ !
new{{" %
{|| 
Id}} 
=}} 
table}} 
.}} 
Column}} %
<}}% &
int}}& )
>}}) *
(}}* +
type}}+ /
:}}/ 0
$str}}1 :
,}}: ;
nullable}}< D
:}}D E
false}}F K
)}}K L
.~~ 

Annotation~~ #
(~~# $
$str~~$ D
,~~D E)
NpgsqlValueGenerationStrategy~~F c
.~~c d#
IdentityByDefaultColumn~~d {
)~~{ |
,~~| }
UserId 
= 
table "
." #
Column# )
<) *
string* 0
>0 1
(1 2
type2 6
:6 7
$str8 >
,> ?
nullable@ H
:H I
falseJ O
)O P
,P Q
	ClaimType
ÄÄ 
=
ÄÄ 
table
ÄÄ  %
.
ÄÄ% &
Column
ÄÄ& ,
<
ÄÄ, -
string
ÄÄ- 3
>
ÄÄ3 4
(
ÄÄ4 5
type
ÄÄ5 9
:
ÄÄ9 :
$str
ÄÄ; A
,
ÄÄA B
nullable
ÄÄC K
:
ÄÄK L
true
ÄÄM Q
)
ÄÄQ R
,
ÄÄR S

ClaimValue
ÅÅ 
=
ÅÅ  
table
ÅÅ! &
.
ÅÅ& '
Column
ÅÅ' -
<
ÅÅ- .
string
ÅÅ. 4
>
ÅÅ4 5
(
ÅÅ5 6
type
ÅÅ6 :
:
ÅÅ: ;
$str
ÅÅ< B
,
ÅÅB C
nullable
ÅÅD L
:
ÅÅL M
true
ÅÅN R
)
ÅÅR S
}
ÇÇ 
,
ÇÇ 
constraints
ÉÉ 
:
ÉÉ 
table
ÉÉ "
=>
ÉÉ# %
{
ÑÑ 
table
ÖÖ 
.
ÖÖ 

PrimaryKey
ÖÖ $
(
ÖÖ$ %
$str
ÖÖ% :
,
ÖÖ: ;
x
ÖÖ< =
=>
ÖÖ> @
x
ÖÖA B
.
ÖÖB C
Id
ÖÖC E
)
ÖÖE F
;
ÖÖF G
table
ÜÜ 
.
ÜÜ 

ForeignKey
ÜÜ $
(
ÜÜ$ %
name
áá 
:
áá 
$str
áá F
,
ááF G
column
àà 
:
àà 
x
àà  !
=>
àà" $
x
àà% &
.
àà& '
UserId
àà' -
,
àà- .
principalTable
ââ &
:
ââ& '
$str
ââ( 5
,
ââ5 6
principalColumn
ää '
:
ää' (
$str
ää) -
,
ää- .
onDelete
ãã  
:
ãã  !
ReferentialAction
ãã" 3
.
ãã3 4
Cascade
ãã4 ;
)
ãã; <
;
ãã< =
}
åå 
)
åå 
;
åå 
migrationBuilder
éé 
.
éé 
CreateTable
éé (
(
éé( )
name
èè 
:
èè 
$str
èè (
,
èè( )
columns
êê 
:
êê 
table
êê 
=>
êê !
new
êê" %
{
ëë 
LoginProvider
íí !
=
íí" #
table
íí$ )
.
íí) *
Column
íí* 0
<
íí0 1
string
íí1 7
>
íí7 8
(
íí8 9
type
íí9 =
:
íí= >
$str
íí? W
,
ííW X
	maxLength
ííY b
:
ííb c
$num
ííd g
,
ííg h
nullable
ííi q
:
ííq r
false
íís x
)
ííx y
,
ííy z
ProviderKey
ìì 
=
ìì  !
table
ìì" '
.
ìì' (
Column
ìì( .
<
ìì. /
string
ìì/ 5
>
ìì5 6
(
ìì6 7
type
ìì7 ;
:
ìì; <
$str
ìì= U
,
ììU V
	maxLength
ììW `
:
ìì` a
$num
ììb e
,
ììe f
nullable
ììg o
:
ììo p
false
ììq v
)
ììv w
,
ììw x!
ProviderDisplayName
îî '
=
îî( )
table
îî* /
.
îî/ 0
Column
îî0 6
<
îî6 7
string
îî7 =
>
îî= >
(
îî> ?
type
îî? C
:
îîC D
$str
îîE K
,
îîK L
nullable
îîM U
:
îîU V
true
îîW [
)
îî[ \
,
îî\ ]
UserId
ïï 
=
ïï 
table
ïï "
.
ïï" #
Column
ïï# )
<
ïï) *
string
ïï* 0
>
ïï0 1
(
ïï1 2
type
ïï2 6
:
ïï6 7
$str
ïï8 >
,
ïï> ?
nullable
ïï@ H
:
ïïH I
false
ïïJ O
)
ïïO P
}
ññ 
,
ññ 
constraints
óó 
:
óó 
table
óó "
=>
óó# %
{
òò 
table
ôô 
.
ôô 

PrimaryKey
ôô $
(
ôô$ %
$str
ôô% :
,
ôô: ;
x
ôô< =
=>
ôô> @
new
ôôA D
{
ôôE F
x
ôôG H
.
ôôH I
LoginProvider
ôôI V
,
ôôV W
x
ôôX Y
.
ôôY Z
ProviderKey
ôôZ e
}
ôôf g
)
ôôg h
;
ôôh i
table
öö 
.
öö 

ForeignKey
öö $
(
öö$ %
name
õõ 
:
õõ 
$str
õõ F
,
õõF G
column
úú 
:
úú 
x
úú  !
=>
úú" $
x
úú% &
.
úú& '
UserId
úú' -
,
úú- .
principalTable
ùù &
:
ùù& '
$str
ùù( 5
,
ùù5 6
principalColumn
ûû '
:
ûû' (
$str
ûû) -
,
ûû- .
onDelete
üü  
:
üü  !
ReferentialAction
üü" 3
.
üü3 4
Cascade
üü4 ;
)
üü; <
;
üü< =
}
†† 
)
†† 
;
†† 
migrationBuilder
¢¢ 
.
¢¢ 
CreateTable
¢¢ (
(
¢¢( )
name
££ 
:
££ 
$str
££ '
,
££' (
columns
§§ 
:
§§ 
table
§§ 
=>
§§ !
new
§§" %
{
•• 
UserId
¶¶ 
=
¶¶ 
table
¶¶ "
.
¶¶" #
Column
¶¶# )
<
¶¶) *
string
¶¶* 0
>
¶¶0 1
(
¶¶1 2
type
¶¶2 6
:
¶¶6 7
$str
¶¶8 >
,
¶¶> ?
nullable
¶¶@ H
:
¶¶H I
false
¶¶J O
)
¶¶O P
,
¶¶P Q
RoleId
ßß 
=
ßß 
table
ßß "
.
ßß" #
Column
ßß# )
<
ßß) *
string
ßß* 0
>
ßß0 1
(
ßß1 2
type
ßß2 6
:
ßß6 7
$str
ßß8 >
,
ßß> ?
nullable
ßß@ H
:
ßßH I
false
ßßJ O
)
ßßO P
}
®® 
,
®® 
constraints
©© 
:
©© 
table
©© "
=>
©©# %
{
™™ 
table
´´ 
.
´´ 

PrimaryKey
´´ $
(
´´$ %
$str
´´% 9
,
´´9 :
x
´´; <
=>
´´= ?
new
´´@ C
{
´´D E
x
´´F G
.
´´G H
UserId
´´H N
,
´´N O
x
´´P Q
.
´´Q R
RoleId
´´R X
}
´´Y Z
)
´´Z [
;
´´[ \
table
¨¨ 
.
¨¨ 

ForeignKey
¨¨ $
(
¨¨$ %
name
≠≠ 
:
≠≠ 
$str
≠≠ E
,
≠≠E F
column
ÆÆ 
:
ÆÆ 
x
ÆÆ  !
=>
ÆÆ" $
x
ÆÆ% &
.
ÆÆ& '
RoleId
ÆÆ' -
,
ÆÆ- .
principalTable
ØØ &
:
ØØ& '
$str
ØØ( 5
,
ØØ5 6
principalColumn
∞∞ '
:
∞∞' (
$str
∞∞) -
,
∞∞- .
onDelete
±±  
:
±±  !
ReferentialAction
±±" 3
.
±±3 4
Cascade
±±4 ;
)
±±; <
;
±±< =
table
≤≤ 
.
≤≤ 

ForeignKey
≤≤ $
(
≤≤$ %
name
≥≥ 
:
≥≥ 
$str
≥≥ E
,
≥≥E F
column
¥¥ 
:
¥¥ 
x
¥¥  !
=>
¥¥" $
x
¥¥% &
.
¥¥& '
UserId
¥¥' -
,
¥¥- .
principalTable
µµ &
:
µµ& '
$str
µµ( 5
,
µµ5 6
principalColumn
∂∂ '
:
∂∂' (
$str
∂∂) -
,
∂∂- .
onDelete
∑∑  
:
∑∑  !
ReferentialAction
∑∑" 3
.
∑∑3 4
Cascade
∑∑4 ;
)
∑∑; <
;
∑∑< =
}
∏∏ 
)
∏∏ 
;
∏∏ 
migrationBuilder
∫∫ 
.
∫∫ 
CreateTable
∫∫ (
(
∫∫( )
name
ªª 
:
ªª 
$str
ªª (
,
ªª( )
columns
ºº 
:
ºº 
table
ºº 
=>
ºº !
new
ºº" %
{
ΩΩ 
UserId
ææ 
=
ææ 
table
ææ "
.
ææ" #
Column
ææ# )
<
ææ) *
string
ææ* 0
>
ææ0 1
(
ææ1 2
type
ææ2 6
:
ææ6 7
$str
ææ8 >
,
ææ> ?
nullable
ææ@ H
:
ææH I
false
ææJ O
)
ææO P
,
ææP Q
LoginProvider
øø !
=
øø" #
table
øø$ )
.
øø) *
Column
øø* 0
<
øø0 1
string
øø1 7
>
øø7 8
(
øø8 9
type
øø9 =
:
øø= >
$str
øø? W
,
øøW X
	maxLength
øøY b
:
øøb c
$num
øød g
,
øøg h
nullable
øøi q
:
øøq r
false
øøs x
)
øøx y
,
øøy z
Name
¿¿ 
=
¿¿ 
table
¿¿  
.
¿¿  !
Column
¿¿! '
<
¿¿' (
string
¿¿( .
>
¿¿. /
(
¿¿/ 0
type
¿¿0 4
:
¿¿4 5
$str
¿¿6 N
,
¿¿N O
	maxLength
¿¿P Y
:
¿¿Y Z
$num
¿¿[ ^
,
¿¿^ _
nullable
¿¿` h
:
¿¿h i
false
¿¿j o
)
¿¿o p
,
¿¿p q
Value
¡¡ 
=
¡¡ 
table
¡¡ !
.
¡¡! "
Column
¡¡" (
<
¡¡( )
string
¡¡) /
>
¡¡/ 0
(
¡¡0 1
type
¡¡1 5
:
¡¡5 6
$str
¡¡7 =
,
¡¡= >
nullable
¡¡? G
:
¡¡G H
true
¡¡I M
)
¡¡M N
}
¬¬ 
,
¬¬ 
constraints
√√ 
:
√√ 
table
√√ "
=>
√√# %
{
ƒƒ 
table
≈≈ 
.
≈≈ 

PrimaryKey
≈≈ $
(
≈≈$ %
$str
≈≈% :
,
≈≈: ;
x
≈≈< =
=>
≈≈> @
new
≈≈A D
{
≈≈E F
x
≈≈G H
.
≈≈H I
UserId
≈≈I O
,
≈≈O P
x
≈≈Q R
.
≈≈R S
LoginProvider
≈≈S `
,
≈≈` a
x
≈≈b c
.
≈≈c d
Name
≈≈d h
}
≈≈i j
)
≈≈j k
;
≈≈k l
table
∆∆ 
.
∆∆ 

ForeignKey
∆∆ $
(
∆∆$ %
name
«« 
:
«« 
$str
«« F
,
««F G
column
»» 
:
»» 
x
»»  !
=>
»»" $
x
»»% &
.
»»& '
UserId
»»' -
,
»»- .
principalTable
…… &
:
……& '
$str
……( 5
,
……5 6
principalColumn
   '
:
  ' (
$str
  ) -
,
  - .
onDelete
ÀÀ  
:
ÀÀ  !
ReferentialAction
ÀÀ" 3
.
ÀÀ3 4
Cascade
ÀÀ4 ;
)
ÀÀ; <
;
ÀÀ< =
}
ÃÃ 
)
ÃÃ 
;
ÃÃ 
migrationBuilder
ŒŒ 
.
ŒŒ 
CreateTable
ŒŒ (
(
ŒŒ( )
name
œœ 
:
œœ 
$str
œœ  
,
œœ  !
columns
–– 
:
–– 
table
–– 
=>
–– !
new
––" %
{
—— 
	ClienteId
““ 
=
““ 
table
““  %
.
““% &
Column
““& ,
<
““, -
int
““- 0
>
““0 1
(
““1 2
type
““2 6
:
““6 7
$str
““8 A
,
““A B
nullable
““C K
:
““K L
false
““M R
)
““R S
.
”” 

Annotation
”” #
(
””# $
$str
””$ D
,
””D E+
NpgsqlValueGenerationStrategy
””F c
.
””c d%
IdentityByDefaultColumn
””d {
)
””{ |
,
””| }
ApplicationUserId
‘‘ %
=
‘‘& '
table
‘‘( -
.
‘‘- .
Column
‘‘. 4
<
‘‘4 5
string
‘‘5 ;
>
‘‘; <
(
‘‘< =
type
‘‘= A
:
‘‘A B
$str
‘‘C I
,
‘‘I J
nullable
‘‘K S
:
‘‘S T
false
‘‘U Z
)
‘‘Z [
,
‘‘[ \
NombreEmpresa
’’ !
=
’’" #
table
’’$ )
.
’’) *
Column
’’* 0
<
’’0 1
string
’’1 7
>
’’7 8
(
’’8 9
type
’’9 =
:
’’= >
$str
’’? E
,
’’E F
nullable
’’G O
:
’’O P
true
’’Q U
)
’’U V
,
’’V W
TipDoc
÷÷ 
=
÷÷ 
table
÷÷ "
.
÷÷" #
Column
÷÷# )
<
÷÷) *
string
÷÷* 0
>
÷÷0 1
(
÷÷1 2
type
÷÷2 6
:
÷÷6 7
$str
÷÷8 >
,
÷÷> ?
nullable
÷÷@ H
:
÷÷H I
true
÷÷J N
)
÷÷N O
,
÷÷O P
NumDoc
◊◊ 
=
◊◊ 
table
◊◊ "
.
◊◊" #
Column
◊◊# )
<
◊◊) *
string
◊◊* 0
>
◊◊0 1
(
◊◊1 2
type
◊◊2 6
:
◊◊6 7
$str
◊◊8 >
,
◊◊> ?
nullable
◊◊@ H
:
◊◊H I
true
◊◊J N
)
◊◊N O
,
◊◊O P
Telefono
ÿÿ 
=
ÿÿ 
table
ÿÿ $
.
ÿÿ$ %
Column
ÿÿ% +
<
ÿÿ+ ,
string
ÿÿ, 2
>
ÿÿ2 3
(
ÿÿ3 4
type
ÿÿ4 8
:
ÿÿ8 9
$str
ÿÿ: @
,
ÿÿ@ A
nullable
ÿÿB J
:
ÿÿJ K
true
ÿÿL P
)
ÿÿP Q
,
ÿÿQ R
Imagen
ŸŸ 
=
ŸŸ 
table
ŸŸ "
.
ŸŸ" #
Column
ŸŸ# )
<
ŸŸ) *
string
ŸŸ* 0
>
ŸŸ0 1
(
ŸŸ1 2
type
ŸŸ2 6
:
ŸŸ6 7
$str
ŸŸ8 >
,
ŸŸ> ?
nullable
ŸŸ@ H
:
ŸŸH I
true
ŸŸJ N
)
ŸŸN O
,
ŸŸO P
FecCre
⁄⁄ 
=
⁄⁄ 
table
⁄⁄ "
.
⁄⁄" #
Column
⁄⁄# )
<
⁄⁄) *
DateTime
⁄⁄* 2
>
⁄⁄2 3
(
⁄⁄3 4
type
⁄⁄4 8
:
⁄⁄8 9
$str
⁄⁄: W
,
⁄⁄W X
nullable
⁄⁄Y a
:
⁄⁄a b
false
⁄⁄c h
)
⁄⁄h i
}
€€ 
,
€€ 
constraints
‹‹ 
:
‹‹ 
table
‹‹ "
=>
‹‹# %
{
›› 
table
ﬁﬁ 
.
ﬁﬁ 

PrimaryKey
ﬁﬁ $
(
ﬁﬁ$ %
$str
ﬁﬁ% 2
,
ﬁﬁ2 3
x
ﬁﬁ4 5
=>
ﬁﬁ6 8
x
ﬁﬁ9 :
.
ﬁﬁ: ;
	ClienteId
ﬁﬁ; D
)
ﬁﬁD E
;
ﬁﬁE F
table
ﬂﬂ 
.
ﬂﬂ 

ForeignKey
ﬂﬂ $
(
ﬂﬂ$ %
name
‡‡ 
:
‡‡ 
$str
‡‡ I
,
‡‡I J
column
·· 
:
·· 
x
··  !
=>
··" $
x
··% &
.
··& '
ApplicationUserId
··' 8
,
··8 9
principalTable
‚‚ &
:
‚‚& '
$str
‚‚( 5
,
‚‚5 6
principalColumn
„„ '
:
„„' (
$str
„„) -
,
„„- .
onDelete
‰‰  
:
‰‰  !
ReferentialAction
‰‰" 3
.
‰‰3 4
Cascade
‰‰4 ;
)
‰‰; <
;
‰‰< =
}
ÂÂ 
)
ÂÂ 
;
ÂÂ 
migrationBuilder
ÁÁ 
.
ÁÁ 
CreateTable
ÁÁ (
(
ÁÁ( )
name
ËË 
:
ËË 
$str
ËË $
,
ËË$ %
columns
ÈÈ 
:
ÈÈ 
table
ÈÈ 
=>
ÈÈ !
new
ÈÈ" %
{
ÍÍ 
IdTrabajador
ÎÎ  
=
ÎÎ! "
table
ÎÎ# (
.
ÎÎ( )
Column
ÎÎ) /
<
ÎÎ/ 0
int
ÎÎ0 3
>
ÎÎ3 4
(
ÎÎ4 5
type
ÎÎ5 9
:
ÎÎ9 :
$str
ÎÎ; D
,
ÎÎD E
nullable
ÎÎF N
:
ÎÎN O
false
ÎÎP U
)
ÎÎU V
.
ÏÏ 

Annotation
ÏÏ #
(
ÏÏ# $
$str
ÏÏ$ D
,
ÏÏD E+
NpgsqlValueGenerationStrategy
ÏÏF c
.
ÏÏc d%
IdentityByDefaultColumn
ÏÏd {
)
ÏÏ{ |
,
ÏÏ| }
ApplicationUserId
ÌÌ %
=
ÌÌ& '
table
ÌÌ( -
.
ÌÌ- .
Column
ÌÌ. 4
<
ÌÌ4 5
string
ÌÌ5 ;
>
ÌÌ; <
(
ÌÌ< =
type
ÌÌ= A
:
ÌÌA B
$str
ÌÌC I
,
ÌÌI J
nullable
ÌÌK S
:
ÌÌS T
true
ÌÌU Y
)
ÌÌY Z
,
ÌÌZ [
Nombre
ÓÓ 
=
ÓÓ 
table
ÓÓ "
.
ÓÓ" #
Column
ÓÓ# )
<
ÓÓ) *
string
ÓÓ* 0
>
ÓÓ0 1
(
ÓÓ1 2
type
ÓÓ2 6
:
ÓÓ6 7
$str
ÓÓ8 >
,
ÓÓ> ?
nullable
ÓÓ@ H
:
ÓÓH I
false
ÓÓJ O
)
ÓÓO P
,
ÓÓP Q
	Apellidos
ÔÔ 
=
ÔÔ 
table
ÔÔ  %
.
ÔÔ% &
Column
ÔÔ& ,
<
ÔÔ, -
string
ÔÔ- 3
>
ÔÔ3 4
(
ÔÔ4 5
type
ÔÔ5 9
:
ÔÔ9 :
$str
ÔÔ; A
,
ÔÔA B
nullable
ÔÔC K
:
ÔÔK L
false
ÔÔM R
)
ÔÔR S
,
ÔÔS T
Telefono
 
=
 
table
 $
.
$ %
Column
% +
<
+ ,
string
, 2
>
2 3
(
3 4
type
4 8
:
8 9
$str
: @
,
@ A
nullable
B J
:
J K
false
L Q
)
Q R
,
R S
DNI
ÒÒ 
=
ÒÒ 
table
ÒÒ 
.
ÒÒ  
Column
ÒÒ  &
<
ÒÒ& '
string
ÒÒ' -
>
ÒÒ- .
(
ÒÒ. /
type
ÒÒ/ 3
:
ÒÒ3 4
$str
ÒÒ5 ;
,
ÒÒ; <
nullable
ÒÒ= E
:
ÒÒE F
false
ÒÒG L
)
ÒÒL M
,
ÒÒM N
PosicionLaboral
ÚÚ #
=
ÚÚ$ %
table
ÚÚ& +
.
ÚÚ+ ,
Column
ÚÚ, 2
<
ÚÚ2 3
string
ÚÚ3 9
>
ÚÚ9 :
(
ÚÚ: ;
type
ÚÚ; ?
:
ÚÚ? @
$str
ÚÚA G
,
ÚÚG H
nullable
ÚÚI Q
:
ÚÚQ R
false
ÚÚS X
)
ÚÚX Y
,
ÚÚY Z
Sueldo
ÛÛ 
=
ÛÛ 
table
ÛÛ "
.
ÛÛ" #
Column
ÛÛ# )
<
ÛÛ) *
decimal
ÛÛ* 1
>
ÛÛ1 2
(
ÛÛ2 3
type
ÛÛ3 7
:
ÛÛ7 8
$str
ÛÛ9 B
,
ÛÛB C
nullable
ÛÛD L
:
ÛÛL M
false
ÛÛN S
)
ÛÛS T
}
ÙÙ 
,
ÙÙ 
constraints
ıı 
:
ıı 
table
ıı "
=>
ıı# %
{
ˆˆ 
table
˜˜ 
.
˜˜ 

PrimaryKey
˜˜ $
(
˜˜$ %
$str
˜˜% 6
,
˜˜6 7
x
˜˜8 9
=>
˜˜: <
x
˜˜= >
.
˜˜> ?
IdTrabajador
˜˜? K
)
˜˜K L
;
˜˜L M
table
¯¯ 
.
¯¯ 

ForeignKey
¯¯ $
(
¯¯$ %
name
˘˘ 
:
˘˘ 
$str
˘˘ M
,
˘˘M N
column
˙˙ 
:
˙˙ 
x
˙˙  !
=>
˙˙" $
x
˙˙% &
.
˙˙& '
ApplicationUserId
˙˙' 8
,
˙˙8 9
principalTable
˚˚ &
:
˚˚& '
$str
˚˚( 5
,
˚˚5 6
principalColumn
¸¸ '
:
¸¸' (
$str
¸¸) -
,
¸¸- .
onDelete
˝˝  
:
˝˝  !
ReferentialAction
˝˝" 3
.
˝˝3 4
Cascade
˝˝4 ;
)
˝˝; <
;
˝˝< =
}
˛˛ 
)
˛˛ 
;
˛˛ 
migrationBuilder
ÄÄ 
.
ÄÄ 
CreateTable
ÄÄ (
(
ÄÄ( )
name
ÅÅ 
:
ÅÅ 
$str
ÅÅ !
,
ÅÅ! "
columns
ÇÇ 
:
ÇÇ 
table
ÇÇ 
=>
ÇÇ !
new
ÇÇ" %
{
ÉÉ 

ProductoId
ÑÑ 
=
ÑÑ  
table
ÑÑ! &
.
ÑÑ& '
Column
ÑÑ' -
<
ÑÑ- .
int
ÑÑ. 1
>
ÑÑ1 2
(
ÑÑ2 3
type
ÑÑ3 7
:
ÑÑ7 8
$str
ÑÑ9 B
,
ÑÑB C
nullable
ÑÑD L
:
ÑÑL M
false
ÑÑN S
)
ÑÑS T
.
ÖÖ 

Annotation
ÖÖ #
(
ÖÖ# $
$str
ÖÖ$ D
,
ÖÖD E+
NpgsqlValueGenerationStrategy
ÖÖF c
.
ÖÖc d%
IdentityByDefaultColumn
ÖÖd {
)
ÖÖ{ |
,
ÖÖ| }
Nombre
ÜÜ 
=
ÜÜ 
table
ÜÜ "
.
ÜÜ" #
Column
ÜÜ# )
<
ÜÜ) *
string
ÜÜ* 0
>
ÜÜ0 1
(
ÜÜ1 2
type
ÜÜ2 6
:
ÜÜ6 7
$str
ÜÜ8 >
,
ÜÜ> ?
nullable
ÜÜ@ H
:
ÜÜH I
false
ÜÜJ O
)
ÜÜO P
,
ÜÜP Q
Descripcion
áá 
=
áá  !
table
áá" '
.
áá' (
Column
áá( .
<
áá. /
string
áá/ 5
>
áá5 6
(
áá6 7
type
áá7 ;
:
áá; <
$str
áá= C
,
ááC D
nullable
ááE M
:
ááM N
true
ááO S
)
ááS T
,
ááT U
Imagen
àà 
=
àà 
table
àà "
.
àà" #
Column
àà# )
<
àà) *
string
àà* 0
>
àà0 1
(
àà1 2
type
àà2 6
:
àà6 7
$str
àà8 >
,
àà> ?
nullable
àà@ H
:
ààH I
true
ààJ N
)
ààN O
,
ààO P
Stock
ââ 
=
ââ 
table
ââ !
.
ââ! "
Column
ââ" (
<
ââ( )
double
ââ) /
>
ââ/ 0
(
ââ0 1
type
ââ1 5
:
ââ5 6
$str
ââ7 I
,
ââI J
nullable
ââK S
:
ââS T
false
ââU Z
)
ââZ [
,
ââ[ \
Precio
ää 
=
ää 
table
ää "
.
ää" #
Column
ää# )
<
ää) *
double
ää* 0
>
ää0 1
(
ää1 2
type
ää2 6
:
ää6 7
$str
ää8 G
,
ääG H
nullable
ääI Q
:
ääQ R
false
ääS X
)
ääX Y
,
ääY Z
CategoriaId
ãã 
=
ãã  !
table
ãã" '
.
ãã' (
Column
ãã( .
<
ãã. /
int
ãã/ 2
>
ãã2 3
(
ãã3 4
type
ãã4 8
:
ãã8 9
$str
ãã: C
,
ããC D
nullable
ããE M
:
ããM N
false
ããO T
)
ããT U
}
åå 
,
åå 
constraints
çç 
:
çç 
table
çç "
=>
çç# %
{
éé 
table
èè 
.
èè 

PrimaryKey
èè $
(
èè$ %
$str
èè% 3
,
èè3 4
x
èè5 6
=>
èè7 9
x
èè: ;
.
èè; <

ProductoId
èè< F
)
èèF G
;
èèG H
table
êê 
.
êê 

ForeignKey
êê $
(
êê$ %
name
ëë 
:
ëë 
$str
ëë C
,
ëëC D
column
íí 
:
íí 
x
íí  !
=>
íí" $
x
íí% &
.
íí& '
CategoriaId
íí' 2
,
íí2 3
principalTable
ìì &
:
ìì& '
$str
ìì( 4
,
ìì4 5
principalColumn
îî '
:
îî' (
$str
îî) 6
,
îî6 7
onDelete
ïï  
:
ïï  !
ReferentialAction
ïï" 3
.
ïï3 4
Cascade
ïï4 ;
)
ïï; <
;
ïï< =
}
ññ 
)
ññ 
;
ññ 
migrationBuilder
òò 
.
òò 
CreateTable
òò (
(
òò( )
name
ôô 
:
ôô 
$str
ôô 
,
ôô  
columns
öö 
:
öö 
table
öö 
=>
öö !
new
öö" %
{
õõ 
	CarritoId
úú 
=
úú 
table
úú  %
.
úú% &
Column
úú& ,
<
úú, -
int
úú- 0
>
úú0 1
(
úú1 2
type
úú2 6
:
úú6 7
$str
úú8 A
,
úúA B
nullable
úúC K
:
úúK L
false
úúM R
)
úúR S
.
ùù 

Annotation
ùù #
(
ùù# $
$str
ùù$ D
,
ùùD E+
NpgsqlValueGenerationStrategy
ùùF c
.
ùùc d%
IdentityByDefaultColumn
ùùd {
)
ùù{ |
,
ùù| }
	ClienteId
ûû 
=
ûû 
table
ûû  %
.
ûû% &
Column
ûû& ,
<
ûû, -
int
ûû- 0
>
ûû0 1
(
ûû1 2
type
ûû2 6
:
ûû6 7
$str
ûû8 A
,
ûûA B
nullable
ûûC K
:
ûûK L
false
ûûM R
)
ûûR S
,
ûûS T
FechaCreacion
üü !
=
üü" #
table
üü$ )
.
üü) *
Column
üü* 0
<
üü0 1
DateTime
üü1 9
>
üü9 :
(
üü: ;
type
üü; ?
:
üü? @
$str
üüA ^
,
üü^ _
nullable
üü` h
:
üüh i
false
üüj o
)
üüo p
}
†† 
,
†† 
constraints
°° 
:
°° 
table
°° "
=>
°°# %
{
¢¢ 
table
££ 
.
££ 

PrimaryKey
££ $
(
££$ %
$str
££% 1
,
££1 2
x
££3 4
=>
££5 7
x
££8 9
.
££9 :
	CarritoId
££: C
)
££C D
;
££D E
table
§§ 
.
§§ 

ForeignKey
§§ $
(
§§$ %
name
•• 
:
•• 
$str
•• =
,
••= >
column
¶¶ 
:
¶¶ 
x
¶¶  !
=>
¶¶" $
x
¶¶% &
.
¶¶& '
	ClienteId
¶¶' 0
,
¶¶0 1
principalTable
ßß &
:
ßß& '
$str
ßß( 2
,
ßß2 3
principalColumn
®® '
:
®®' (
$str
®®) 4
,
®®4 5
onDelete
©©  
:
©©  !
ReferentialAction
©©" 3
.
©©3 4
Cascade
©©4 ;
)
©©; <
;
©©< =
}
™™ 
)
™™ 
;
™™ 
migrationBuilder
¨¨ 
.
¨¨ 
CreateTable
¨¨ (
(
¨¨( )
name
≠≠ 
:
≠≠ 
$str
≠≠ 
,
≠≠  
columns
ÆÆ 
:
ÆÆ 
table
ÆÆ 
=>
ÆÆ !
new
ÆÆ" %
{
ØØ 
PedidoId
∞∞ 
=
∞∞ 
table
∞∞ $
.
∞∞$ %
Column
∞∞% +
<
∞∞+ ,
int
∞∞, /
>
∞∞/ 0
(
∞∞0 1
type
∞∞1 5
:
∞∞5 6
$str
∞∞7 @
,
∞∞@ A
nullable
∞∞B J
:
∞∞J K
false
∞∞L Q
)
∞∞Q R
.
±± 

Annotation
±± #
(
±±# $
$str
±±$ D
,
±±D E+
NpgsqlValueGenerationStrategy
±±F c
.
±±c d%
IdentityByDefaultColumn
±±d {
)
±±{ |
,
±±| }
	ClienteId
≤≤ 
=
≤≤ 
table
≤≤  %
.
≤≤% &
Column
≤≤& ,
<
≤≤, -
int
≤≤- 0
>
≤≤0 1
(
≤≤1 2
type
≤≤2 6
:
≤≤6 7
$str
≤≤8 A
,
≤≤A B
nullable
≤≤C K
:
≤≤K L
false
≤≤M R
)
≤≤R S
,
≤≤S T
	Direccion
≥≥ 
=
≥≥ 
table
≥≥  %
.
≥≥% &
Column
≥≥& ,
<
≥≥, -
string
≥≥- 3
>
≥≥3 4
(
≥≥4 5
type
≥≥5 9
:
≥≥9 :
$str
≥≥; A
,
≥≥A B
nullable
≥≥C K
:
≥≥K L
false
≥≥M R
)
≥≥R S
,
≥≥S T
BoletaEmitida
¥¥ !
=
¥¥" #
table
¥¥$ )
.
¥¥) *
Column
¥¥* 0
<
¥¥0 1
string
¥¥1 7
>
¥¥7 8
(
¥¥8 9
type
¥¥9 =
:
¥¥= >
$str
¥¥? E
,
¥¥E F
nullable
¥¥G O
:
¥¥O P
true
¥¥Q U
)
¥¥U V
,
¥¥V W
FechaEmision
µµ  
=
µµ! "
table
µµ# (
.
µµ( )
Column
µµ) /
<
µµ/ 0
DateTime
µµ0 8
>
µµ8 9
(
µµ9 :
type
µµ: >
:
µµ> ?
$str
µµ@ ]
,
µµ] ^
nullable
µµ_ g
:
µµg h
false
µµi n
)
µµn o
,
µµo p
FechaEntrega
∂∂  
=
∂∂! "
table
∂∂# (
.
∂∂( )
Column
∂∂) /
<
∂∂/ 0
DateTime
∂∂0 8
>
∂∂8 9
(
∂∂9 :
type
∂∂: >
:
∂∂> ?
$str
∂∂@ ]
,
∂∂] ^
nullable
∂∂_ g
:
∂∂g h
true
∂∂i m
)
∂∂m n
,
∂∂n o
Status
∑∑ 
=
∑∑ 
table
∑∑ "
.
∑∑" #
Column
∑∑# )
<
∑∑) *
string
∑∑* 0
>
∑∑0 1
(
∑∑1 2
type
∑∑2 6
:
∑∑6 7
$str
∑∑8 O
,
∑∑O P
	maxLength
∑∑Q Z
:
∑∑Z [
$num
∑∑\ ^
,
∑∑^ _
nullable
∑∑` h
:
∑∑h i
false
∑∑j o
)
∑∑o p
,
∑∑p q
Total
∏∏ 
=
∏∏ 
table
∏∏ !
.
∏∏! "
Column
∏∏" (
<
∏∏( )
decimal
∏∏) 0
>
∏∏0 1
(
∏∏1 2
type
∏∏2 6
:
∏∏6 7
$str
∏∏8 G
,
∏∏G H
nullable
∏∏I Q
:
∏∏Q R
false
∏∏S X
)
∏∏X Y
,
∏∏Y Z
Pago
ππ 
=
ππ 
table
ππ  
.
ππ  !
Column
ππ! '
<
ππ' (
string
ππ( .
>
ππ. /
(
ππ/ 0
type
ππ0 4
:
ππ4 5
$str
ππ6 <
,
ππ< =
nullable
ππ> F
:
ππF G
true
ππH L
)
ππL M
,
ππM N
ComprobantePago
∫∫ #
=
∫∫$ %
table
∫∫& +
.
∫∫+ ,
Column
∫∫, 2
<
∫∫2 3
string
∫∫3 9
>
∫∫9 :
(
∫∫: ;
type
∫∫; ?
:
∫∫? @
$str
∫∫A G
,
∫∫G H
nullable
∫∫I Q
:
∫∫Q R
true
∫∫S W
)
∫∫W X
}
ªª 
,
ªª 
constraints
ºº 
:
ºº 
table
ºº "
=>
ºº# %
{
ΩΩ 
table
ææ 
.
ææ 

PrimaryKey
ææ $
(
ææ$ %
$str
ææ% 1
,
ææ1 2
x
ææ3 4
=>
ææ5 7
x
ææ8 9
.
ææ9 :
PedidoId
ææ: B
)
ææB C
;
ææC D
table
øø 
.
øø 

ForeignKey
øø $
(
øø$ %
name
¿¿ 
:
¿¿ 
$str
¿¿ =
,
¿¿= >
column
¡¡ 
:
¡¡ 
x
¡¡  !
=>
¡¡" $
x
¡¡% &
.
¡¡& '
	ClienteId
¡¡' 0
,
¡¡0 1
principalTable
¬¬ &
:
¬¬& '
$str
¬¬( 2
,
¬¬2 3
principalColumn
√√ '
:
√√' (
$str
√√) 4
,
√√4 5
onDelete
ƒƒ  
:
ƒƒ  !
ReferentialAction
ƒƒ" 3
.
ƒƒ3 4
Cascade
ƒƒ4 ;
)
ƒƒ; <
;
ƒƒ< =
}
≈≈ 
)
≈≈ 
;
≈≈ 
migrationBuilder
«« 
.
«« 
CreateTable
«« (
(
««( )
name
»» 
:
»» 
$str
»» %
,
»»% &
columns
…… 
:
…… 
table
…… 
=>
…… !
new
……" %
{
   
ReclamacionId
ÀÀ !
=
ÀÀ" #
table
ÀÀ$ )
.
ÀÀ) *
Column
ÀÀ* 0
<
ÀÀ0 1
int
ÀÀ1 4
>
ÀÀ4 5
(
ÀÀ5 6
type
ÀÀ6 :
:
ÀÀ: ;
$str
ÀÀ< E
,
ÀÀE F
nullable
ÀÀG O
:
ÀÀO P
false
ÀÀQ V
)
ÀÀV W
.
ÃÃ 

Annotation
ÃÃ #
(
ÃÃ# $
$str
ÃÃ$ D
,
ÃÃD E+
NpgsqlValueGenerationStrategy
ÃÃF c
.
ÃÃc d%
IdentityByDefaultColumn
ÃÃd {
)
ÃÃ{ |
,
ÃÃ| }
Nombre
ÕÕ 
=
ÕÕ 
table
ÕÕ "
.
ÕÕ" #
Column
ÕÕ# )
<
ÕÕ) *
string
ÕÕ* 0
>
ÕÕ0 1
(
ÕÕ1 2
type
ÕÕ2 6
:
ÕÕ6 7
$str
ÕÕ8 >
,
ÕÕ> ?
nullable
ÕÕ@ H
:
ÕÕH I
true
ÕÕJ N
)
ÕÕN O
,
ÕÕO P
Correo
ŒŒ 
=
ŒŒ 
table
ŒŒ "
.
ŒŒ" #
Column
ŒŒ# )
<
ŒŒ) *
string
ŒŒ* 0
>
ŒŒ0 1
(
ŒŒ1 2
type
ŒŒ2 6
:
ŒŒ6 7
$str
ŒŒ8 >
,
ŒŒ> ?
nullable
ŒŒ@ H
:
ŒŒH I
true
ŒŒJ N
)
ŒŒN O
,
ŒŒO P
Telefono
œœ 
=
œœ 
table
œœ $
.
œœ$ %
Column
œœ% +
<
œœ+ ,
string
œœ, 2
>
œœ2 3
(
œœ3 4
type
œœ4 8
:
œœ8 9
$str
œœ: @
,
œœ@ A
nullable
œœB J
:
œœJ K
true
œœL P
)
œœP Q
,
œœQ R
Detalle
–– 
=
–– 
table
–– #
.
––# $
Column
––$ *
<
––* +
string
––+ 1
>
––1 2
(
––2 3
type
––3 7
:
––7 8
$str
––9 ?
,
––? @
nullable
––A I
:
––I J
false
––K P
)
––P Q
,
––Q R
	Respuesta
—— 
=
—— 
table
——  %
.
——% &
Column
——& ,
<
——, -
string
——- 3
>
——3 4
(
——4 5
type
——5 9
:
——9 :
$str
——; A
,
——A B
nullable
——C K
:
——K L
true
——M Q
)
——Q R
,
——R S
Estado
““ 
=
““ 
table
““ "
.
““" #
Column
““# )
<
““) *
bool
““* .
>
““. /
(
““/ 0
type
““0 4
:
““4 5
$str
““6 ?
,
““? @
nullable
““A I
:
““I J
false
““K P
)
““P Q
,
““Q R
FechaCreacion
”” !
=
””" #
table
””$ )
.
””) *
Column
””* 0
<
””0 1
DateTime
””1 9
>
””9 :
(
””: ;
type
””; ?
:
””? @
$str
””A ^
,
””^ _
nullable
””` h
:
””h i
false
””j o
)
””o p
,
””p q
	ClienteId
‘‘ 
=
‘‘ 
table
‘‘  %
.
‘‘% &
Column
‘‘& ,
<
‘‘, -
int
‘‘- 0
>
‘‘0 1
(
‘‘1 2
type
‘‘2 6
:
‘‘6 7
$str
‘‘8 A
,
‘‘A B
nullable
‘‘C K
:
‘‘K L
false
‘‘M R
)
‘‘R S
}
’’ 
,
’’ 
constraints
÷÷ 
:
÷÷ 
table
÷÷ "
=>
÷÷# %
{
◊◊ 
table
ÿÿ 
.
ÿÿ 

PrimaryKey
ÿÿ $
(
ÿÿ$ %
$str
ÿÿ% 7
,
ÿÿ7 8
x
ÿÿ9 :
=>
ÿÿ; =
x
ÿÿ> ?
.
ÿÿ? @
ReclamacionId
ÿÿ@ M
)
ÿÿM N
;
ÿÿN O
table
ŸŸ 
.
ŸŸ 

ForeignKey
ŸŸ $
(
ŸŸ$ %
name
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ C
,
⁄⁄C D
column
€€ 
:
€€ 
x
€€  !
=>
€€" $
x
€€% &
.
€€& '
	ClienteId
€€' 0
,
€€0 1
principalTable
‹‹ &
:
‹‹& '
$str
‹‹( 2
,
‹‹2 3
principalColumn
›› '
:
››' (
$str
››) 4
,
››4 5
onDelete
ﬁﬁ  
:
ﬁﬁ  !
ReferentialAction
ﬁﬁ" 3
.
ﬁﬁ3 4
Cascade
ﬁﬁ4 ;
)
ﬁﬁ; <
;
ﬁﬁ< =
}
ﬂﬂ 
)
ﬂﬂ 
;
ﬂﬂ 
migrationBuilder
·· 
.
·· 
CreateTable
·· (
(
··( )
name
‚‚ 
:
‚‚ 
$str
‚‚ &
,
‚‚& '
columns
„„ 
:
„„ 
table
„„ 
=>
„„ !
new
„„" %
{
‰‰ 
	DetalleId
ÂÂ 
=
ÂÂ 
table
ÂÂ  %
.
ÂÂ% &
Column
ÂÂ& ,
<
ÂÂ, -
int
ÂÂ- 0
>
ÂÂ0 1
(
ÂÂ1 2
type
ÂÂ2 6
:
ÂÂ6 7
$str
ÂÂ8 A
,
ÂÂA B
nullable
ÂÂC K
:
ÂÂK L
false
ÂÂM R
)
ÂÂR S
.
ÊÊ 

Annotation
ÊÊ #
(
ÊÊ# $
$str
ÊÊ$ D
,
ÊÊD E+
NpgsqlValueGenerationStrategy
ÊÊF c
.
ÊÊc d%
IdentityByDefaultColumn
ÊÊd {
)
ÊÊ{ |
,
ÊÊ| }
Cantidad
ÁÁ 
=
ÁÁ 
table
ÁÁ $
.
ÁÁ$ %
Column
ÁÁ% +
<
ÁÁ+ ,
int
ÁÁ, /
>
ÁÁ/ 0
(
ÁÁ0 1
type
ÁÁ1 5
:
ÁÁ5 6
$str
ÁÁ7 @
,
ÁÁ@ A
nullable
ÁÁB J
:
ÁÁJ K
false
ÁÁL Q
)
ÁÁQ R
,
ÁÁR S
PrecioUnitario
ËË "
=
ËË# $
table
ËË% *
.
ËË* +
Column
ËË+ 1
<
ËË1 2
decimal
ËË2 9
>
ËË9 :
(
ËË: ;
type
ËË; ?
:
ËË? @
$str
ËËA J
,
ËËJ K
nullable
ËËL T
:
ËËT U
false
ËËV [
)
ËË[ \
,
ËË\ ]
	CarritoId
ÈÈ 
=
ÈÈ 
table
ÈÈ  %
.
ÈÈ% &
Column
ÈÈ& ,
<
ÈÈ, -
int
ÈÈ- 0
>
ÈÈ0 1
(
ÈÈ1 2
type
ÈÈ2 6
:
ÈÈ6 7
$str
ÈÈ8 A
,
ÈÈA B
nullable
ÈÈC K
:
ÈÈK L
false
ÈÈM R
)
ÈÈR S
,
ÈÈS T

ProductoId
ÍÍ 
=
ÍÍ  
table
ÍÍ! &
.
ÍÍ& '
Column
ÍÍ' -
<
ÍÍ- .
int
ÍÍ. 1
>
ÍÍ1 2
(
ÍÍ2 3
type
ÍÍ3 7
:
ÍÍ7 8
$str
ÍÍ9 B
,
ÍÍB C
nullable
ÍÍD L
:
ÍÍL M
false
ÍÍN S
)
ÍÍS T
}
ÎÎ 
,
ÎÎ 
constraints
ÏÏ 
:
ÏÏ 
table
ÏÏ "
=>
ÏÏ# %
{
ÌÌ 
table
ÓÓ 
.
ÓÓ 

PrimaryKey
ÓÓ $
(
ÓÓ$ %
$str
ÓÓ% 8
,
ÓÓ8 9
x
ÓÓ: ;
=>
ÓÓ< >
x
ÓÓ? @
.
ÓÓ@ A
	DetalleId
ÓÓA J
)
ÓÓJ K
;
ÓÓK L
table
ÔÔ 
.
ÔÔ 

ForeignKey
ÔÔ $
(
ÔÔ$ %
name
 
:
 
$str
 C
,
C D
column
ÒÒ 
:
ÒÒ 
x
ÒÒ  !
=>
ÒÒ" $
x
ÒÒ% &
.
ÒÒ& '
	CarritoId
ÒÒ' 0
,
ÒÒ0 1
principalTable
ÚÚ &
:
ÚÚ& '
$str
ÚÚ( 1
,
ÚÚ1 2
principalColumn
ÛÛ '
:
ÛÛ' (
$str
ÛÛ) 4
,
ÛÛ4 5
onDelete
ÙÙ  
:
ÙÙ  !
ReferentialAction
ÙÙ" 3
.
ÙÙ3 4
Cascade
ÙÙ4 ;
)
ÙÙ; <
;
ÙÙ< =
table
ıı 
.
ıı 

ForeignKey
ıı $
(
ıı$ %
name
ˆˆ 
:
ˆˆ 
$str
ˆˆ F
,
ˆˆF G
column
˜˜ 
:
˜˜ 
x
˜˜  !
=>
˜˜" $
x
˜˜% &
.
˜˜& '

ProductoId
˜˜' 1
,
˜˜1 2
principalTable
¯¯ &
:
¯¯& '
$str
¯¯( 3
,
¯¯3 4
principalColumn
˘˘ '
:
˘˘' (
$str
˘˘) 5
,
˘˘5 6
onDelete
˙˙  
:
˙˙  !
ReferentialAction
˙˙" 3
.
˙˙3 4
Cascade
˙˙4 ;
)
˙˙; <
;
˙˙< =
}
˚˚ 
)
˚˚ 
;
˚˚ 
migrationBuilder
˝˝ 
.
˝˝ 
CreateTable
˝˝ (
(
˝˝( )
name
˛˛ 
:
˛˛ 
$str
˛˛ &
,
˛˛& '
columns
ˇˇ 
:
ˇˇ 
table
ˇˇ 
=>
ˇˇ !
new
ˇˇ" %
{
ÄÄ 
DetallePedidoId
ÅÅ #
=
ÅÅ$ %
table
ÅÅ& +
.
ÅÅ+ ,
Column
ÅÅ, 2
<
ÅÅ2 3
int
ÅÅ3 6
>
ÅÅ6 7
(
ÅÅ7 8
type
ÅÅ8 <
:
ÅÅ< =
$str
ÅÅ> G
,
ÅÅG H
nullable
ÅÅI Q
:
ÅÅQ R
false
ÅÅS X
)
ÅÅX Y
.
ÇÇ 

Annotation
ÇÇ #
(
ÇÇ# $
$str
ÇÇ$ D
,
ÇÇD E+
NpgsqlValueGenerationStrategy
ÇÇF c
.
ÇÇc d%
IdentityByDefaultColumn
ÇÇd {
)
ÇÇ{ |
,
ÇÇ| }
PedidoId
ÉÉ 
=
ÉÉ 
table
ÉÉ $
.
ÉÉ$ %
Column
ÉÉ% +
<
ÉÉ+ ,
int
ÉÉ, /
>
ÉÉ/ 0
(
ÉÉ0 1
type
ÉÉ1 5
:
ÉÉ5 6
$str
ÉÉ7 @
,
ÉÉ@ A
nullable
ÉÉB J
:
ÉÉJ K
false
ÉÉL Q
)
ÉÉQ R
,
ÉÉR S

ProductoId
ÑÑ 
=
ÑÑ  
table
ÑÑ! &
.
ÑÑ& '
Column
ÑÑ' -
<
ÑÑ- .
int
ÑÑ. 1
>
ÑÑ1 2
(
ÑÑ2 3
type
ÑÑ3 7
:
ÑÑ7 8
$str
ÑÑ9 B
,
ÑÑB C
nullable
ÑÑD L
:
ÑÑL M
false
ÑÑN S
)
ÑÑS T
,
ÑÑT U
Cantidad
ÖÖ 
=
ÖÖ 
table
ÖÖ $
.
ÖÖ$ %
Column
ÖÖ% +
<
ÖÖ+ ,
int
ÖÖ, /
>
ÖÖ/ 0
(
ÖÖ0 1
type
ÖÖ1 5
:
ÖÖ5 6
$str
ÖÖ7 @
,
ÖÖ@ A
nullable
ÖÖB J
:
ÖÖJ K
false
ÖÖL Q
)
ÖÖQ R
,
ÖÖR S
PrecioUnitario
ÜÜ "
=
ÜÜ# $
table
ÜÜ% *
.
ÜÜ* +
Column
ÜÜ+ 1
<
ÜÜ1 2
decimal
ÜÜ2 9
>
ÜÜ9 :
(
ÜÜ: ;
type
ÜÜ; ?
:
ÜÜ? @
$str
ÜÜA P
,
ÜÜP Q
nullable
ÜÜR Z
:
ÜÜZ [
false
ÜÜ\ a
)
ÜÜa b
,
ÜÜb c
PrecioTotal
áá 
=
áá  !
table
áá" '
.
áá' (
Column
áá( .
<
áá. /
decimal
áá/ 6
>
áá6 7
(
áá7 8
type
áá8 <
:
áá< =
$str
áá> M
,
ááM N
nullable
ááO W
:
ááW X
false
ááY ^
)
áá^ _
}
àà 
,
àà 
constraints
ââ 
:
ââ 
table
ââ "
=>
ââ# %
{
ää 
table
ãã 
.
ãã 

PrimaryKey
ãã $
(
ãã$ %
$str
ãã% 8
,
ãã8 9
x
ãã: ;
=>
ãã< >
x
ãã? @
.
ãã@ A
DetallePedidoId
ããA P
)
ããP Q
;
ããQ R
table
åå 
.
åå 

ForeignKey
åå $
(
åå$ %
name
çç 
:
çç 
$str
çç B
,
ççB C
column
éé 
:
éé 
x
éé  !
=>
éé" $
x
éé% &
.
éé& '
PedidoId
éé' /
,
éé/ 0
principalTable
èè &
:
èè& '
$str
èè( 1
,
èè1 2
principalColumn
êê '
:
êê' (
$str
êê) 3
,
êê3 4
onDelete
ëë  
:
ëë  !
ReferentialAction
ëë" 3
.
ëë3 4
Cascade
ëë4 ;
)
ëë; <
;
ëë< =
table
íí 
.
íí 

ForeignKey
íí $
(
íí$ %
name
ìì 
:
ìì 
$str
ìì F
,
ììF G
column
îî 
:
îî 
x
îî  !
=>
îî" $
x
îî% &
.
îî& '

ProductoId
îî' 1
,
îî1 2
principalTable
ïï &
:
ïï& '
$str
ïï( 3
,
ïï3 4
principalColumn
ññ '
:
ññ' (
$str
ññ) 5
,
ññ5 6
onDelete
óó  
:
óó  !
ReferentialAction
óó" 3
.
óó3 4
Cascade
óó4 ;
)
óó; <
;
óó< =
}
òò 
)
òò 
;
òò 
migrationBuilder
öö 
.
öö 
CreateTable
öö (
(
öö( )
name
õõ 
:
õõ 
$str
õõ &
,
õõ& '
columns
úú 
:
úú 
table
úú 
=>
úú !
new
úú" %
{
ùù 
NotificacionId
ûû "
=
ûû# $
table
ûû% *
.
ûû* +
Column
ûû+ 1
<
ûû1 2
int
ûû2 5
>
ûû5 6
(
ûû6 7
type
ûû7 ;
:
ûû; <
$str
ûû= F
,
ûûF G
nullable
ûûH P
:
ûûP Q
false
ûûR W
)
ûûW X
.
üü 

Annotation
üü #
(
üü# $
$str
üü$ D
,
üüD E+
NpgsqlValueGenerationStrategy
üüF c
.
üüc d%
IdentityByDefaultColumn
üüd {
)
üü{ |
,
üü| }
	UsuarioId
†† 
=
†† 
table
††  %
.
††% &
Column
††& ,
<
††, -
string
††- 3
>
††3 4
(
††4 5
type
††5 9
:
††9 :
$str
††; A
,
††A B
nullable
††C K
:
††K L
false
††M R
)
††R S
,
††S T
Titulo
°° 
=
°° 
table
°° "
.
°°" #
Column
°°# )
<
°°) *
string
°°* 0
>
°°0 1
(
°°1 2
type
°°2 6
:
°°6 7
$str
°°8 >
,
°°> ?
nullable
°°@ H
:
°°H I
false
°°J O
)
°°O P
,
°°P Q
Mensaje
¢¢ 
=
¢¢ 
table
¢¢ #
.
¢¢# $
Column
¢¢$ *
<
¢¢* +
string
¢¢+ 1
>
¢¢1 2
(
¢¢2 3
type
¢¢3 7
:
¢¢7 8
$str
¢¢9 ?
,
¢¢? @
nullable
¢¢A I
:
¢¢I J
false
¢¢K P
)
¢¢P Q
,
¢¢Q R
FechaCreacion
££ !
=
££" #
table
££$ )
.
££) *
Column
££* 0
<
££0 1
DateTime
££1 9
>
££9 :
(
££: ;
type
££; ?
:
££? @
$str
££A ^
,
££^ _
nullable
££` h
:
££h i
false
££j o
)
££o p
,
££p q
Leida
§§ 
=
§§ 
table
§§ !
.
§§! "
Column
§§" (
<
§§( )
bool
§§) -
>
§§- .
(
§§. /
type
§§/ 3
:
§§3 4
$str
§§5 >
,
§§> ?
nullable
§§@ H
:
§§H I
false
§§J O
)
§§O P
,
§§P Q
Tipo
•• 
=
•• 
table
••  
.
••  !
Column
••! '
<
••' (
string
••( .
>
••. /
(
••/ 0
type
••0 4
:
••4 5
$str
••6 <
,
••< =
nullable
••> F
:
••F G
true
••H L
)
••L M
,
••M N
PedidoId
¶¶ 
=
¶¶ 
table
¶¶ $
.
¶¶$ %
Column
¶¶% +
<
¶¶+ ,
int
¶¶, /
>
¶¶/ 0
(
¶¶0 1
type
¶¶1 5
:
¶¶5 6
$str
¶¶7 @
,
¶¶@ A
nullable
¶¶B J
:
¶¶J K
true
¶¶L P
)
¶¶P Q
}
ßß 
,
ßß 
constraints
®® 
:
®® 
table
®® "
=>
®®# %
{
©© 
table
™™ 
.
™™ 

PrimaryKey
™™ $
(
™™$ %
$str
™™% 8
,
™™8 9
x
™™: ;
=>
™™< >
x
™™? @
.
™™@ A
NotificacionId
™™A O
)
™™O P
;
™™P Q
table
´´ 
.
´´ 

ForeignKey
´´ $
(
´´$ %
name
¨¨ 
:
¨¨ 
$str
¨¨ G
,
¨¨G H
column
≠≠ 
:
≠≠ 
x
≠≠  !
=>
≠≠" $
x
≠≠% &
.
≠≠& '
	UsuarioId
≠≠' 0
,
≠≠0 1
principalTable
ÆÆ &
:
ÆÆ& '
$str
ÆÆ( 5
,
ÆÆ5 6
principalColumn
ØØ '
:
ØØ' (
$str
ØØ) -
,
ØØ- .
onDelete
∞∞  
:
∞∞  !
ReferentialAction
∞∞" 3
.
∞∞3 4
Cascade
∞∞4 ;
)
∞∞; <
;
∞∞< =
table
±± 
.
±± 

ForeignKey
±± $
(
±±$ %
name
≤≤ 
:
≤≤ 
$str
≤≤ B
,
≤≤B C
column
≥≥ 
:
≥≥ 
x
≥≥  !
=>
≥≥" $
x
≥≥% &
.
≥≥& '
PedidoId
≥≥' /
,
≥≥/ 0
principalTable
¥¥ &
:
¥¥& '
$str
¥¥( 1
,
¥¥1 2
principalColumn
µµ '
:
µµ' (
$str
µµ) 3
)
µµ3 4
;
µµ4 5
}
∂∂ 
)
∂∂ 
;
∂∂ 
migrationBuilder
∏∏ 
.
∏∏ 
CreateIndex
∏∏ (
(
∏∏( )
name
ππ 
:
ππ 
$str
ππ 2
,
ππ2 3
table
∫∫ 
:
∫∫ 
$str
∫∫ )
,
∫∫) *
column
ªª 
:
ªª 
$str
ªª  
)
ªª  !
;
ªª! "
migrationBuilder
ΩΩ 
.
ΩΩ 
CreateIndex
ΩΩ (
(
ΩΩ( )
name
ææ 
:
ææ 
$str
ææ %
,
ææ% &
table
øø 
:
øø 
$str
øø $
,
øø$ %
column
¿¿ 
:
¿¿ 
$str
¿¿ (
,
¿¿( )
unique
¡¡ 
:
¡¡ 
true
¡¡ 
)
¡¡ 
;
¡¡ 
migrationBuilder
√√ 
.
√√ 
CreateIndex
√√ (
(
√√( )
name
ƒƒ 
:
ƒƒ 
$str
ƒƒ 2
,
ƒƒ2 3
table
≈≈ 
:
≈≈ 
$str
≈≈ )
,
≈≈) *
column
∆∆ 
:
∆∆ 
$str
∆∆  
)
∆∆  !
;
∆∆! "
migrationBuilder
»» 
.
»» 
CreateIndex
»» (
(
»»( )
name
…… 
:
…… 
$str
…… 2
,
……2 3
table
   
:
   
$str
   )
,
  ) *
column
ÀÀ 
:
ÀÀ 
$str
ÀÀ  
)
ÀÀ  !
;
ÀÀ! "
migrationBuilder
ÕÕ 
.
ÕÕ 
CreateIndex
ÕÕ (
(
ÕÕ( )
name
ŒŒ 
:
ŒŒ 
$str
ŒŒ 1
,
ŒŒ1 2
table
œœ 
:
œœ 
$str
œœ (
,
œœ( )
column
–– 
:
–– 
$str
––  
)
––  !
;
––! "
migrationBuilder
““ 
.
““ 
CreateIndex
““ (
(
““( )
name
”” 
:
”” 
$str
”” "
,
””" #
table
‘‘ 
:
‘‘ 
$str
‘‘ $
,
‘‘$ %
column
’’ 
:
’’ 
$str
’’ )
)
’’) *
;
’’* +
migrationBuilder
◊◊ 
.
◊◊ 
CreateIndex
◊◊ (
(
◊◊( )
name
ÿÿ 
:
ÿÿ 
$str
ÿÿ %
,
ÿÿ% &
table
ŸŸ 
:
ŸŸ 
$str
ŸŸ $
,
ŸŸ$ %
column
⁄⁄ 
:
⁄⁄ 
$str
⁄⁄ ,
,
⁄⁄, -
unique
€€ 
:
€€ 
true
€€ 
)
€€ 
;
€€ 
migrationBuilder
›› 
.
›› 
CreateIndex
›› (
(
››( )
name
ﬁﬁ 
:
ﬁﬁ 
$str
ﬁﬁ ,
,
ﬁﬁ, -
table
ﬂﬂ 
:
ﬂﬂ 
$str
ﬂﬂ  
,
ﬂﬂ  !
column
‡‡ 
:
‡‡ 
$str
‡‡ #
,
‡‡# $
unique
·· 
:
·· 
true
·· 
)
·· 
;
·· 
migrationBuilder
„„ 
.
„„ 
CreateIndex
„„ (
(
„„( )
name
‰‰ 
:
‰‰ 
$str
‰‰ 5
,
‰‰5 6
table
ÂÂ 
:
ÂÂ 
$str
ÂÂ !
,
ÂÂ! "
column
ÊÊ 
:
ÊÊ 
$str
ÊÊ +
,
ÊÊ+ ,
unique
ÁÁ 
:
ÁÁ 
true
ÁÁ 
)
ÁÁ 
;
ÁÁ 
migrationBuilder
ÈÈ 
.
ÈÈ 
CreateIndex
ÈÈ (
(
ÈÈ( )
name
ÍÍ 
:
ÍÍ 
$str
ÍÍ 3
,
ÍÍ3 4
table
ÎÎ 
:
ÎÎ 
$str
ÎÎ '
,
ÎÎ' (
column
ÏÏ 
:
ÏÏ 
$str
ÏÏ #
)
ÏÏ# $
;
ÏÏ$ %
migrationBuilder
ÓÓ 
.
ÓÓ 
CreateIndex
ÓÓ (
(
ÓÓ( )
name
ÔÔ 
:
ÔÔ 
$str
ÔÔ 4
,
ÔÔ4 5
table
 
:
 
$str
 '
,
' (
column
ÒÒ 
:
ÒÒ 
$str
ÒÒ $
)
ÒÒ$ %
;
ÒÒ% &
migrationBuilder
ÛÛ 
.
ÛÛ 
CreateIndex
ÛÛ (
(
ÛÛ( )
name
ÙÙ 
:
ÙÙ 
$str
ÙÙ 2
,
ÙÙ2 3
table
ıı 
:
ıı 
$str
ıı '
,
ıı' (
column
ˆˆ 
:
ˆˆ 
$str
ˆˆ "
)
ˆˆ" #
;
ˆˆ# $
migrationBuilder
¯¯ 
.
¯¯ 
CreateIndex
¯¯ (
(
¯¯( )
name
˘˘ 
:
˘˘ 
$str
˘˘ 4
,
˘˘4 5
table
˙˙ 
:
˙˙ 
$str
˙˙ '
,
˙˙' (
column
˚˚ 
:
˚˚ 
$str
˚˚ $
)
˚˚$ %
;
˚˚% &
migrationBuilder
˝˝ 
.
˝˝ 
CreateIndex
˝˝ (
(
˝˝( )
name
˛˛ 
:
˛˛ 
$str
˛˛ 2
,
˛˛2 3
table
ˇˇ 
:
ˇˇ 
$str
ˇˇ '
,
ˇˇ' (
column
ÄÄ 
:
ÄÄ 
$str
ÄÄ "
)
ÄÄ" #
;
ÄÄ# $
migrationBuilder
ÇÇ 
.
ÇÇ 
CreateIndex
ÇÇ (
(
ÇÇ( )
name
ÉÉ 
:
ÉÉ 
$str
ÉÉ 3
,
ÉÉ3 4
table
ÑÑ 
:
ÑÑ 
$str
ÑÑ '
,
ÑÑ' (
column
ÖÖ 
:
ÖÖ 
$str
ÖÖ #
)
ÖÖ# $
;
ÖÖ$ %
migrationBuilder
áá 
.
áá 
CreateIndex
áá (
(
áá( )
name
àà 
:
àà 
$str
àà ,
,
àà, -
table
ââ 
:
ââ 
$str
ââ  
,
ââ  !
column
ää 
:
ää 
$str
ää #
)
ää# $
;
ää$ %
migrationBuilder
åå 
.
åå 
CreateIndex
åå (
(
åå( )
name
çç 
:
çç 
$str
çç 0
,
çç0 1
table
éé 
:
éé 
$str
éé "
,
éé" #
column
èè 
:
èè 
$str
èè %
)
èè% &
;
èè& '
migrationBuilder
ëë 
.
ëë 
CreateIndex
ëë (
(
ëë( )
name
íí 
:
íí 
$str
íí 2
,
íí2 3
table
ìì 
:
ìì 
$str
ìì &
,
ìì& '
column
îî 
:
îî 
$str
îî #
)
îî# $
;
îî$ %
migrationBuilder
ññ 
.
ññ 
CreateIndex
ññ (
(
ññ( )
name
óó 
:
óó 
$str
óó 9
,
óó9 :
table
òò 
:
òò 
$str
òò %
,
òò% &
column
ôô 
:
ôô 
$str
ôô +
,
ôô+ ,
unique
öö 
:
öö 
true
öö 
)
öö 
;
öö 
}
õõ 	
	protected
ûû 
override
ûû 
void
ûû 
Down
ûû  $
(
ûû$ %
MigrationBuilder
ûû% 5
migrationBuilder
ûû6 F
)
ûûF G
{
üü 	
migrationBuilder
†† 
.
†† 
	DropTable
†† &
(
††& '
name
°° 
:
°° 
$str
°° (
)
°°( )
;
°°) *
migrationBuilder
££ 
.
££ 
	DropTable
££ &
(
££& '
name
§§ 
:
§§ 
$str
§§ (
)
§§( )
;
§§) *
migrationBuilder
¶¶ 
.
¶¶ 
	DropTable
¶¶ &
(
¶¶& '
name
ßß 
:
ßß 
$str
ßß (
)
ßß( )
;
ßß) *
migrationBuilder
©© 
.
©© 
	DropTable
©© &
(
©©& '
name
™™ 
:
™™ 
$str
™™ '
)
™™' (
;
™™( )
migrationBuilder
¨¨ 
.
¨¨ 
	DropTable
¨¨ &
(
¨¨& '
name
≠≠ 
:
≠≠ 
$str
≠≠ (
)
≠≠( )
;
≠≠) *
migrationBuilder
ØØ 
.
ØØ 
	DropTable
ØØ &
(
ØØ& '
name
∞∞ 
:
∞∞ 
$str
∞∞ #
)
∞∞# $
;
∞∞$ %
migrationBuilder
≤≤ 
.
≤≤ 
	DropTable
≤≤ &
(
≤≤& '
name
≥≥ 
:
≥≥ 
$str
≥≥ &
)
≥≥& '
;
≥≥' (
migrationBuilder
µµ 
.
µµ 
	DropTable
µµ &
(
µµ& '
name
∂∂ 
:
∂∂ 
$str
∂∂ &
)
∂∂& '
;
∂∂' (
migrationBuilder
∏∏ 
.
∏∏ 
	DropTable
∏∏ &
(
∏∏& '
name
ππ 
:
ππ 
$str
ππ 
)
ππ 
;
ππ  
migrationBuilder
ªª 
.
ªª 
	DropTable
ªª &
(
ªª& '
name
ºº 
:
ºº 
$str
ºº &
)
ºº& '
;
ºº' (
migrationBuilder
ææ 
.
ææ 
	DropTable
ææ &
(
ææ& '
name
øø 
:
øø 
$str
øø %
)
øø% &
;
øø& '
migrationBuilder
¡¡ 
.
¡¡ 
	DropTable
¡¡ &
(
¡¡& '
name
¬¬ 
:
¬¬ 
$str
¬¬ $
)
¬¬$ %
;
¬¬% &
migrationBuilder
ƒƒ 
.
ƒƒ 
	DropTable
ƒƒ &
(
ƒƒ& '
name
≈≈ 
:
≈≈ 
$str
≈≈ #
)
≈≈# $
;
≈≈$ %
migrationBuilder
«« 
.
«« 
	DropTable
«« &
(
««& '
name
»» 
:
»» 
$str
»» 
)
»»  
;
»»  !
migrationBuilder
   
.
   
	DropTable
   &
(
  & '
name
ÀÀ 
:
ÀÀ 
$str
ÀÀ !
)
ÀÀ! "
;
ÀÀ" #
migrationBuilder
ÕÕ 
.
ÕÕ 
	DropTable
ÕÕ &
(
ÕÕ& '
name
ŒŒ 
:
ŒŒ 
$str
ŒŒ 
)
ŒŒ  
;
ŒŒ  !
migrationBuilder
–– 
.
–– 
	DropTable
–– &
(
––& '
name
—— 
:
—— 
$str
—— "
)
——" #
;
——# $
migrationBuilder
”” 
.
”” 
	DropTable
”” &
(
””& '
name
‘‘ 
:
‘‘ 
$str
‘‘  
)
‘‘  !
;
‘‘! "
migrationBuilder
÷÷ 
.
÷÷ 
	DropTable
÷÷ &
(
÷÷& '
name
◊◊ 
:
◊◊ 
$str
◊◊ #
)
◊◊# $
;
◊◊$ %
}
ÿÿ 	
}
ŸŸ 
}⁄⁄ Ì,
;C:\Users\ACER\Desktop\GRINPLAS\Data\ApplicationDbContext.cs
	namespace 	
GRINPLAS
 
. 
Data 
; 
public 
class  
ApplicationDbContext !
:" #
IdentityDbContext$ 5
<5 6
ApplicationUser6 E
>E F
{ 
public		 
 
ApplicationDbContext		 
(		  
DbContextOptions		  0
<		0 1 
ApplicationDbContext		1 E
>		E F
options		G N
)		N O
:

 	
base


 
(

 
options

 
)

 
{ 
} 
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
	Categoria! *
>* +

Categorias, 6
{7 8
get9 <
;< =
set> A
;A B
}C D
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Cliente! (
>( )
Clientes* 2
{3 4
get5 8
;8 9
set: =
;= >
}? @
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
DetallePedido! .
>. /
DetallePedidos0 >
{? @
getA D
;D E
setF I
;I J
}K L
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Pedido! '
>' (
Pedidos) 0
{1 2
get3 6
;6 7
set8 ;
;; <
}= >
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Producto! )
>) *
	Productos+ 4
{5 6
get7 :
;: ;
set< ?
;? @
}A B
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Carrito! (
>( )
Carrito* 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
DetalleCarrito! /
>/ 0
DetalleCarrito1 ?
{@ A
getB E
;E F
setG J
;J K
}L M
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Trabajadores! -
>- .
Trabajadores/ ;
{< =
get> A
;A B
setC F
;F G
}H I
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Gasto! &
>& '
Gastos( .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Notificacion! -
>- .
Notificaciones/ =
{> ?
get@ C
;C D
setE H
;H I
}J K
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Reclamaciones! .
>. /
Reclamaciones0 =
{> ?
get@ C
;C D
setE H
;H I
}J K
public 

DbSet 
< 
GRINPLAS 
. 
Models  
.  !
Comentarios! ,
>, -
Comentarios. 9
{: ;
get< ?
;? @
setA D
;D E
}F G
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{ 
base 
. 
OnModelCreating 
( 
modelBuilder )
)) *
;* +
modelBuilder   
.   
Entity   
<   
ApplicationUser   +
>  + ,
(  , -
)  - .
.!! 
HasOne!! 
(!! 
u!! 
=>!! 
u!! 
.!! 

Trabajador!! %
)!!% &
."" 
WithOne"" 
("" 
t"" 
=>"" 
t"" 
."" 
User""  
)""  !
.## 
HasForeignKey## 
<## 
Trabajadores## '
>##' (
(##( )
t##) *
=>##+ -
t##. /
.##/ 0
ApplicationUserId##0 A
)##A B
.$$ 
OnDelete$$ 
($$ 
DeleteBehavior$$ $
.$$$ %
Cascade$$% ,
)$$, -
;$$- .
base%% 
.%% 
OnModelCreating%% 
(%% 
modelBuilder%% )
)%%) *
;%%* +
modelBuilder'' 
.'' 
Entity'' 
<'' 
Cliente'' #
>''# $
(''$ %
)''% &
.(( 
Property(( 
((( 
c(( 
=>(( 
c(( 
.(( 
FecCre(( #
)((# $
.)) 
HasColumnType)) 
()) 
$str)) 8
)))8 9
;))9 :
}** 
}++ ¸
@C:\Users\ACER\Desktop\GRINPLAS\Controllers\VendedorController.cs
	namespace		 	
GRINPLAS		
 
.		 
Controllers		 
{

 
public 

class 
VendedorController #
:$ %

Controller& 0
{ 
private 
readonly 
ILogger  
<  !
VendedorController! 3
>3 4
_logger5 <
;< =
public 
VendedorController !
(! "
ILogger" )
<) *
VendedorController* <
>< =
logger> D
)D E
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
InicioG $
($ %
)% &
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public 
IActionResult 
Error "
(" #
)# $
{ 	
return 
View 
( 
$str  
)  !
;! "
} 	
} 
}   ä≤
DC:\Users\ACER\Desktop\GRINPLAS\Controllers\TrabajadoresController.cs
	namespace

 	
GRINPLAS


 
.

 
Controllers

 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class "
TrabajadoresController '
:( )

Controller* 4
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
private 
readonly 
ILogger  
<  !"
TrabajadoresController! 7
>7 8
_logger9 @
;@ A
public "
TrabajadoresController %
(% & 
ApplicationDbContext  
context! (
,( )
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
RoleManager 
< 
IdentityRole $
>$ %
roleManager& 1
,1 2
ILogger 
< "
TrabajadoresController *
>* +
logger, 2
)2 3
{ 	
_context 
= 
context 
; 
_userManager 
= 
userManager &
;& '
_roleManager 
= 
roleManager &
;& '
_logger 
= 
logger 
; 
} 	
public   
async   
Task   
<   
IActionResult   '
>  ' (
Index  ) .
(  . /
)  / 0
{!! 	
return"" 
View"" 
("" 
await"" 
_context"" &
.""& '
Trabajadores""' 3
.""3 4
ToListAsync""4 ?
(""? @
)""@ A
)""A B
;""B C
}## 	
public%% 
IActionResult%% 
Create%% #
(%%# $
)%%$ %
=>%%& (
View%%) -
(%%- .
new%%. 1
TrabajadorViewModel%%2 E
(%%E F
)%%F G
)%%G H
;%%H I
['' 	
HttpPost''	 
]'' 
[(( $
ValidateAntiForgeryToken(( 
](( 
public)) 
async)) 
Task)) 
<)) 
IActionResult)) 
>))  
Create))! '
())' (
TrabajadorViewModel))( ;
model))< A
)))A B
{** 
if++ 
(++ 
!++ 	

ModelState++	 
.++ 
IsValid++ 
)++ 
return++ #
View++$ (
(++( )
model++) .
)++. /
;++/ 0
try-- 
{.. 
ApplicationUser// 
user// 
=// 
null// #
;//# $
string00 
email00 
=00 
null00 
;00 
string11 
password11 
=11 
null11 
;11 
if44 

(44 
model44 
.44 
PosicionLaboral44 !
==44" $
$str44% /
)44/ 0
{55 	
email66 
=66 
$"66 
$str66 
{66 
Guid66 
.66  
NewGuid66  '
(66' (
)66( )
.66) *
ToString66* 2
(662 3
$str663 6
)666 7
[667 8
..668 :
$num66: ;
]66; <
}66< =
$str66= J
"66J K
;66K L
password77 
=77 #
GenerarContrasenaValida77 .
(77. /
)77/ 0
;770 1
user99 
=99 
new99 
ApplicationUser99 &
{:: 
UserName;; 
=;; 
email;;  
,;;  !
Email<< 
=<< 
email<< 
,<< 
EmailConfirmed== 
===  
true==! %
}>> 
;>> 
var@@ 
result@@ 
=@@ 
await@@ 
_userManager@@ +
.@@+ ,
CreateAsync@@, 7
(@@7 8
user@@8 <
,@@< =
password@@> F
)@@F G
;@@G H
ifAA 
(AA 
!AA 
resultAA 
.AA 
	SucceededAA !
)AA! "
{BB 
resultCC 
.CC 
ErrorsCC 
.CC 
ToListCC $
(CC$ %
)CC% &
.CC& '
ForEachCC' .
(CC. /
eCC/ 0
=>CC1 3

ModelStateCC4 >
.CC> ?
AddModelErrorCC? L
(CCL M
$strCCM O
,CCO P
eCCQ R
.CCR S
DescriptionCCS ^
)CC^ _
)CC_ `
;CC` a
returnDD 
ViewDD 
(DD 
modelDD !
)DD! "
;DD" #
}EE 
}FF 	
varHH 

trabajadorHH 
=HH 
newHH 
TrabajadoresHH )
{II 	
NombreJJ 
=JJ 
modelJJ 
.JJ 
NombreJJ !
,JJ! "
	ApellidosKK 
=KK 
modelKK 
.KK 
	ApellidosKK '
,KK' (
TelefonoLL 
=LL 
modelLL 
.LL 
TelefonoLL %
,LL% &
DNIMM 
=MM 
modelMM 
.MM 
DNIMM 
,MM 
PosicionLaboralNN 
=NN 
modelNN #
.NN# $
PosicionLaboralNN$ 3
,NN3 4
SueldoOO 
=OO 
modelOO 
.OO 
SueldoOO !
,OO! "
ApplicationUserIdPP 
=PP 
userPP  $
?PP$ %
.PP% &
IdPP& (
}QQ 	
;QQ	 

_contextSS 
.SS 
AddSS 
(SS 

trabajadorSS 
)SS  
;SS  !
awaitTT 
_contextTT 
.TT 
SaveChangesAsyncTT '
(TT' (
)TT( )
;TT) *
ifVV 

(VV 
userVV 
!=VV 
nullVV 
)VV 
{WW 	
userXX 
.XX 

TrabajadorXX 
=XX 

trabajadorXX (
;XX( )
awaitYY 
_userManagerYY 
.YY 
UpdateAsyncYY *
(YY* +
userYY+ /
)YY/ 0
;YY0 1
awaitZZ 
_userManagerZZ 
.ZZ 
AddToRoleAsyncZZ -
(ZZ- .
userZZ. 2
,ZZ2 3
modelZZ4 9
.ZZ9 :
PosicionLaboralZZ: I
)ZZI J
;ZZJ K
return]] 
Json]] 
(]] 
new]] 
{]] 
success^^ 
=^^ 
true^^ 
,^^ 

isVendedor__ 
=__ 
true__ !
,__! "
email`` 
=`` 
email`` 
,`` 
passwordaa 
=aa 
passwordaa #
}bb 
)bb 
;bb 
}cc 	
returnff 
Jsonff 
(ff 
newff 
{ff 
successgg 
=gg 
truegg 
,gg 

isVendedorhh 
=hh 
falsehh 
}ii 	
)ii	 

;ii
 
}jj 
catchkk 	
(kk
 
	Exceptionkk 
exkk 
)kk 
{ll 
_loggermm 
.mm 
LogErrormm 
(mm 
exmm 
,mm 
$strmm 8
)mm8 9
;mm9 :
returnnn 
Jsonnn 
(nn 
newnn 
{nn 
successoo 
=oo 
falseoo 
,oo 
messagepp 
=pp 
$strpp 4
}qq 	
)qq	 

;qq
 
}rr 
}ss 
publicuu 
IActionResultuu 
Credencialesuu )
(uu) *
stringuu* 0
emailuu1 6
,uu6 7
stringuu8 >
passworduu? G
)uuG H
{vv 	
ViewBagww 
.ww 
Emailww 
=ww 
emailww !
;ww! "
ViewBagxx 
.xx 
Passwordxx 
=xx 
passwordxx '
;xx' (
returnyy 
Viewyy 
(yy 
)yy 
;yy 
}zz 	
[|| 	
HttpGet||	 
]|| 
public}} 
async}} 
Task}} 
<}} 
IActionResult}} '
>}}' (
GetTrabajadores}}) 8
(}}8 9
)}}9 :
{~~ 	
var 
trabajadores 
= 
await $
_context% -
.- .
Trabajadores. :
.
ÄÄ 
Select
ÄÄ 
(
ÄÄ 
t
ÄÄ 
=>
ÄÄ 
new
ÄÄ  
{
ÄÄ! "
idTrabajador
ÅÅ  
=
ÅÅ! "
t
ÅÅ# $
.
ÅÅ$ %
IdTrabajador
ÅÅ% 1
,
ÅÅ1 2
nombre
ÇÇ 
=
ÇÇ 
t
ÇÇ 
.
ÇÇ 
Nombre
ÇÇ %
,
ÇÇ% &
	apellidos
ÉÉ 
=
ÉÉ 
t
ÉÉ  !
.
ÉÉ! "
	Apellidos
ÉÉ" +
,
ÉÉ+ ,
telefono
ÑÑ 
=
ÑÑ 
t
ÑÑ  
.
ÑÑ  !
Telefono
ÑÑ! )
,
ÑÑ) *
dni
ÖÖ 
=
ÖÖ 
t
ÖÖ 
.
ÖÖ 
DNI
ÖÖ 
,
ÖÖ  
posicionLaboral
ÜÜ #
=
ÜÜ$ %
t
ÜÜ& '
.
ÜÜ' (
PosicionLaboral
ÜÜ( 7
,
ÜÜ7 8
sueldo
áá 
=
áá 
t
áá 
.
áá 
Sueldo
áá %
}
àà 
)
àà 
.
ââ 
ToListAsync
ââ 
(
ââ 
)
ââ 
;
ââ 
return
ãã 
Json
ãã 
(
ãã 
new
ãã 
{
ãã 
data
åå 
=
åå 
trabajadores
åå #
}
çç 
)
çç 
;
çç 
}
éé 	
[
êê 	
HttpPost
êê	 
]
êê 
[
ëë 	&
ValidateAntiForgeryToken
ëë	 !
]
ëë! "
public
íí 
async
íí 
Task
íí 
<
íí 
IActionResult
íí '
>
íí' (
Edit
íí) -
(
íí- .!
TrabajadorViewModel
íí. A
model
ííB G
)
ííG H
{
ìì 	
try
îî 
{
ïï 
if
ññ 
(
ññ 
!
ññ 

ModelState
ññ 
.
ññ  
IsValid
ññ  '
)
ññ' (
{
óó 
return
òò 
Json
òò 
(
òò  
new
òò  #
{
òò$ %
success
òò& -
=
òò. /
false
òò0 5
,
òò5 6
message
òò7 >
=
òò? @
$str
òòA R
}
òòS T
)
òòT U
;
òòU V
}
ôô 
var
õõ 

trabajador
õõ 
=
õõ  
await
õõ! &
_context
õõ' /
.
õõ/ 0
Trabajadores
õõ0 <
.
úú 
Include
úú 
(
úú 
t
úú 
=>
úú !
t
úú" #
.
úú# $
User
úú$ (
)
úú( )
.
ùù !
FirstOrDefaultAsync
ùù (
(
ùù( )
t
ùù) *
=>
ùù+ -
t
ùù. /
.
ùù/ 0
IdTrabajador
ùù0 <
==
ùù= ?
model
ùù@ E
.
ùùE F
IdTrabajador
ùùF R
)
ùùR S
;
ùùS T
if
üü 
(
üü 

trabajador
üü 
==
üü !
null
üü" &
)
üü& '
{
†† 
return
°° 
Json
°° 
(
°°  
new
°°  #
{
°°$ %
success
°°& -
=
°°. /
false
°°0 5
,
°°5 6
message
°°7 >
=
°°? @
$str
°°A [
}
°°\ ]
)
°°] ^
;
°°^ _
}
¢¢ 

trabajador
•• 
.
•• 
Nombre
•• !
=
••" #
model
••$ )
.
••) *
Nombre
••* 0
;
••0 1

trabajador
¶¶ 
.
¶¶ 
	Apellidos
¶¶ $
=
¶¶% &
model
¶¶' ,
.
¶¶, -
	Apellidos
¶¶- 6
;
¶¶6 7

trabajador
ßß 
.
ßß 
Telefono
ßß #
=
ßß$ %
model
ßß& +
.
ßß+ ,
Telefono
ßß, 4
;
ßß4 5

trabajador
®® 
.
®® 
DNI
®® 
=
®®  
model
®®! &
.
®®& '
DNI
®®' *
;
®®* +

trabajador
©© 
.
©© 
PosicionLaboral
©© *
=
©©+ ,
model
©©- 2
.
©©2 3
PosicionLaboral
©©3 B
;
©©B C

trabajador
™™ 
.
™™ 
Sueldo
™™ !
=
™™" #
model
™™$ )
.
™™) *
Sueldo
™™* 0
;
™™0 1
_context
¨¨ 
.
¨¨ 
Update
¨¨ 
(
¨¨  

trabajador
¨¨  *
)
¨¨* +
;
¨¨+ ,
await
≠≠ 
_context
≠≠ 
.
≠≠ 
SaveChangesAsync
≠≠ /
(
≠≠/ 0
)
≠≠0 1
;
≠≠1 2
if
∞∞ 
(
∞∞ 

trabajador
∞∞ 
.
∞∞ 
User
∞∞ #
!=
∞∞$ &
null
∞∞' +
)
∞∞+ ,
{
±± 
var
≤≤ 
currentRoles
≤≤ $
=
≤≤% &
await
≤≤' ,
_userManager
≤≤- 9
.
≤≤9 :
GetRolesAsync
≤≤: G
(
≤≤G H

trabajador
≤≤H R
.
≤≤R S
User
≤≤S W
)
≤≤W X
;
≤≤X Y
var
≥≥ #
rolesConFuncionalidad
≥≥ -
=
≥≥. /
new
≥≥0 3
[
≥≥3 4
]
≥≥4 5
{
≥≥6 7
$str
≥≥8 H
,
≥≥H I
$str
≥≥J T
}
≥≥U V
;
≥≥V W
if
∂∂ 
(
∂∂ #
rolesConFuncionalidad
∂∂ -
.
∂∂- .
Contains
∂∂. 6
(
∂∂6 7
model
∂∂7 <
.
∂∂< =
PosicionLaboral
∂∂= L
)
∂∂L M
)
∂∂M N
{
∑∑ 
var
ππ 
rolesToRemove
ππ )
=
ππ* +
currentRoles
ππ, 8
.
ππ8 9
Where
ππ9 >
(
ππ> ?
r
ππ? @
=>
ππA C#
rolesConFuncionalidad
ππD Y
.
ππY Z
Contains
ππZ b
(
ππb c
r
ππc d
)
ππd e
)
ππe f
.
ππf g
ToList
ππg m
(
ππm n
)
ππn o
;
ππo p
if
∫∫ 
(
∫∫ 
rolesToRemove
∫∫ )
.
∫∫) *
Any
∫∫* -
(
∫∫- .
)
∫∫. /
)
∫∫/ 0
{
ªª 
await
ºº !
_userManager
ºº" .
.
ºº. /"
RemoveFromRolesAsync
ºº/ C
(
ººC D

trabajador
ººD N
.
ººN O
User
ººO S
,
ººS T
rolesToRemove
ººU b
)
ººb c
;
ººc d
}
ΩΩ 
if
¿¿ 
(
¿¿ 
await
¿¿ !
_roleManager
¿¿" .
.
¿¿. /
RoleExistsAsync
¿¿/ >
(
¿¿> ?
model
¿¿? D
.
¿¿D E
PosicionLaboral
¿¿E T
)
¿¿T U
)
¿¿U V
{
¡¡ 
await
¬¬ !
_userManager
¬¬" .
.
¬¬. /
AddToRoleAsync
¬¬/ =
(
¬¬= >

trabajador
¬¬> H
.
¬¬H I
User
¬¬I M
,
¬¬M N
model
¬¬O T
.
¬¬T U
PosicionLaboral
¬¬U d
)
¬¬d e
;
¬¬e f
}
√√ 
}
ƒƒ 
}
≈≈ 
return
«« 
Json
«« 
(
«« 
new
«« 
{
««  !
success
««" )
=
««* +
true
««, 0
,
««0 1
message
««2 9
=
««: ;
$str
««< b
}
««c d
)
««d e
;
««e f
}
»» 
catch
…… 
(
…… 
	Exception
…… 
ex
…… 
)
……  
{
   
_logger
ÀÀ 
.
ÀÀ 
LogError
ÀÀ  
(
ÀÀ  !
ex
ÀÀ! #
,
ÀÀ# $
$str
ÀÀ% A
)
ÀÀA B
;
ÀÀB C
return
ÃÃ 
Json
ÃÃ 
(
ÃÃ 
new
ÃÃ 
{
ÃÃ  !
success
ÃÃ" )
=
ÃÃ* +
false
ÃÃ, 1
,
ÃÃ1 2
message
ÃÃ3 :
=
ÃÃ; <
$str
ÃÃ= Y
}
ÃÃZ [
)
ÃÃ[ \
;
ÃÃ\ ]
}
ÕÕ 
}
ŒŒ 	
private
–– 
string
–– %
GenerarContrasenaValida
–– .
(
––. /
)
––/ 0
{
—— 	
var
““ 
random
““ 
=
““ 
new
““ 
Random
““ #
(
““# $
)
““$ %
;
““% &
var
”” 
password
”” 
=
”” 
new
”” 
[
”” 
]
””  
{
‘‘ 
(
’’ 
char
’’ 
)
’’ 
random
’’ 
.
’’ 
Next
’’ !
(
’’! "
$num
’’" $
,
’’$ %
$num
’’& (
)
’’( )
,
’’) *
(
÷÷ 
char
÷÷ 
)
÷÷ 
random
÷÷ 
.
÷÷ 
Next
÷÷ !
(
÷÷! "
$num
÷÷" $
,
÷÷$ %
$num
÷÷& )
)
÷÷) *
,
÷÷* +
(
◊◊ 
char
◊◊ 
)
◊◊ 
random
◊◊ 
.
◊◊ 
Next
◊◊ !
(
◊◊! "
$num
◊◊" $
,
◊◊$ %
$num
◊◊& (
)
◊◊( )
,
◊◊) *
(
ÿÿ 
char
ÿÿ 
)
ÿÿ 
random
ÿÿ 
.
ÿÿ 
Next
ÿÿ !
(
ÿÿ! "
$num
ÿÿ" $
,
ÿÿ$ %
$num
ÿÿ& (
)
ÿÿ( )
,
ÿÿ) *
}
ŸŸ 
.
ŸŸ 
Concat
ŸŸ 
(
ŸŸ 

Enumerable
ŸŸ 
.
ŸŸ  
Repeat
ŸŸ  &
(
ŸŸ& '
$num
ŸŸ' (
,
ŸŸ( )
$num
ŸŸ* +
)
ŸŸ+ ,
.
ŸŸ, -
Select
ŸŸ- 3
(
ŸŸ3 4
_
ŸŸ4 5
=>
ŸŸ6 8
(
ŸŸ9 :
char
ŸŸ: >
)
ŸŸ> ?
random
ŸŸ? E
.
ŸŸE F
Next
ŸŸF J
(
ŸŸJ K
$num
ŸŸK M
,
ŸŸM N
$num
ŸŸO R
)
ŸŸR S
)
ŸŸS T
)
ŸŸT U
.
⁄⁄ 
OrderBy
⁄⁄ 
(
⁄⁄ 
c
⁄⁄ 
=>
⁄⁄ 
random
⁄⁄ !
.
⁄⁄! "
Next
⁄⁄" &
(
⁄⁄& '
)
⁄⁄' (
)
⁄⁄( )
.
€€ 
ToArray
€€ 
(
€€ 
)
€€ 
;
€€ 
return
›› 
new
›› 
string
›› 
(
›› 
password
›› &
)
››& '
;
››' (
}
ﬁﬁ 	
[
‡‡ 	
HttpPost
‡‡	 
]
‡‡ 
[
·· 	&
ValidateAntiForgeryToken
··	 !
]
··! "
public
‚‚ 
async
‚‚ 
Task
‚‚ 
<
‚‚ 
IActionResult
‚‚ '
>
‚‚' (
Delete
‚‚) /
(
‚‚/ 0
int
‚‚0 3
id
‚‚4 6
)
‚‚6 7
{
„„ 	
try
‰‰ 
{
ÂÂ 
var
ÊÊ 

trabajador
ÊÊ 
=
ÊÊ  
await
ÊÊ! &
_context
ÊÊ' /
.
ÊÊ/ 0
Trabajadores
ÊÊ0 <
.
ÁÁ 
Include
ÁÁ 
(
ÁÁ 
t
ÁÁ 
=>
ÁÁ !
t
ÁÁ" #
.
ÁÁ# $
User
ÁÁ$ (
)
ÁÁ( )
.
ËË !
FirstOrDefaultAsync
ËË (
(
ËË( )
t
ËË) *
=>
ËË+ -
t
ËË. /
.
ËË/ 0
IdTrabajador
ËË0 <
==
ËË= ?
id
ËË@ B
)
ËËB C
;
ËËC D
if
ÍÍ 
(
ÍÍ 

trabajador
ÍÍ 
==
ÍÍ !
null
ÍÍ" &
)
ÍÍ& '
{
ÎÎ 
return
ÏÏ 
Json
ÏÏ 
(
ÏÏ  
new
ÏÏ  #
{
ÏÏ$ %
success
ÏÏ& -
=
ÏÏ. /
false
ÏÏ0 5
,
ÏÏ5 6
message
ÏÏ7 >
=
ÏÏ? @
$str
ÏÏA [
}
ÏÏ\ ]
)
ÏÏ] ^
;
ÏÏ^ _
}
ÌÌ 
_context
ÔÔ 
.
ÔÔ 
Trabajadores
ÔÔ %
.
ÔÔ% &
Remove
ÔÔ& ,
(
ÔÔ, -

trabajador
ÔÔ- 7
)
ÔÔ7 8
;
ÔÔ8 9
await
 
_context
 
.
 
SaveChangesAsync
 /
(
/ 0
)
0 1
;
1 2
if
ÚÚ 
(
ÚÚ 

trabajador
ÚÚ 
.
ÚÚ 
User
ÚÚ #
!=
ÚÚ$ &
null
ÚÚ' +
)
ÚÚ+ ,
{
ÛÛ 
await
ÙÙ 
_userManager
ÙÙ &
.
ÙÙ& '
DeleteAsync
ÙÙ' 2
(
ÙÙ2 3

trabajador
ÙÙ3 =
.
ÙÙ= >
User
ÙÙ> B
)
ÙÙB C
;
ÙÙC D
}
ıı 
return
˜˜ 
Json
˜˜ 
(
˜˜ 
new
˜˜ 
{
˜˜  !
success
˜˜" )
=
˜˜* +
true
˜˜, 0
}
˜˜1 2
)
˜˜2 3
;
˜˜3 4
}
¯¯ 
catch
˘˘ 
(
˘˘ 
	Exception
˘˘ 
ex
˘˘ 
)
˘˘  
{
˙˙ 
_logger
˚˚ 
.
˚˚ 
LogError
˚˚  
(
˚˚  !
ex
˚˚! #
,
˚˚# $
$str
˚˚% C
)
˚˚C D
;
˚˚D E
return
¸¸ 
Json
¸¸ 
(
¸¸ 
new
¸¸ 
{
¸¸  !
success
¸¸" )
=
¸¸* +
false
¸¸, 1
,
¸¸1 2
message
¸¸3 :
=
¸¸; <
ex
¸¸= ?
.
¸¸? @
Message
¸¸@ G
}
¸¸H I
)
¸¸I J
;
¸¸J K
}
˝˝ 
}
˛˛ 	
private
ÄÄ 
bool
ÄÄ 
TrabajadorExists
ÄÄ %
(
ÄÄ% &
int
ÄÄ& )
id
ÄÄ* ,
)
ÄÄ, -
{
ÅÅ 	
return
ÇÇ 
_context
ÇÇ 
.
ÇÇ 
Trabajadores
ÇÇ (
.
ÇÇ( )
Any
ÇÇ) ,
(
ÇÇ, -
e
ÇÇ- .
=>
ÇÇ/ 1
e
ÇÇ2 3
.
ÇÇ3 4
IdTrabajador
ÇÇ4 @
==
ÇÇA C
id
ÇÇD F
)
ÇÇF G
;
ÇÇG H
}
ÉÉ 	
}
ÑÑ 
}ÖÖ œN
EC:\Users\ACER\Desktop\GRINPLAS\Controllers\ReclamacionesController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 
class	 #
ReclamacionesController &
:' (

Controller) 3
{ 
private 
readonly  
ApplicationDbContext )
_context* 2
;2 3
public 
#
ReclamacionesController "
(" # 
ApplicationDbContext# 7
context8 ?
)? @
{ 
_context 
= 
context 
; 
} 
public 

IActionResult 
Cliente  
(  !
)! "
{ 
return 
View 
( 
new 
Reclamaciones #
(# $
)$ %
)% &
;& '
} 
[   
HttpPost   
]   
public!! 

IActionResult!! 
CrearReclamo!! %
(!!% &
Reclamaciones!!& 3
model!!4 9
)!!9 :
{"" 
if## 

(## 

ModelState## 
.## 
IsValid## 
)## 
{$$ 	
var&& 
userId&& 
=&& 
User&& 
.&& 
FindFirstValue&& ,
(&&, -

ClaimTypes&&- 7
.&&7 8
NameIdentifier&&8 F
)&&F G
;&&G H
var'' 
cliente'' 
='' 
_context'' "
.''" #
Clientes''# +
.''+ ,
FirstOrDefault'', :
('': ;
c''; <
=>''= ?
c''@ A
.''A B
ApplicationUserId''B S
==''T V
userId''W ]
)''] ^
;''^ _
if)) 
()) 
cliente)) 
==)) 
null)) 
)))  
{** 

ModelState++ 
.++ 
AddModelError++ (
(++( )
$str++) +
,+++ ,
$str++- I
)++I J
;++J K
return,, 
View,, 
(,, 
$str,, %
,,,% &
model,,' ,
),,, -
;,,- .
}-- 
model// 
.// 
	ClienteId// 
=// 
cliente// %
.//% &
	ClienteId//& /
;/// 0
model00 
.00 
Nombre00 
=00 
cliente00 "
.00" #
NombreEmpresa00# 0
;000 1
model11 
.11 
Correo11 
=11 
User11 
.11  
FindFirstValue11  .
(11. /

ClaimTypes11/ 9
.119 :
Email11: ?
)11? @
;11@ A
model22 
.22 
Telefono22 
=22 
cliente22 $
.22$ %
Telefono22% -
;22- .
_context44 
.44 
Reclamaciones44 "
.44" #
Add44# &
(44& '
model44' ,
)44, -
;44- .
_context55 
.55 
SaveChanges55  
(55  !
)55! "
;55" #
TempData77 
[77 
$str77 
]77 
=77  !
$str77" D
;77D E
return88 
RedirectToAction88 #
(88# $
$str88$ -
)88- .
;88. /
}99 	
return;; 
View;; 
(;; 
$str;; 
,;; 
model;; $
);;$ %
;;;% &
}<< 
public>> 

async>> 
Task>> 
<>> 
IActionResult>> #
>>># $
HistorialCliente>>% 5
(>>5 6
)>>6 7
{?? 
var@@ 	
userId@@
 
=@@ 
User@@ 
.@@ 
FindFirstValue@@ &
(@@& '

ClaimTypes@@' 1
.@@1 2
NameIdentifier@@2 @
)@@@ A
;@@A B
ifAA 
(AA	 

stringAA
 
.AA 
IsNullOrEmptyAA 
(AA 
userIdAA %
)AA% &
)AA& '
{BB 
returnCC 
RedirectToActionCC 
(CC  
$strCC  '
,CC' (
$strCC) 2
)CC2 3
;CC3 4
}DD 
varFF 	
clienteFF
 
=FF 
awaitFF 
_contextFF "
.FF" #
ClientesFF# +
.GG
 
FirstOrDefaultAsyncGG 
(GG 
cGG  
=>GG! #
cGG$ %
.GG% &
ApplicationUserIdGG& 7
==GG8 :
userIdGG; A
)GGA B
;GGB C
ifII 
(II	 

clienteII
 
==II 
nullII 
)II 
{JJ 
returnKK 
NotFoundKK 
(KK 
)KK 
;KK 
}LL 
varNN 	
reclamosNN
 
=NN 
awaitNN 
_contextNN #
.NN# $
ReclamacionesNN$ 1
.OO
 
WhereOO 
(OO 
rOO 
=>OO 
rOO 
.OO 
	ClienteIdOO !
==OO" $
clienteOO% ,
.OO, -
	ClienteIdOO- 6
)OO6 7
.PP
 
OrderByDescendingPP 
(PP 
rPP 
=>PP !
rPP" #
.PP# $
FechaCreacionPP$ 1
)PP1 2
.QQ
 
ToListAsyncQQ 
(QQ 
)QQ 
;QQ 
returnSS 
ViewSS 
(SS 
reclamosSS 
??SS 
newSS !
ListSS" &
<SS& '
ReclamacionesSS' 4
>SS4 5
(SS5 6
)SS6 7
)SS7 8
;SS8 9
}TT 
publicVV 

asyncVV 
TaskVV 
<VV 
IActionResultVV #
>VV# $
AdminVV% *
(VV* +
intVV+ .
pageVV/ 3
=VV4 5
$numVV6 7
,VV7 8
intVV9 <
pageSizeVV= E
=VVF G
$numVVH I
)VVI J
{WW 
varXX 
totalReclamacionesXX 
=XX  
awaitXX! &
_contextXX' /
.XX/ 0
ReclamacionesXX0 =
.XX= >

CountAsyncXX> H
(XXH I
)XXI J
;XXJ K
varYY 
reclamacionesYY 
=YY 
awaitYY !
_contextYY" *
.YY* +
ReclamacionesYY+ 8
.ZZ 
OrderByDescendingZZ 
(ZZ 
rZZ  
=>ZZ! #
rZZ$ %
.ZZ% &
FechaCreacionZZ& 3
)ZZ3 4
.[[ 
Skip[[ 
([[ 
([[ 
page[[ 
-[[ 
$num[[ 
)[[ 
*[[ 
pageSize[[ '
)[[' (
.\\ 
Take\\ 
(\\ 
pageSize\\ 
)\\ 
.]] 
ToListAsync]] 
(]] 
)]] 
;]] 
var__ 
	viewModel__ 
=__ 
new__  
ReclamacionViewModel__ 0
{`` 	
Reclamacionesaa 
=aa 
reclamacionesaa )
,aa) *
CurrentPagebb 
=bb 
pagebb 
,bb 

TotalPagescc 
=cc 
(cc 
intcc 
)cc 
Mathcc "
.cc" #
Ceilingcc# *
(cc* +
totalReclamacionescc+ =
/cc> ?
(cc@ A
doubleccA G
)ccG H
pageSizeccH P
)ccP Q
}dd 	
;dd	 

returnff 
Viewff 
(ff 
	viewModelff 
)ff 
;ff 
}gg 
[ii 
HttpPostii 
]ii 
publicjj 

asyncjj 
Taskjj 
<jj 
IActionResultjj #
>jj# $
CambiarEstadojj% 2
(jj2 3
intjj3 6
idjj7 9
,jj9 :
booljj; ?
estadojj@ F
)jjF G
{kk 
varll 	
reclamoll
 
=ll 
awaitll 
_contextll "
.ll" #
Reclamacionesll# 0
.ll0 1
	FindAsyncll1 :
(ll: ;
idll; =
)ll= >
;ll> ?
ifmm 
(mm	 

reclamomm
 
!=mm 
nullmm 
)mm 
{nn 
reclamooo 
.oo 
Estadooo 
=oo 
estadooo 
;oo  
awaitpp 
_contextpp 
.pp 
SaveChangesAsyncpp '
(pp' (
)pp( )
;pp) *
}qq 
returnrr 
Okrr 
(rr 
)rr 
;rr 
}ss 
[uu 
HttpPostuu 
]uu 
publicvv 

asyncvv 
Taskvv 
<vv 
IActionResultvv #
>vv# $
ResponderReclamovv% 5
(vv5 6
intvv6 9
idvv: <
,vv< =
[vv> ?
FromBodyvv? G
]vvG H
stringvvI O
	respuestavvP Y
)vvY Z
{ww 
varxx 
reclamoxx 
=xx 
awaitxx 
_contextxx $
.xx$ %
Reclamacionesxx% 2
.xx2 3
	FindAsyncxx3 <
(xx< =
idxx= ?
)xx? @
;xx@ A
ifyy 

(yy 
reclamoyy 
!=yy 
nullyy 
)yy 
{zz 	
reclamo{{ 
.{{ 
	Respuesta{{ 
={{ 
	respuesta{{  )
;{{) *
reclamo|| 
.|| 
Estado|| 
=|| 
true|| !
;||! "
await}} 
_context}} 
.}} 
SaveChangesAsync}} +
(}}+ ,
)}}, -
;}}- .
return~~ 
Ok~~ 
(~~ 
)~~ 
;~~ 
} 	
return
ÅÅ 
NotFound
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
}
ÇÇ 
}
ÉÉ 
}ÑÑ ¨«
AC:\Users\ACER\Desktop\GRINPLAS\Controllers\ProductosController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class 
ProductosController $
:% &

Controller' 1
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
?5 6
_userManager7 C
;C D
private 
readonly 
ILogger  
<  !
ProductosController! 4
>4 5
_logger6 =
;= >
[ 	)
ActivatorUtilitiesConstructor	 &
]& '
public   
ProductosController   "
(  " # 
ApplicationDbContext!! 
context!! $
,!!$ %
UserManager"" 
<"" 
ApplicationUser"" #
>""# $
userManager""% 0
,""0 1
ILogger## 
<## 
ProductosController## #
>### $
logger##% +
)##+ ,
{$$ 	
_context%% 
=%% 
context%% 
;%% 
_userManager&& 
=&& 
userManager&& &
;&&& '
_logger'' 
='' 
logger'' 
;'' 
}(( 	
public++ 
ProductosController++ "
(++" # 
ApplicationDbContext,, 
context,, $
,,,$ %
UserManager-- 
<-- 
ApplicationUser-- #
>--# $
userManager--% 0
)--0 1
:.. 	
this..
 
(.. 
context.. 
,.. 
userManager.. #
,..# $

NullLogger..% /
<../ 0
ProductosController..0 C
>..C D
...D E
Instance..E M
)..M N
{// 	
}00 	
[33 	
	Authorize33	 
(33 
Roles33 
=33 
$str33 *
)33* +
]33+ ,
public44 
async44 
Task44 
<44 
IActionResult44 '
>44' (
Administrador44) 6
(446 7
DateTime447 ?
?44? @
fechaInicio44A L
,44L M
DateTime44N V
?44V W
fechaFin44X `
)44` a
{55 	
if66 
(66 
_userManager66 
==66 
null66  $
)66$ %
{77 
return88 
RedirectToPage88 %
(88% &
$str88& =
)88= >
;88> ?
}99 
var:: 
user:: 
=:: 
await:: 
_userManager:: )
.::) *
GetUserAsync::* 6
(::6 7
User::7 ;
)::; <
;::< =
if<< 
(<< 
user<< 
==<< 
null<< 
)<< 
{== 
return>> 
RedirectToPage>> %
(>>% &
$str>>& =
)>>= >
;>>> ?
}?? 
var@@ 
	userRoles@@ 
=@@ 
await@@ !
_userManager@@" .
.@@. /
GetRolesAsync@@/ <
(@@< =
user@@= A
)@@A B
;@@B C
ifBB 
(BB 
!BB 
	userRolesBB 
.BB 
ContainsBB #
(BB# $
$strBB$ 3
)BB3 4
)BB4 5
{CC 
returnDD 
RedirectToPageDD %
(DD% &
$strDD& =
)DD= >
;DD> ?
}EE 
varGG 
	viewModelGG 
=GG 
newGG 
ProductoViewModelGG  1
{HH 
nuevoProductoII 
=II 
newII  #
ProductoII$ ,
(II, -
)II- .
,II. /
	ProductosJJ 
=JJ 
awaitJJ !
_contextJJ" *
.JJ* +
	ProductosJJ+ 4
.JJ4 5
IncludeJJ5 <
(JJ< =
pJJ= >
=>JJ? A
pJJB C
.JJC D
	CategoriaJJD M
)JJM N
.JJN O
ToListAsyncJJO Z
(JJZ [
)JJ[ \
,JJ\ ]

CategoriasKK 
=KK 
awaitKK "
_contextKK# +
.KK+ ,

CategoriasKK, 6
.KK6 7
ToListAsyncKK7 B
(KKB C
)KKC D
,KKD E
}LL 
;LL 
returnQQ 
ViewQQ 
(QQ 
	viewModelQQ !
)QQ! "
;QQ" #
}RR 	
[TT 	
	AuthorizeTT	 
(TT 
RolesTT 
=TT 
$strTT *
)TT* +
]TT+ ,
publicUU 
asyncUU 
TaskUU 
<UU 
IActionResultUU '
>UU' (
BuscarProductosUU) 8
(UU8 9
stringUU9 ?
nombreFiltroUU@ L
,UUL M
intUUN Q
?UUQ R
categoriaFiltroUUS b
)UUb c
{VV 	
ifWW 
(WW 
_userManagerWW 
==WW 
nullWW  $
)WW$ %
{XX 
returnYY 
RedirectToPageYY %
(YY% &
$strYY& =
)YY= >
;YY> ?
}ZZ 
var\\ 
user\\ 
=\\ 
await\\ 
_userManager\\ )
.\\) *
GetUserAsync\\* 6
(\\6 7
User\\7 ;
)\\; <
;\\< =
if^^ 
(^^ 
user^^ 
==^^ 
null^^ 
)^^ 
{__ 
return`` 
RedirectToPage`` %
(``% &
$str``& =
)``= >
;``> ?
}aa 
varcc 
	userRolescc 
=cc 
awaitcc !
_userManagercc" .
.cc. /
GetRolesAsynccc/ <
(cc< =
usercc= A
)ccA B
;ccB C
ifee 
(ee 
!ee 
	userRolesee 
.ee 
Containsee #
(ee# $
$stree$ 3
)ee3 4
)ee4 5
{ff 
returngg 
RedirectToPagegg %
(gg% &
$strgg& =
)gg= >
;gg> ?
}hh 
varjj 
productosQueryjj 
=jj  
_contextjj! )
.jj) *
	Productosjj* 3
.jj3 4
Includejj4 ;
(jj; <
pjj< =
=>jj> @
pjjA B
.jjB C
	CategoriajjC L
)jjL M
.jjM N
AsQueryablejjN Y
(jjY Z
)jjZ [
;jj[ \
ifll 
(ll 
!ll 
stringll 
.ll 
IsNullOrEmptyll %
(ll% &
nombreFiltroll& 2
)ll2 3
)ll3 4
{mm 
productosQuerynn 
=nn  
productosQuerynn! /
.nn/ 0
Wherenn0 5
(nn5 6
pnn6 7
=>nn8 :
pnn; <
.nn< =
Nombrenn= C
.nnC D
ToLowernnD K
(nnK L
)nnL M
.nnM N
ContainsnnN V
(nnV W
nombreFiltronnW c
.nnc d
ToLowernnd k
(nnk l
)nnl m
)nnm n
)nnn o
;nno p
}oo 
ifqq 
(qq 
categoriaFiltroqq 
.qq  
HasValueqq  (
&&qq) +
categoriaFiltroqq, ;
.qq; <
Valueqq< A
!=qqB D
$numqqE F
)qqF G
{rr 
productosQueryss 
=ss  
productosQueryss! /
.ss/ 0
Wheress0 5
(ss5 6
pss6 7
=>ss8 :
pss; <
.ss< =
CategoriaIdss= H
==ssI K
categoriaFiltrossL [
.ss[ \
Valuess\ a
)ssa b
;ssb c
}tt 
varvv 
	viewModelvv 
=vv 
newvv 
ProductoViewModelvv  1
{ww 
nuevoProductoxx 
=xx 
newxx  #
Productoxx$ ,
(xx, -
)xx- .
,xx. /
	Productosyy 
=yy 
awaityy !
productosQueryyy" 0
.yy0 1
ToListAsyncyy1 <
(yy< =
)yy= >
,yy> ?

Categoriaszz 
=zz 
awaitzz "
_contextzz# +
.zz+ ,

Categoriaszz, 6
.zz6 7
ToListAsynczz7 B
(zzB C
)zzC D
,zzD E
}{{ 
;{{ 
ViewData}} 
[}} 
$str}} #
]}}# $
=}}% &
nombreFiltro}}' 3
;}}3 4
ViewData~~ 
[~~ 
$str~~ &
]~~& '
=~~( )
categoriaFiltro~~* 9
;~~9 :
return
ÄÄ 
View
ÄÄ 
(
ÄÄ 
$str
ÄÄ '
,
ÄÄ' (
	viewModel
ÄÄ) 2
)
ÄÄ2 3
;
ÄÄ3 4
}
ÅÅ 	
[
ÑÑ 	
HttpPost
ÑÑ	 
]
ÑÑ 
[
ÖÖ 	&
ValidateAntiForgeryToken
ÖÖ	 !
]
ÖÖ! "
public
ÜÜ 
async
ÜÜ 
Task
ÜÜ 
<
ÜÜ 
IActionResult
ÜÜ '
>
ÜÜ' (
RegistrarProducto
ÜÜ) :
(
ÜÜ: ;
Producto
ÜÜ; C
producto
ÜÜD L
)
ÜÜL M
{
áá 	
if
àà 
(
àà 

ModelState
àà 
.
àà 
IsValid
àà "
)
àà" #
{
ââ 
if
ää 
(
ää 
producto
ää 
.
ää 

ProductoId
ää '
==
ää( *
$num
ää+ ,
)
ää, -
{
ãã 
_context
çç 
.
çç 
Add
çç  
(
çç  !
producto
çç! )
)
çç) *
;
çç* +
}
éé 
else
èè 
{
êê 
_context
íí 
.
íí 
Update
íí #
(
íí# $
producto
íí$ ,
)
íí, -
;
íí- .
}
ìì 
await
ïï 
_context
ïï 
.
ïï 
SaveChangesAsync
ïï /
(
ïï/ 0
)
ïï0 1
;
ïï1 2
TempData
ññ 
[
ññ 
$str
ññ )
]
ññ) *
=
ññ+ ,
$str
ññ- N
;
ññN O
return
óó 
RedirectToAction
óó '
(
óó' (
$str
óó( 7
)
óó7 8
;
óó8 9
}
òò 
var
õõ 
	viewModel
õõ 
=
õõ 
new
õõ 
ProductoViewModel
õõ  1
{
úú 
nuevoProducto
ùù 
=
ùù 
producto
ùù  (
,
ùù( )
	Productos
ûû 
=
ûû 
await
ûû !
_context
ûû" *
.
ûû* +
	Productos
ûû+ 4
.
ûû4 5
Include
ûû5 <
(
ûû< =
p
ûû= >
=>
ûû? A
p
ûûB C
.
ûûC D
	Categoria
ûûD M
)
ûûM N
.
ûûN O
ToListAsync
ûûO Z
(
ûûZ [
)
ûû[ \
,
ûû\ ]

Categorias
üü 
=
üü 
await
üü "
_context
üü# +
.
üü+ ,

Categorias
üü, 6
.
üü6 7
ToListAsync
üü7 B
(
üüB C
)
üüC D
}
†† 
;
†† 
return
¢¢ 
View
¢¢ 
(
¢¢ 
$str
¢¢ '
,
¢¢' (
	viewModel
¢¢) 2
)
¢¢2 3
;
¢¢3 4
}
££ 	
[
ßß 	
HttpPost
ßß	 
]
ßß 
public
®® 
async
®® 
Task
®® 
<
®® 
IActionResult
®® '
>
®®' (
EditarProducto
®®) 7
(
®®7 8
Producto
®®8 @
producto
®®A I
)
®®I J
{
©© 	
if
™™ 
(
™™ 

ModelState
™™ 
.
™™ 
IsValid
™™ "
)
™™" #
{
´´ 
_context
¨¨ 
.
¨¨ 
	Productos
¨¨ "
.
¨¨" #
Update
¨¨# )
(
¨¨) *
producto
¨¨* 2
)
¨¨2 3
;
¨¨3 4
await
≠≠ 
_context
≠≠ 
.
≠≠ 
SaveChangesAsync
≠≠ /
(
≠≠/ 0
)
≠≠0 1
;
≠≠1 2
return
ÆÆ 
RedirectToAction
ÆÆ '
(
ÆÆ' (
$str
ÆÆ( 7
)
ÆÆ7 8
;
ÆÆ8 9
}
ØØ 
return
≤≤ 
View
≤≤ 
(
≤≤ 
producto
≤≤  
)
≤≤  !
;
≤≤! "
}
≥≥ 	
[
¥¥ 	
HttpPost
¥¥	 
]
¥¥ 
[
µµ 	&
ValidateAntiForgeryToken
µµ	 !
]
µµ! "
public
∂∂ 
async
∂∂ 
Task
∂∂ 
<
∂∂ 
IActionResult
∂∂ '
>
∂∂' (
EliminarProducto
∂∂) 9
(
∂∂9 :
int
∂∂: =
id
∂∂> @
)
∂∂@ A
{
∑∑ 	
var
∏∏ 
producto
∏∏ 
=
∏∏ 
await
∏∏  
_context
∏∏! )
.
∏∏) *
	Productos
∏∏* 3
.
∏∏3 4
	FindAsync
∏∏4 =
(
∏∏= >
id
∏∏> @
)
∏∏@ A
;
∏∏A B
if
ππ 
(
ππ 
producto
ππ 
==
ππ 
null
ππ  
)
ππ  !
{
∫∫ 
TempData
ªª 
[
ªª 
$str
ªª '
]
ªª' (
=
ªª) *
$str
ªª+ D
;
ªªD E
return
ºº 
RedirectToAction
ºº '
(
ºº' (
$str
ºº( 7
)
ºº7 8
;
ºº8 9
}
ΩΩ 
_context
øø 
.
øø 
	Productos
øø 
.
øø 
Remove
øø %
(
øø% &
producto
øø& .
)
øø. /
;
øø/ 0
await
¿¿ 
_context
¿¿ 
.
¿¿ 
SaveChangesAsync
¿¿ +
(
¿¿+ ,
)
¿¿, -
;
¿¿- .
TempData
¡¡ 
[
¡¡ 
$str
¡¡ %
]
¡¡% &
=
¡¡' (
$str
¡¡) D
;
¡¡D E
return
¬¬ 
RedirectToAction
¬¬ #
(
¬¬# $
$str
¬¬$ 3
)
¬¬3 4
;
¬¬4 5
}
√√ 	
private
   

IQueryable
   
<
   
Producto
   #
>
  # $
ObtenerProductos
  % 5
(
  5 6
)
  6 7
{
ÀÀ 	
return
ÃÃ 
_context
ÃÃ 
.
ÃÃ 
	Productos
ÃÃ %
.
ÃÃ% &
Include
ÃÃ& -
(
ÃÃ- .
p
ÃÃ. /
=>
ÃÃ0 2
p
ÃÃ3 4
.
ÃÃ4 5
	Categoria
ÃÃ5 >
)
ÃÃ> ?
.
ÃÃ? @
AsQueryable
ÃÃ@ K
(
ÃÃK L
)
ÃÃL M
;
ÃÃM N
}
ÕÕ 	
public
œœ 
async
œœ 
Task
œœ 
<
œœ 
IActionResult
œœ '
>
œœ' (
Cliente
œœ) 0
(
œœ0 1
int
œœ1 4
pagina
œœ5 ;
=
œœ< =
$num
œœ> ?
)
œœ? @
{
–– 	
int
““  
productosPorPagina
““ "
=
““# $
$num
““% &
;
““& '
var
”” 
	productos
”” 
=
”” 
ObtenerProductos
”” ,
(
””, -
)
””- .
.
””. /
Where
””/ 4
(
””4 5
p
””5 6
=>
””7 9
p
””: ;
.
””; <
Stock
””< A
>
””B C
$num
””D E
)
””E F
;
””F G
var
’’  
productosPaginados
’’ "
=
’’# $
await
’’% *
	productos
’’+ 4
.
÷÷ 
OrderBy
÷÷ 
(
÷÷ 
p
÷÷ 
=>
÷÷ 
p
÷÷ 
.
÷÷  

ProductoId
÷÷  *
)
÷÷* +
.
◊◊ 
Skip
◊◊ 
(
◊◊ 
(
◊◊ 
pagina
◊◊ 
-
◊◊ 
$num
◊◊  !
)
◊◊! "
*
◊◊# $ 
productosPorPagina
◊◊% 7
)
◊◊7 8
.
ÿÿ 
Take
ÿÿ 
(
ÿÿ  
productosPorPagina
ÿÿ (
)
ÿÿ( )
.
ŸŸ 
ToListAsync
ŸŸ 
(
ŸŸ 
)
ŸŸ 
;
ŸŸ 
ViewBag
€€ 
.
€€ 
PaginaActual
€€  
=
€€! "
pagina
€€# )
;
€€) *
ViewBag
‹‹ 
.
‹‹ 
TotalPaginas
‹‹  
=
‹‹! "
(
‹‹# $
int
‹‹$ '
)
‹‹' (
Math
‹‹( ,
.
‹‹, -
Ceiling
‹‹- 4
(
‹‹4 5
(
‹‹5 6
double
‹‹6 <
)
‹‹< =
	productos
‹‹= F
.
‹‹F G
Count
‹‹G L
(
‹‹L M
)
‹‹M N
/
‹‹O P 
productosPorPagina
‹‹Q c
)
‹‹c d
;
‹‹d e
return
ﬁﬁ 
View
ﬁﬁ 
(
ﬁﬁ  
productosPaginados
ﬁﬁ *
)
ﬁﬁ* +
;
ﬁﬁ+ ,
}
ﬂﬂ 	
[
‚‚ 	
HttpPost
‚‚	 
]
‚‚ 
public
„„ 
async
„„ 
Task
„„ 
<
„„ 
IActionResult
„„ '
>
„„' (
AgregarAlCarrito
„„) 9
(
„„9 :
int
„„: =

productoId
„„> H
,
„„H I
int
„„J M
cantidad
„„N V
)
„„V W
{
‰‰ 	
if
ÂÂ 
(
ÂÂ 
_userManager
ÂÂ 
==
ÂÂ 
null
ÂÂ  $
)
ÂÂ$ %
{
ÊÊ 
return
ÁÁ 
RedirectToPage
ÁÁ %
(
ÁÁ% &
$str
ÁÁ& =
)
ÁÁ= >
;
ÁÁ> ?
}
ËË 
var
ÍÍ 
user
ÍÍ 
=
ÍÍ 
await
ÍÍ 
_userManager
ÍÍ )
.
ÍÍ) *
GetUserAsync
ÍÍ* 6
(
ÍÍ6 7
User
ÍÍ7 ;
)
ÍÍ; <
;
ÍÍ< =
if
ÏÏ 
(
ÏÏ 
user
ÏÏ 
==
ÏÏ 
null
ÏÏ 
)
ÏÏ 
{
ÌÌ 
return
ÓÓ 
RedirectToPage
ÓÓ %
(
ÓÓ% &
$str
ÓÓ& =
)
ÓÓ= >
;
ÓÓ> ?
}
ÔÔ 
var
ÒÒ 
	userRoles
ÒÒ 
=
ÒÒ 
await
ÒÒ !
_userManager
ÒÒ" .
.
ÒÒ. /
GetRolesAsync
ÒÒ/ <
(
ÒÒ< =
user
ÒÒ= A
)
ÒÒA B
;
ÒÒB C
var
ÛÛ 
cliente
ÛÛ 
=
ÛÛ 
await
ÛÛ 
_context
ÛÛ  (
.
ÛÛ( )
Clientes
ÛÛ) 1
.
ÛÛ1 2!
FirstOrDefaultAsync
ÛÛ2 E
(
ÛÛE F
c
ÛÛF G
=>
ÛÛH J
c
ÛÛK L
.
ÛÛL M
ApplicationUserId
ÛÛM ^
==
ÛÛ_ a
user
ÛÛb f
.
ÛÛf g
Id
ÛÛg i
)
ÛÛi j
;
ÛÛj k
if
ÙÙ 
(
ÙÙ 
cliente
ÙÙ 
==
ÙÙ 
null
ÙÙ 
)
ÙÙ  
{
ıı 
TempData
ˆˆ 
[
ˆˆ 
$str
ˆˆ '
]
ˆˆ' (
=
ˆˆ) *
$str
ˆˆ+ W
;
ˆˆW X
TempData
˜˜ 
[
˜˜ 
$str
˜˜ %
]
˜˜% &
=
˜˜' (

productoId
˜˜) 3
;
˜˜3 4
return
¯¯ 
RedirectToAction
¯¯ '
(
¯¯' (
$str
¯¯( 1
,
¯¯1 2
$str
¯¯3 >
)
¯¯> ?
;
¯¯? @
}
˘˘ 
var
˚˚ 
userId
˚˚ 
=
˚˚ 
cliente
˚˚  
.
˚˚  !
	ClienteId
˚˚! *
;
˚˚* +
var
¸¸ 
carrito
¸¸ 
=
¸¸ 
await
¸¸ 
_context
¸¸  (
.
¸¸( )
Carrito
¸¸) 0
.
˝˝ 
Include
˝˝ 
(
˝˝ 
c
˝˝ 
=>
˝˝ 
c
˝˝ 
.
˝˝  
detalleCarrito
˝˝  .
)
˝˝. /
.
˛˛ !
FirstOrDefaultAsync
˛˛ $
(
˛˛$ %
c
˛˛% &
=>
˛˛' )
c
˛˛* +
.
˛˛+ ,
	ClienteId
˛˛, 5
==
˛˛6 8
userId
˛˛9 ?
)
˛˛? @
;
˛˛@ A
if
ÄÄ 
(
ÄÄ 
carrito
ÄÄ 
==
ÄÄ 
null
ÄÄ 
)
ÄÄ  
{
ÅÅ 
carrito
ÇÇ 
=
ÇÇ 
new
ÇÇ 
Carrito
ÇÇ %
{
ÉÉ 
	ClienteId
ÑÑ 
=
ÑÑ 
userId
ÑÑ  &
,
ÑÑ& '
Cliente
ÖÖ 
=
ÖÖ 
cliente
ÖÖ %
,
ÖÖ% &
detalleCarrito
ÜÜ "
=
ÜÜ# $
new
ÜÜ% (
List
ÜÜ) -
<
ÜÜ- .
DetalleCarrito
ÜÜ. <
>
ÜÜ< =
(
ÜÜ= >
)
ÜÜ> ?
,
ÜÜ? @
FechaCreacion
áá !
=
áá" #
DateTime
áá$ ,
.
áá, -
Now
áá- 0
}
àà 
;
àà 
_context
ââ 
.
ââ 
Carrito
ââ  
.
ââ  !
Add
ââ! $
(
ââ$ %
carrito
ââ% ,
)
ââ, -
;
ââ- .
await
ää 
_context
ää 
.
ää 
SaveChangesAsync
ää /
(
ää/ 0
)
ää0 1
;
ää1 2
}
ãã 
var
çç 
producto
çç 
=
çç 
await
çç  
_context
çç! )
.
çç) *
	Productos
çç* 3
.
çç3 4
	FindAsync
çç4 =
(
çç= >

productoId
çç> H
)
ççH I
;
ççI J
if
éé 
(
éé 
producto
éé 
==
éé 
null
éé  
)
éé  !
{
èè 
TempData
êê 
[
êê 
$str
êê '
]
êê' (
=
êê) *
$str
êê+ C
;
êêC D
return
ëë 
RedirectToAction
ëë '
(
ëë' (
$str
ëë( 1
,
ëë1 2
$str
ëë3 >
)
ëë> ?
;
ëë? @
}
íí 
var
ïï 
detalleExistente
ïï  
=
ïï! "
carrito
ïï# *
.
ïï* +
detalleCarrito
ïï+ 9
.
ïï9 :
FirstOrDefault
ïï: H
(
ïïH I
dc
ïïI K
=>
ïïL N
dc
ïïO Q
.
ïïQ R

ProductoId
ïïR \
==
ïï] _

productoId
ïï` j
)
ïïj k
;
ïïk l
int
ññ 
cantidadEnCarrito
ññ !
=
ññ" #
detalleExistente
ññ$ 4
?
ññ4 5
.
ññ5 6
Cantidad
ññ6 >
??
ññ? A
$num
ññB C
;
ññC D
if
ôô 
(
ôô 
producto
ôô 
.
ôô 
Stock
ôô 
<
ôô  
cantidad
ôô! )
+
ôô* +
cantidadEnCarrito
ôô, =
)
ôô= >
{
öö 
if
õõ 
(
õõ 
cantidadEnCarrito
õõ %
>
õõ& '
$num
õõ( )
)
õõ) *
{
úú 
TempData
ùù 
[
ùù 
$str
ùù +
]
ùù+ ,
=
ùù- .
$"
ùù/ 1
$str
ùù1 T
{
ùùT U
cantidadEnCarrito
ùùU f
}
ùùf g
$strùùg ç
{ùùç é
productoùùé ñ
.ùùñ ó
Stockùùó ú
}ùùú ù
$strùùù ≥
"ùù≥ ¥
;ùù¥ µ
}
ûû 
else
üü 
{
†† 
TempData
°° 
[
°° 
$str
°° +
]
°°+ ,
=
°°- .
$"
°°/ 1
$str
°°1 S
{
°°S T
producto
°°T \
.
°°\ ]
Stock
°°] b
}
°°b c
$str
°°c y
"
°°y z
;
°°z {
}
¢¢ 
return
££ 
RedirectToAction
££ '
(
££' (
$str
££( 1
,
££1 2
$str
££3 >
)
££> ?
;
££? @
}
§§ 
if
¶¶ 
(
¶¶ 
detalleExistente
¶¶  
!=
¶¶! #
null
¶¶$ (
)
¶¶( )
{
ßß 
detalleExistente
®®  
.
®®  !
Cantidad
®®! )
+=
®®* ,
cantidad
®®- 5
;
®®5 6
_context
©© 
.
©© 
DetalleCarrito
©© '
.
©©' (
Update
©©( .
(
©©. /
detalleExistente
©©/ ?
)
©©? @
;
©©@ A
}
™™ 
else
´´ 
{
¨¨ 
var
≠≠ 
detalleCarrito
≠≠ "
=
≠≠# $
new
≠≠% (
DetalleCarrito
≠≠) 7
{
ÆÆ 
	CarritoId
ØØ 
=
ØØ 
carrito
ØØ  '
.
ØØ' (
	CarritoId
ØØ( 1
,
ØØ1 2

ProductoId
∞∞ 
=
∞∞  

productoId
∞∞! +
,
∞∞+ ,
Cantidad
±± 
=
±± 
cantidad
±± '
,
±±' (
PrecioUnitario
≤≤ "
=
≤≤# $
(
≤≤% &
decimal
≤≤& -
)
≤≤- .
producto
≤≤. 6
.
≤≤6 7
Precio
≤≤7 =
,
≤≤= >
Carrito
≥≥ 
=
≥≥ 
carrito
≥≥ %
,
≥≥% &
Producto
¥¥ 
=
¥¥ 
producto
¥¥ '
}
µµ 
;
µµ 
_context
∑∑ 
.
∑∑ 
DetalleCarrito
∑∑ '
.
∑∑' (
Add
∑∑( +
(
∑∑+ ,
detalleCarrito
∑∑, :
)
∑∑: ;
;
∑∑; <
}
∏∏ 
await
∫∫ 
_context
∫∫ 
.
∫∫ 
SaveChangesAsync
∫∫ +
(
∫∫+ ,
)
∫∫, -
;
∫∫- .
TempData
ºº 
[
ºº 
$str
ºº %
]
ºº% &
=
ºº' (
$str
ºº) V
;
ººV W
return
ææ 
RedirectToAction
ææ #
(
ææ# $
$str
ææ$ -
,
ææ- .
$str
ææ/ :
)
ææ: ;
;
ææ; <
}
øø 	
}
¿¿ 
}¡¡ âÙ
?C:\Users\ACER\Desktop\GRINPLAS\Controllers\PedidosController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class 
PedidosController "
:# $

Controller% /
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
?5 6
_userManager7 C
;C D
private 
readonly 
ILogger  
<  !
PedidosController! 2
>2 3
_logger4 ;
;; <
[ 	)
ActivatorUtilitiesConstructor	 &
]& '
public 
PedidosController  
(  ! 
ApplicationDbContext 
context $
,$ %
UserManager 
< 
ApplicationUser #
># $
userManager% 0
,0 1
ILogger 
< 
PedidosController !
>! "
logger# )
)) *
{ 	
_context 
= 
context 
; 
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
public!! 
PedidosController!!  
(!!  ! 
ApplicationDbContext"" 
context"" $
,""$ %
UserManager## 
<## 
ApplicationUser## #
>### $
userManager##% 0
)##0 1
:$$ 	
this$$
 
($$ 
context$$ 
,$$ 
userManager$$ #
,$$# $

NullLogger$$% /
<$$/ 0
PedidosController$$0 A
>$$A B
.$$B C
Instance$$C K
)$$K L
{%% 	
}&& 	
[(( 	
	Authorize((	 
((( 
Roles(( 
=(( 
$str(( *
)((* +
]((+ ,
public)) 
async)) 
Task)) 
<)) 
IActionResult)) '
>))' (
Administrador))) 6
())6 7
DateTime))7 ?
?))? @
fechaInicio))A L
,))L M
DateTime))N V
?))V W
fechaFin))X `
)))` a
{** 	
if++ 
(++ 
_userManager++ 
==++ 
null++  $
)++$ %
{,, 
return-- 
RedirectToPage-- %
(--% &
$str--& =
)--= >
;--> ?
}.. 
var// 
user// 
=// 
await// 
_userManager// )
.//) *
GetUserAsync//* 6
(//6 7
User//7 ;
)//; <
;//< =
if11 
(11 
user11 
==11 
null11 
)11 
{22 
return33 
RedirectToPage33 %
(33% &
$str33& =
)33= >
;33> ?
}44 
var55 
	userRoles55 
=55 
await55 !
_userManager55" .
.55. /
GetRolesAsync55/ <
(55< =
user55= A
)55A B
;55B C
if77 
(77 
!77 
	userRoles77 
.77 
Contains77 #
(77# $
$str77$ 3
)773 4
)774 5
{88 
return99 
RedirectToPage99 %
(99% &
$str99& =
)99= >
;99> ?
}:: 
var;; 
	viewModel;; 
=;; 
new;; 
PedidoViewModel;;  /
{<< 
Pedidos== 
=== 
await== 
_context==  (
.==( )
Pedidos==) 0
.==0 1
Include==1 8
(==8 9
p==9 :
=>==; =
p==> ?
.==? @
Cliente==@ G
)==G H
.==H I
ToListAsync==I T
(==T U
)==U V
,==V W
nuevoPedido>> 
=>> 
new>> !
Pedido>>" (
(>>( )
)>>) *
,>>* +
Clientes?? 
=?? 
await??  
_context??! )
.??) *
Clientes??* 2
.??2 3
ToListAsync??3 >
(??> ?
)??? @
,??@ A
	Productos@@ 
=@@ 
await@@ !
_context@@" *
.@@* +
	Productos@@+ 4
.@@4 5
Include@@5 <
(@@< =
p@@= >
=>@@? A
p@@B C
.@@C D
	Categoria@@D M
)@@M N
.@@N O
ToListAsync@@O Z
(@@Z [
)@@[ \
}AA 
;AA 
ViewBagBB 
.BB 
TotalMangasBB 
=BB  !
awaitBB" '
_contextBB( 0
.BB0 1
DetallePedidosBB1 ?
.CC 
WhereCC 
(CC 
dpCC 
=>CC 
dpCC 
.CC 
ProductoCC $
.CC$ %
	CategoriaCC% .
.CC. /
NombreCC/ 5
==CC6 8
$strCC9 A
)CCA B
.DD 
SumAsyncDD 
(DD 
dpDD 
=>DD 
dpDD 
.DD 
PrecioTotalDD *
)DD* +
;DD+ ,
ViewBagFF 
.FF 
TotalBolsasFF 
=FF  !
awaitFF" '
_contextFF( 0
.FF0 1
DetallePedidosFF1 ?
.GG 
WhereGG 
(GG 
dpGG 
=>GG 
dpGG 
.GG  
ProductoGG  (
.GG( )
	CategoriaGG) 2
.GG2 3
NombreGG3 9
==GG: <
$strGG= E
)GGE F
.HH 
SumAsyncHH 
(HH 
dpHH 
=>HH 
dpHH  "
.HH" #
PrecioTotalHH# .
)HH. /
;HH/ 0
returnKK 
ViewKK 
(KK 
	viewModelKK !
)KK! "
;KK" #
}LL 	
[NN 	
	AuthorizeNN	 
(NN 
RolesNN 
=NN 
$strNN %
)NN% &
]NN& '
publicOO 
asyncOO 
TaskOO 
<OO 
IActionResultOO '
>OO' (
GerenteGeneralOO) 7
(OO7 8
DateTimeOO8 @
?OO@ A
fechaInicioOOB M
,OOM N
DateTimeOOO W
?OOW X
fechaFinOOY a
)OOa b
{PP 	
ifQQ 
(QQ 
_userManagerQQ 
==QQ 
nullQQ  $
)QQ$ %
{RR 
returnSS 
RedirectToPageSS %
(SS% &
$strSS& =
)SS= >
;SS> ?
}TT 
varUU 
userUU 
=UU 
awaitUU 
_userManagerUU )
.UU) *
GetUserAsyncUU* 6
(UU6 7
UserUU7 ;
)UU; <
;UU< =
ifWW 
(WW 
userWW 
==WW 
nullWW 
)WW 
{XX 
returnYY 
RedirectToPageYY %
(YY% &
$strYY& =
)YY= >
;YY> ?
}ZZ 
var[[ 
	userRoles[[ 
=[[ 
await[[ !
_userManager[[" .
.[[. /
GetRolesAsync[[/ <
([[< =
user[[= A
)[[A B
;[[B C
if]] 
(]] 
!]] 
	userRoles]] 
.]] 
Contains]] #
(]]# $
$str]]$ .
)]]. /
)]]/ 0
{^^ 
return__ 
RedirectToPage__ %
(__% &
$str__& =
)__= >
;__> ?
}`` 
varaa 
	viewModelaa 
=aa 
newaa 
PedidoViewModelaa  /
{bb 
Pedidoscc 
=cc 
awaitcc 
_contextcc  (
.cc( )
Pedidoscc) 0
.cc0 1
Includecc1 8
(cc8 9
pcc9 :
=>cc; =
pcc> ?
.cc? @
Clientecc@ G
)ccG H
.ccH I
ToListAsyncccI T
(ccT U
)ccU V
,ccV W
nuevoPedidodd 
=dd 
newdd !
Pedidodd" (
(dd( )
)dd) *
,dd* +
Clientesee 
=ee 
awaitee  
_contextee! )
.ee) *
Clientesee* 2
.ee2 3
ToListAsyncee3 >
(ee> ?
)ee? @
,ee@ A
	Productosff 
=ff 
awaitff !
_contextff" *
.ff* +
	Productosff+ 4
.ff4 5
Includeff5 <
(ff< =
pff= >
=>ff? A
pffB C
.ffC D
	CategoriaffD M
)ffM N
.ffN O
ToListAsyncffO Z
(ffZ [
)ff[ \
}gg 
;gg 
ViewBaghh 
.hh 
TotalMangashh 
=hh  !
awaithh" '
_contexthh( 0
.hh0 1
DetallePedidoshh1 ?
.ii 
Whereii 
(ii 
dpii 
=>ii 
dpii 
.ii 
Productoii '
.ii' (
	Categoriaii( 1
.ii1 2
Nombreii2 8
==ii9 ;
$strii< D
)iiD E
.jj 
SumAsyncjj 
(jj 
dpjj 
=>jj 
dpjj !
.jj! "
PrecioTotaljj" -
)jj- .
;jj. /
ViewBagll 
.ll 
TotalBolsasll 
=ll  !
awaitll" '
_contextll( 0
.ll0 1
DetallePedidosll1 ?
.mm 
Wheremm 
(mm 
dpmm 
=>mm 
dpmm 
.mm  
Productomm  (
.mm( )
	Categoriamm) 2
.mm2 3
Nombremm3 9
==mm: <
$strmm= E
)mmE F
.nn 
SumAsyncnn 
(nn 
dpnn 
=>nn 
dpnn  "
.nn" #
PrecioTotalnn# .
)nn. /
;nn/ 0
returnqq 
Viewqq 
(qq 
	viewModelqq !
)qq! "
;qq" #
}rr 	
[ss 	
HttpPostss	 
]ss 
[tt 	
	Authorizett	 
(tt 
Rolestt 
=tt 
$strtt %
)tt% &
]tt& '
publicuu 
asyncuu 
Taskuu 
<uu 
IActionResultuu '
>uu' (
ActualizarPedidouu) 9
(uu9 :
[uu: ;
FromFormuu; C
]uuC D
intuuE H
pedidoIduuI Q
,uuQ R
[uuS T
FromFormuuT \
]uu\ ]
stringuu^ d
statusuue k
,uuk l
[uum n
FromFormuun v
]uuv w
stringuux ~
pago	uu É
,
uuÉ Ñ
[
uuÖ Ü
FromForm
uuÜ é
]
uué è
DateTime
uuê ò
?
uuò ô
fechaEntrega
uuö ¶
)
uu¶ ß
{vv 	
tryww 
{xx 
varyy 
pedidoyy 
=yy 
awaityy "
_contextyy# +
.yy+ ,
Pedidosyy, 3
.zz 
Includezz 
(zz 
pzz 
=>zz !
pzz" #
.zz# $
Clientezz$ +
)zz+ ,
.{{ 
ThenInclude{{  
({{  !
c{{! "
=>{{# %
c{{& '
.{{' (
User{{( ,
){{, -
.|| 
FirstOrDefaultAsync|| (
(||( )
p||) *
=>||+ -
p||. /
.||/ 0
PedidoId||0 8
==||9 ;
pedidoId||< D
)||D E
;||E F
if~~ 
(~~ 
pedido~~ 
==~~ 
null~~ "
)~~" #
{ 
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ  
new
ÄÄ  #
{
ÄÄ$ %
success
ÄÄ& -
=
ÄÄ. /
false
ÄÄ0 5
,
ÄÄ5 6
error
ÄÄ7 <
=
ÄÄ= >
$"
ÄÄ? A
$str
ÄÄA [
{
ÄÄ[ \
pedidoId
ÄÄ\ d
}
ÄÄd e
$str
ÄÄe f
"
ÄÄf g
}
ÄÄh i
)
ÄÄi j
;
ÄÄj k
}
ÅÅ 
if
ÉÉ 
(
ÉÉ 
pedido
ÉÉ 
.
ÉÉ 
Status
ÉÉ !
!=
ÉÉ" $
status
ÉÉ% +
)
ÉÉ+ ,
{
ÑÑ 
await
ÖÖ 
CrearNotificacion
ÖÖ +
(
ÖÖ+ ,
pedido
ÜÜ 
.
ÜÜ 
Cliente
ÜÜ &
.
ÜÜ& '
User
ÜÜ' +
.
ÜÜ+ ,
Id
ÜÜ, .
,
ÜÜ. /
$str
áá +
,
áá+ ,
$"
àà 
$str
àà .
{
àà. /
status
àà/ 5
}
àà5 6
$str
àà6 8
"
àà8 9
,
àà9 :
$str
ââ  
,
ââ  !
pedido
ää 
.
ää 
PedidoId
ää '
)
ãã 
;
ãã 
}
åå 
if
çç 
(
çç 
pago
çç 
==
çç 
$str
çç &
&&
çç' )
pedido
çç* 0
.
çç0 1
Pago
çç1 5
!=
çç6 8
$str
çç9 C
)
ççC D
{
éé 
await
èè 
CrearNotificacion
èè +
(
èè+ ,
pedido
êê 
.
êê 
Cliente
êê &
.
êê& '
User
êê' +
.
êê+ ,
Id
êê, .
,
êê. /
$str
ëë -
,
ëë- .
$str
íí =
,
íí= >
$str
ìì 
,
ìì 
pedido
îî 
.
îî 
PedidoId
îî '
)
ïï 
;
ïï 
}
ññ 
else
óó 
if
óó 
(
óó 
pago
óó 
==
óó  
$str
óó! .
&&
óó/ 1
pedido
óó2 8
.
óó8 9
Pago
óó9 =
!=
óó> @
$str
óóA N
)
óóN O
{
òò 
await
ôô 
CrearNotificacion
ôô +
(
ôô+ ,
pedido
öö 
.
öö 
Cliente
öö &
.
öö& '
User
öö' +
.
öö+ ,
Id
öö, .
,
öö. /
$str
õõ -
,
õõ- .
$str
úú >
,
úú> ?
$str
ùù 
,
ùù 
pedido
ûû 
.
ûû 
PedidoId
ûû '
)
üü 
;
üü 
}
†† 
else
°° 
if
°° 
(
°° 
pago
°° 
==
°°  
$str
°°! ,
&&
°°- /
pedido
°°0 6
.
°°6 7
Pago
°°7 ;
!=
°°< >
$str
°°? J
)
°°J K
{
¢¢ 
await
££ 
CrearNotificacion
££ +
(
££+ ,
pedido
§§ 
.
§§ 
Cliente
§§ &
.
§§& '
User
§§' +
.
§§+ ,
Id
§§, .
,
§§. /
$str
•• -
,
••- .
$str
¶¶ ?
,
¶¶? @
$str
ßß 
,
ßß 
pedido
®® 
.
®® 
PedidoId
®® '
)
©© 
;
©© 
}
™™ 
pedido
¨¨ 
.
¨¨ 
Status
¨¨ 
=
¨¨ 
status
¨¨  &
;
¨¨& '
pedido
≠≠ 
.
≠≠ 
Pago
≠≠ 
=
≠≠ 
pago
≠≠ "
;
≠≠" #
if
ØØ 
(
ØØ 
fechaEntrega
ØØ  
.
ØØ  !
HasValue
ØØ! )
)
ØØ) *
{
∞∞ 
pedido
±± 
.
±± 
FechaEntrega
±± '
=
±±( )
DateTime
±±* 2
.
±±2 3
SpecifyKind
±±3 >
(
±±> ?
fechaEntrega
±±? K
.
±±K L
Value
±±L Q
,
±±Q R
DateTimeKind
±±S _
.
±±_ `
Utc
±±` c
)
±±c d
;
±±d e
}
≤≤ 
else
≥≥ 
{
¥¥ 
pedido
µµ 
.
µµ 
FechaEntrega
µµ '
=
µµ( )
null
µµ* .
;
µµ. /
}
∂∂ 
_context
∏∏ 
.
∏∏ 
Update
∏∏ 
(
∏∏  
pedido
∏∏  &
)
∏∏& '
;
∏∏' (
await
ππ 
_context
ππ 
.
ππ 
SaveChangesAsync
ππ /
(
ππ/ 0
)
ππ0 1
;
ππ1 2
return
ªª 
Json
ªª 
(
ªª 
new
ªª 
{
ªª  !
success
ªª" )
=
ªª* +
true
ªª, 0
}
ªª1 2
)
ªª2 3
;
ªª3 4
}
ºº 
catch
ΩΩ 
(
ΩΩ 
	Exception
ΩΩ 
ex
ΩΩ 
)
ΩΩ  
{
ææ 
_logger
øø 
.
øø 
LogError
øø  
(
øø  !
ex
øø! #
,
øø# $
$str
øø% D
)
øøD E
;
øøE F
return
¿¿ 
Json
¿¿ 
(
¿¿ 
new
¿¿ 
{
¿¿  !
success
¿¿" )
=
¿¿* +
false
¿¿, 1
,
¿¿1 2
error
¿¿3 8
=
¿¿9 :
$str
¿¿; W
}
¿¿X Y
)
¿¿Y Z
;
¿¿Z [
}
¡¡ 
}
¬¬ 	
[
ƒƒ 	
HttpPost
ƒƒ	 
]
ƒƒ 
public
≈≈ 
async
≈≈ 
Task
≈≈ 
<
≈≈ 
IActionResult
≈≈ '
>
≈≈' (!
ActualizarDireccion
≈≈) <
(
≈≈< =
[
≈≈= >
FromForm
≈≈> F
]
≈≈F G
int
≈≈H K
pedidoId
≈≈L T
,
≈≈T U
[
≈≈V W
FromForm
≈≈W _
]
≈≈_ `
string
≈≈a g
nuevaDireccion
≈≈h v
)
≈≈v w
{
∆∆ 	
try
«« 
{
»» 
var
   
pedido
   
=
   
await
   "
_context
  # +
.
  + ,
Pedidos
  , 3
.
ÀÀ 
Include
ÀÀ 
(
ÀÀ 
p
ÀÀ 
=>
ÀÀ !
p
ÀÀ" #
.
ÀÀ# $
Cliente
ÀÀ$ +
)
ÀÀ+ ,
.
ÃÃ 
ThenInclude
ÃÃ  
(
ÃÃ  !
c
ÃÃ! "
=>
ÃÃ# %
c
ÃÃ& '
.
ÃÃ' (
User
ÃÃ( ,
)
ÃÃ, -
.
ÕÕ !
FirstOrDefaultAsync
ÕÕ (
(
ÕÕ( )
p
ÕÕ) *
=>
ÕÕ+ -
p
ÕÕ. /
.
ÕÕ/ 0
PedidoId
ÕÕ0 8
==
ÕÕ9 ;
pedidoId
ÕÕ< D
)
ÕÕD E
;
ÕÕE F
if
œœ 
(
œœ 
pedido
œœ 
==
œœ 
null
œœ "
)
œœ" #
{
–– 
return
—— 
Json
—— 
(
——  
new
——  #
{
——$ %
success
——& -
=
——. /
false
——0 5
,
——5 6
error
——7 <
=
——= >
$"
——? A
$str
——A [
{
——[ \
pedidoId
——\ d
}
——d e
$str
——e f
"
——f g
}
——h i
)
——i j
;
——j k
}
““ 
pedido
’’ 
.
’’ 
	Direccion
’’  
=
’’! "
nuevaDireccion
’’# 1
;
’’1 2
_context
÷÷ 
.
÷÷ 
Update
÷÷ 
(
÷÷  
pedido
÷÷  &
)
÷÷& '
;
÷÷' (
await
◊◊ 
_context
◊◊ 
.
◊◊ 
SaveChangesAsync
◊◊ /
(
◊◊/ 0
)
◊◊0 1
;
◊◊1 2
await
ÿÿ 
CrearNotificacion
ÿÿ '
(
ÿÿ' (
pedido
ŸŸ 
.
ŸŸ 
Cliente
ŸŸ "
.
ŸŸ" #
User
ŸŸ# '
.
ŸŸ' (
Id
ŸŸ( *
,
ŸŸ* +
$str
⁄⁄ +
,
⁄⁄+ ,
$str
€€ N
,
€€N O
$str
‹‹ 
,
‹‹  
pedido
›› 
.
›› 
PedidoId
›› #
)
ﬁﬁ 
;
ﬁﬁ 
return
‡‡ 
Json
‡‡ 
(
‡‡ 
new
‡‡ 
{
‡‡  !
success
‡‡" )
=
‡‡* +
true
‡‡, 0
}
‡‡1 2
)
‡‡2 3
;
‡‡3 4
}
·· 
catch
‚‚ 
(
‚‚ 
	Exception
‚‚ 
ex
‚‚ 
)
‚‚  
{
„„ 
_logger
‰‰ 
.
‰‰ 
LogError
‰‰  
(
‰‰  !
ex
‰‰! #
,
‰‰# $
$str
‰‰% R
)
‰‰R S
;
‰‰S T
return
ÂÂ 
Json
ÂÂ 
(
ÂÂ 
new
ÂÂ 
{
ÂÂ  !
success
ÂÂ" )
=
ÂÂ* +
false
ÂÂ, 1
,
ÂÂ1 2
error
ÂÂ3 8
=
ÂÂ9 :
$str
ÂÂ; W
}
ÂÂX Y
)
ÂÂY Z
;
ÂÂZ [
}
ÊÊ 
}
ÁÁ 	
[
ÍÍ 	
HttpPost
ÍÍ	 
]
ÍÍ 
public
ÎÎ 
async
ÎÎ 
Task
ÎÎ 
<
ÎÎ 
IActionResult
ÎÎ '
>
ÎÎ' (
CancelarPedido
ÎÎ) 7
(
ÎÎ7 8
[
ÎÎ8 9
FromForm
ÎÎ9 A
]
ÎÎA B
int
ÎÎC F
pedidoId
ÎÎG O
)
ÎÎO P
{
ÏÏ 	
try
ÌÌ 
{
ÓÓ 
var
 
pedido
 
=
 
await
 "
_context
# +
.
+ ,
Pedidos
, 3
.
ÒÒ 
Include
ÒÒ 
(
ÒÒ 
p
ÒÒ 
=>
ÒÒ !
p
ÒÒ" #
.
ÒÒ# $
Cliente
ÒÒ$ +
)
ÒÒ+ ,
.
ÚÚ 
ThenInclude
ÚÚ  
(
ÚÚ  !
c
ÚÚ! "
=>
ÚÚ# %
c
ÚÚ& '
.
ÚÚ' (
User
ÚÚ( ,
)
ÚÚ, -
.
ÛÛ !
FirstOrDefaultAsync
ÛÛ (
(
ÛÛ( )
p
ÛÛ) *
=>
ÛÛ+ -
p
ÛÛ. /
.
ÛÛ/ 0
PedidoId
ÛÛ0 8
==
ÛÛ9 ;
pedidoId
ÛÛ< D
)
ÛÛD E
;
ÛÛE F
if
ıı 
(
ıı 
pedido
ıı 
==
ıı 
null
ıı "
)
ıı" #
{
ˆˆ 
return
˜˜ 
Json
˜˜ 
(
˜˜  
new
˜˜  #
{
˜˜$ %
success
˜˜& -
=
˜˜. /
false
˜˜0 5
,
˜˜5 6
error
˜˜7 <
=
˜˜= >
$"
˜˜? A
$str
˜˜A [
{
˜˜[ \
pedidoId
˜˜\ d
}
˜˜d e
$str
˜˜e f
"
˜˜f g
}
˜˜h i
)
˜˜i j
;
˜˜j k
}
¯¯ 
pedido
˚˚ 
.
˚˚ 
Status
˚˚ 
=
˚˚ 
$str
˚˚  +
;
˚˚+ ,
_context
¸¸ 
.
¸¸ 
Update
¸¸ 
(
¸¸  
pedido
¸¸  &
)
¸¸& '
;
¸¸' (
await
˝˝ 
_context
˝˝ 
.
˝˝ 
SaveChangesAsync
˝˝ /
(
˝˝/ 0
)
˝˝0 1
;
˝˝1 2
await
ˇˇ 
CrearNotificacion
ˇˇ '
(
ˇˇ' (
pedido
ÄÄ 
.
ÄÄ 
Cliente
ÄÄ "
.
ÄÄ" #
User
ÄÄ# '
.
ÄÄ' (
Id
ÄÄ( *
,
ÄÄ* +
$str
ÅÅ &
,
ÅÅ& '
$str
ÇÇ 1
,
ÇÇ1 2
$str
ÉÉ 
,
ÉÉ 
pedido
ÑÑ 
.
ÑÑ 
PedidoId
ÑÑ #
)
ÖÖ 
;
ÖÖ 
return
áá 
Json
áá 
(
áá 
new
áá 
{
áá  !
success
áá" )
=
áá* +
true
áá, 0
}
áá1 2
)
áá2 3
;
áá3 4
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 
_logger
ãã 
.
ãã 
LogError
ãã  
(
ãã  !
ex
ãã! #
,
ãã# $
$str
ãã% B
)
ããB C
;
ããC D
return
åå 
Json
åå 
(
åå 
new
åå 
{
åå  !
success
åå" )
=
åå* +
false
åå, 1
,
åå1 2
error
åå3 8
=
åå9 :
$str
åå; W
}
ååX Y
)
ååY Z
;
ååZ [
}
çç 
}
éé 	
private
èè 
async
èè 
Task
èè 
CrearNotificacion
èè ,
(
èè, -
string
èè- 3
	usuarioId
èè4 =
,
èè= >
string
èè? E
titulo
èèF L
,
èèL M
string
èèN T
mensaje
èèU \
,
èè\ ]
string
èè^ d
tipo
èèe i
,
èèi j
int
èèk n
?
èèn o
pedidoId
èèp x
=
èèy z
null
èè{ 
)èè Ä
{
êê 	
var
ëë 
notificacion
ëë 
=
ëë 
new
ëë "
Notificacion
ëë# /
{
íí 
	UsuarioId
ìì 
=
ìì 
	usuarioId
ìì %
,
ìì% &
Titulo
îî 
=
îî 
titulo
îî 
,
îî  
Mensaje
ïï 
=
ïï 
mensaje
ïï !
,
ïï! "
Tipo
ññ 
=
ññ 
tipo
ññ 
,
ññ 
PedidoId
óó 
=
óó 
pedidoId
óó #
,
óó# $
FechaCreacion
òò 
=
òò 
DateTime
òò  (
.
òò( )
UtcNow
òò) /
,
òò/ 0
Leida
ôô 
=
ôô 
false
ôô 
}
öö 
;
öö 
_context
úú 
.
úú 
Notificaciones
úú #
.
úú# $
Add
úú$ '
(
úú' (
notificacion
úú( 4
)
úú4 5
;
úú5 6
await
ùù 
_context
ùù 
.
ùù 
SaveChangesAsync
ùù +
(
ùù+ ,
)
ùù, -
;
ùù- .
}
ûû 	
[
üü 	
	NonAction
üü	 
]
üü 
public
†† 
async
†† 
Task
†† 
<
†† 
List
†† 
<
†† 
Notificacion
†† +
>
††+ ,
>
††, -*
ObtenerNotificacionesUsuario
††. J
(
††J K
)
††K L
{
°° 	
if
¢¢ 
(
¢¢ 
_userManager
¢¢ 
==
¢¢ 
null
¢¢  $
)
¢¢$ %
return
¢¢& ,
new
¢¢- 0
List
¢¢1 5
<
¢¢5 6
Notificacion
¢¢6 B
>
¢¢B C
(
¢¢C D
)
¢¢D E
;
¢¢E F
var
§§ 
user
§§ 
=
§§ 
await
§§ 
_userManager
§§ )
.
§§) *
GetUserAsync
§§* 6
(
§§6 7
User
§§7 ;
)
§§; <
;
§§< =
if
•• 
(
•• 
user
•• 
==
•• 
null
•• 
)
•• 
return
•• $
new
••% (
List
••) -
<
••- .
Notificacion
••. :
>
••: ;
(
••; <
)
••< =
;
••= >
return
ßß 
await
ßß 
_context
ßß !
.
ßß! "
Notificaciones
ßß" 0
.
®® 
Where
®® 
(
®® 
n
®® 
=>
®® 
n
®® 
.
®® 
	UsuarioId
®® '
==
®®( *
user
®®+ /
.
®®/ 0
Id
®®0 2
&&
®®3 5
!
®®6 7
n
®®7 8
.
®®8 9
Leida
®®9 >
)
®®> ?
.
©© 
OrderByDescending
©© "
(
©©" #
n
©©# $
=>
©©% '
n
©©( )
.
©©) *
FechaCreacion
©©* 7
)
©©7 8
.
™™ 
Take
™™ 
(
™™ 
$num
™™ 
)
™™ 
.
´´ 
ToListAsync
´´ 
(
´´ 
)
´´ 
;
´´ 
}
¨¨ 	
[
≠≠ 	
HttpPost
≠≠	 
]
≠≠ 
[
ÆÆ 	
	Authorize
ÆÆ	 
(
ÆÆ 
Roles
ÆÆ 
=
ÆÆ 
$str
ÆÆ %
)
ÆÆ% &
]
ÆÆ& '
public
ØØ 
async
ØØ 
Task
ØØ 
<
ØØ 
IActionResult
ØØ '
>
ØØ' (*
CrearNotificacionNuevoPedido
ØØ) E
(
ØØE F
[
ØØF G
FromBody
ØØG O
]
ØØO P
NotificacionDto
ØØQ `
notificacionDto
ØØa p
)
ØØp q
{
∞∞ 	
try
±± 
{
≤≤ 
var
¥¥ 

vendedores
¥¥ 
=
¥¥  
await
¥¥! &
_userManager
¥¥' 3
.
¥¥3 4!
GetUsersInRoleAsync
¥¥4 G
(
¥¥G H
$str
¥¥H R
)
¥¥R S
;
¥¥S T
foreach
∂∂ 
(
∂∂ 
var
∂∂ 
vendedor
∂∂ %
in
∂∂& (

vendedores
∂∂) 3
)
∂∂3 4
{
∑∑ 
var
∏∏ 
notificacion
∏∏ $
=
∏∏% &
new
∏∏' *
Notificacion
∏∏+ 7
{
ππ 
	UsuarioId
∫∫ !
=
∫∫" #
vendedor
∫∫$ ,
.
∫∫, -
Id
∫∫- /
,
∫∫/ 0
Titulo
ªª 
=
ªª  
notificacionDto
ªª! 0
.
ªª0 1
titulo
ªª1 7
??
ªª8 :
$str
ªª; I
,
ªªI J
Mensaje
ºº 
=
ºº  !
notificacionDto
ºº" 1
.
ºº1 2
mensaje
ºº2 9
??
ºº: <
$str
ºº= f
,
ººf g
Tipo
ΩΩ 
=
ΩΩ 
$str
ΩΩ -
,
ΩΩ- .
PedidoId
ææ  
=
ææ! "
notificacionDto
ææ# 2
.
ææ2 3
pedidoId
ææ3 ;
,
ææ; <
FechaCreacion
øø %
=
øø& '
DateTime
øø( 0
.
øø0 1
UtcNow
øø1 7
,
øø7 8
Leida
¿¿ 
=
¿¿ 
false
¿¿  %
}
¡¡ 
;
¡¡ 
_context
√√ 
.
√√ 
Notificaciones
√√ +
.
√√+ ,
Add
√√, /
(
√√/ 0
notificacion
√√0 <
)
√√< =
;
√√= >
}
ƒƒ 
await
∆∆ 
_context
∆∆ 
.
∆∆ 
SaveChangesAsync
∆∆ /
(
∆∆/ 0
)
∆∆0 1
;
∆∆1 2
return
«« 
Json
«« 
(
«« 
new
«« 
{
««  !
success
««" )
=
««* +
true
««, 0
}
««1 2
)
««2 3
;
««3 4
}
»» 
catch
…… 
(
…… 
	Exception
…… 
ex
…… 
)
……  
{
   
_logger
ÀÀ 
.
ÀÀ 
LogError
ÀÀ  
(
ÀÀ  !
ex
ÀÀ! #
,
ÀÀ# $
$str
ÀÀ% R
)
ÀÀR S
;
ÀÀS T
return
ÃÃ 
Json
ÃÃ 
(
ÃÃ 
new
ÃÃ 
{
ÃÃ  !
success
ÃÃ" )
=
ÃÃ* +
false
ÃÃ, 1
,
ÃÃ1 2
error
ÃÃ3 8
=
ÃÃ9 :
ex
ÃÃ; =
.
ÃÃ= >
Message
ÃÃ> E
}
ÃÃF G
)
ÃÃG H
;
ÃÃH I
}
ÕÕ 
}
ŒŒ 	
[
–– 	
HttpGet
––	 
]
–– 
[
—— 	
	Authorize
——	 
(
—— 
Roles
—— 
=
—— 
$str
—— %
)
——% &
]
——& '
public
““ 
async
““ 
Task
““ 
<
““ 
IActionResult
““ '
>
““' ($
VerificarNuevosPedidos
““) ?
(
““? @
)
““@ A
{
”” 	
try
‘‘ 
{
’’ 
var
÷÷ 
user
÷÷ 
=
÷÷ 
await
÷÷  
_userManager
÷÷! -
.
÷÷- .
GetUserAsync
÷÷. :
(
÷÷: ;
User
÷÷; ?
)
÷÷? @
;
÷÷@ A
if
◊◊ 
(
◊◊ 
user
◊◊ 
==
◊◊ 
null
◊◊  
)
◊◊  !
return
◊◊" (
Unauthorized
◊◊) 5
(
◊◊5 6
new
◊◊6 9
{
◊◊: ;
success
◊◊< C
=
◊◊D E
false
◊◊F K
,
◊◊K L
message
◊◊M T
=
◊◊U V
$str
◊◊W o
}
◊◊p q
)
◊◊q r
;
◊◊r s
var
⁄⁄  
ultimaVerificacion
⁄⁄ &
=
⁄⁄' (
DateTime
⁄⁄) 1
.
⁄⁄1 2
UtcNow
⁄⁄2 8
.
⁄⁄8 9
AddHours
⁄⁄9 A
(
⁄⁄A B
-
⁄⁄B C
$num
⁄⁄C E
)
⁄⁄E F
;
⁄⁄F G
var
‹‹ 
nuevosPedidos
‹‹ !
=
‹‹" #
await
‹‹$ )
_context
‹‹* 2
.
‹‹2 3
Pedidos
‹‹3 :
.
›› 
Where
›› 
(
›› 
p
›› 
=>
›› 
p
››  !
.
››! "
FechaEmision
››" .
>=
››/ 1 
ultimaVerificacion
››2 D
&&
››E G
p
››H I
.
››I J
Status
››J P
==
››Q S
$str
››T _
)
››_ `
.
ﬁﬁ 
Include
ﬁﬁ 
(
ﬁﬁ 
p
ﬁﬁ 
=>
ﬁﬁ !
p
ﬁﬁ" #
.
ﬁﬁ# $
Cliente
ﬁﬁ$ +
)
ﬁﬁ+ ,
.
ﬂﬂ 
ToListAsync
ﬂﬂ  
(
ﬂﬂ  !
)
ﬂﬂ! "
;
ﬂﬂ" #
var
‚‚ 

vendedores
‚‚ 
=
‚‚  
await
‚‚! &
_userManager
‚‚' 3
.
‚‚3 4!
GetUsersInRoleAsync
‚‚4 G
(
‚‚G H
$str
‚‚H R
)
‚‚R S
;
‚‚S T
foreach
‰‰ 
(
‰‰ 
var
‰‰ 
pedido
‰‰ #
in
‰‰$ &
nuevosPedidos
‰‰' 4
)
‰‰4 5
{
ÂÂ 
foreach
ÊÊ 
(
ÊÊ 
var
ÊÊ  
vendedor
ÊÊ! )
in
ÊÊ* ,

vendedores
ÊÊ- 7
)
ÊÊ7 8
{
ÁÁ 
var
ËË #
notificacionExistente
ËË 1
=
ËË2 3
await
ËË4 9
_context
ËË: B
.
ËËB C
Notificaciones
ËËC Q
.
ÈÈ !
FirstOrDefaultAsync
ÈÈ 0
(
ÈÈ0 1
n
ÈÈ1 2
=>
ÈÈ3 5
n
ÈÈ6 7
.
ÈÈ7 8
PedidoId
ÈÈ8 @
==
ÈÈA C
pedido
ÈÈD J
.
ÈÈJ K
PedidoId
ÈÈK S
&&
ÈÈT V
n
ÍÍ0 1
.
ÍÍ1 2
	UsuarioId
ÍÍ2 ;
==
ÍÍ< >
vendedor
ÍÍ? G
.
ÍÍG H
Id
ÍÍH J
&&
ÍÍK M
n
ÎÎ0 1
.
ÎÎ1 2
Tipo
ÎÎ2 6
==
ÎÎ7 9
$str
ÎÎ: H
)
ÎÎH I
;
ÎÎI J
if
ÌÌ 
(
ÌÌ #
notificacionExistente
ÌÌ 1
==
ÌÌ2 4
null
ÌÌ5 9
)
ÌÌ9 :
{
ÓÓ 
var
ÔÔ 
notificacion
ÔÔ  ,
=
ÔÔ- .
new
ÔÔ/ 2
Notificacion
ÔÔ3 ?
{
 
	UsuarioId
ÒÒ  )
=
ÒÒ* +
vendedor
ÒÒ, 4
.
ÒÒ4 5
Id
ÒÒ5 7
,
ÒÒ7 8
Titulo
ÚÚ  &
=
ÚÚ' (
$str
ÚÚ) @
,
ÚÚ@ A
Mensaje
ÛÛ  '
=
ÛÛ( )
$"
ÛÛ* ,
$str
ÛÛ, 7
{
ÛÛ7 8
pedido
ÛÛ8 >
.
ÛÛ> ?
Cliente
ÛÛ? F
.
ÛÛF G
NombreEmpresa
ÛÛG T
??
ÛÛU W
$str
ÛÛX a
}
ÛÛa b
$strÛÛb Ö
{ÛÛÖ Ü
pedidoÛÛÜ å
.ÛÛå ç
PedidoIdÛÛç ï
}ÛÛï ñ
$strÛÛñ ó
"ÛÛó ò
,ÛÛò ô
Tipo
ÙÙ  $
=
ÙÙ% &
$str
ÙÙ' 5
,
ÙÙ5 6
PedidoId
ıı  (
=
ıı) *
pedido
ıı+ 1
.
ıı1 2
PedidoId
ıı2 :
,
ıı: ;
FechaCreacion
ˆˆ  -
=
ˆˆ. /
DateTime
ˆˆ0 8
.
ˆˆ8 9
UtcNow
ˆˆ9 ?
,
ˆˆ? @
Leida
˜˜  %
=
˜˜& '
false
˜˜( -
}
¯¯ 
;
¯¯ 
var
˘˘ !
notificacionCliente
˘˘  3
=
˘˘4 5
new
˘˘6 9
Notificacion
˘˘: F
{
˙˙ 
	UsuarioId
˚˚  )
=
˚˚* +
user
˚˚, 0
.
˚˚0 1
Id
˚˚1 3
,
˚˚3 4
Titulo
¸¸  &
=
¸¸' (
$str
¸¸) A
,
¸¸A B
Mensaje
˝˝  '
=
˝˝( )
$"
˝˝* ,
$str
˝˝, 7
{
˝˝7 8
pedido
˝˝8 >
.
˝˝> ?
PedidoId
˝˝? G
}
˝˝G H
$str
˝˝H g
"
˝˝g h
,
˝˝h i
Tipo
˛˛  $
=
˛˛% &
$str
˛˛' <
,
˛˛< =
PedidoId
ˇˇ  (
=
ˇˇ) *
pedido
ˇˇ+ 1
.
ˇˇ1 2
PedidoId
ˇˇ2 :
,
ˇˇ: ;
FechaCreacion
ÄÄ  -
=
ÄÄ. /
DateTime
ÄÄ0 8
.
ÄÄ8 9
UtcNow
ÄÄ9 ?
,
ÄÄ? @
Leida
ÅÅ  %
=
ÅÅ& '
false
ÅÅ( -
}
ÇÇ 
;
ÇÇ 
_context
ÉÉ $
.
ÉÉ$ %
Notificaciones
ÉÉ% 3
.
ÉÉ3 4
Add
ÉÉ4 7
(
ÉÉ7 8
notificacion
ÉÉ8 D
)
ÉÉD E
;
ÉÉE F
}
ÑÑ 
}
ÖÖ 
}
ÜÜ 
await
àà 
_context
àà 
.
àà 
SaveChangesAsync
àà /
(
àà/ 0
)
àà0 1
;
àà1 2
return
ää 
Json
ää 
(
ää 
new
ää 
{
ää  !
success
ãã 
=
ãã 
true
ãã "
,
ãã" #
data
åå 
=
åå 
nuevosPedidos
åå (
.
åå( )
Select
åå) /
(
åå/ 0
p
åå0 1
=>
åå2 4
new
åå5 8
{
åå9 :
pedidoId
çç  
=
çç! "
p
çç# $
.
çç$ %
PedidoId
çç% -
,
çç- .
clienteNombre
éé %
=
éé& '
p
éé( )
.
éé) *
Cliente
éé* 1
.
éé1 2
NombreEmpresa
éé2 ?
??
éé@ B
$str
ééC L
,
ééL M
fechaCreacion
èè %
=
èè& '
p
èè( )
.
èè) *
FechaEmision
èè* 6
.
èè6 7
ToString
èè7 ?
(
èè? @
$str
èè@ C
)
èèC D
}
êê 
)
êê 
}
ëë 
)
ëë 
;
ëë 
}
íí 
catch
ìì 
(
ìì 
	Exception
ìì 
ex
ìì 
)
ìì  
{
îî 
_logger
ïï 
.
ïï 
LogError
ïï  
(
ïï  !
ex
ïï! #
,
ïï# $
$str
ïï% H
)
ïïH I
;
ïïI J
return
ññ 
Json
ññ 
(
ññ 
new
ññ 
{
ññ  !
success
ññ" )
=
ññ* +
false
ññ, 1
,
ññ1 2
message
ññ3 :
=
ññ; <
$str
ññ= Y
}
ññZ [
)
ññ[ \
;
ññ\ ]
}
óó 
}
òò 	
[
ôô 	
HttpPost
ôô	 
]
ôô 
public
öö 
async
öö 
Task
öö 
<
öö 
IActionResult
öö '
>
öö' (
CrearPedido
öö) 4
(
öö4 5
[
öö5 6
FromBody
öö6 >
]
öö> ?
	PedidoDto
öö@ I
	pedidoDto
ööJ S
)
ööS T
{
õõ 	
using
úú 
var
úú 
transaction
úú !
=
úú" #
await
úú$ )
_context
úú* 2
.
úú2 3
Database
úú3 ;
.
úú; <#
BeginTransactionAsync
úú< Q
(
úúQ R
)
úúR S
;
úúS T
try
ùù 
{
ûû 
var
üü 
user
üü 
=
üü 
await
üü  
_userManager
üü! -
.
üü- .
GetUserAsync
üü. :
(
üü: ;
User
üü; ?
)
üü? @
;
üü@ A
if
†† 
(
†† 
user
†† 
==
†† 
null
††  
)
††  !
return
††" (
Unauthorized
††) 5
(
††5 6
)
††6 7
;
††7 8
var
¢¢ 
cliente
¢¢ 
=
¢¢ 
await
¢¢ #
_context
¢¢$ ,
.
¢¢, -
Clientes
¢¢- 5
.
¢¢5 6!
FirstOrDefaultAsync
¢¢6 I
(
¢¢I J
c
¢¢J K
=>
¢¢L N
c
¢¢O P
.
¢¢P Q
ApplicationUserId
¢¢Q b
==
¢¢c e
user
¢¢f j
.
¢¢j k
Id
¢¢k m
)
¢¢m n
;
¢¢n o
if
££ 
(
££ 
cliente
££ 
==
££ 
null
££ #
)
££# $
return
££% +

BadRequest
££, 6
(
££6 7
$str
££7 N
)
££N O
;
££O P
var
¶¶ 
pedido
¶¶ 
=
¶¶ 
new
¶¶  
Pedido
¶¶! '
{
ßß 
	ClienteId
®® 
=
®® 
cliente
®®  '
.
®®' (
	ClienteId
®®( 1
,
®®1 2
FechaEmision
©©  
=
©©! "
DateTime
©©# +
.
©©+ ,
UtcNow
©©, 2
,
©©2 3
Status
™™ 
=
™™ 
$str
™™ (
,
™™( )
Pago
´´ 
=
´´ 
$str
´´ &
,
´´& '
	Direccion
¨¨ 
=
¨¨ 
	pedidoDto
¨¨  )
.
¨¨) *
	Direccion
¨¨* 3
,
¨¨3 4
Total
≠≠ 
=
≠≠ 
	pedidoDto
≠≠ %
.
≠≠% &
Total
≠≠& +
}
ÆÆ 
;
ÆÆ 
_context
∞∞ 
.
∞∞ 
Pedidos
∞∞  
.
∞∞  !
Add
∞∞! $
(
∞∞$ %
pedido
∞∞% +
)
∞∞+ ,
;
∞∞, -
await
±± 
_context
±± 
.
±± 
SaveChangesAsync
±± /
(
±±/ 0
)
±±0 1
;
±±1 2
var
¥¥ !
notificacionCliente
¥¥ '
=
¥¥( )
new
¥¥* -
Notificacion
¥¥. :
{
µµ 
	UsuarioId
∂∂ 
=
∂∂ 
user
∂∂  $
.
∂∂$ %
Id
∂∂% '
,
∂∂' (
Titulo
∑∑ 
=
∑∑ 
$str
∑∑ 5
,
∑∑5 6
Mensaje
∏∏ 
=
∏∏ 
$"
∏∏  
$str
∏∏  +
{
∏∏+ ,
pedido
∏∏, 2
.
∏∏2 3
PedidoId
∏∏3 ;
}
∏∏; <
$str
∏∏< [
"
∏∏[ \
,
∏∏\ ]
Tipo
ππ 
=
ππ 
$str
ππ 0
,
ππ0 1
PedidoId
∫∫ 
=
∫∫ 
pedido
∫∫ %
.
∫∫% &
PedidoId
∫∫& .
,
∫∫. /
FechaCreacion
ªª !
=
ªª" #
DateTime
ªª$ ,
.
ªª, -
UtcNow
ªª- 3
,
ªª3 4
Leida
ºº 
=
ºº 
false
ºº !
}
ΩΩ 
;
ΩΩ 
_context
ææ 
.
ææ 
Notificaciones
ææ '
.
ææ' (
Add
ææ( +
(
ææ+ ,!
notificacionCliente
ææ, ?
)
ææ? @
;
ææ@ A
await
øø 
_context
øø 
.
øø 
SaveChangesAsync
øø /
(
øø/ 0
)
øø0 1
;
øø1 2
await
¡¡ 
transaction
¡¡ !
.
¡¡! "
CommitAsync
¡¡" -
(
¡¡- .
)
¡¡. /
;
¡¡/ 0
_logger
ƒƒ 
.
ƒƒ 
LogInformation
ƒƒ &
(
ƒƒ& '
$"
ƒƒ' )
$str
ƒƒ) U
{
ƒƒU V!
notificacionCliente
ƒƒV i
.
ƒƒi j
NotificacionId
ƒƒj x
}
ƒƒx y
"
ƒƒy z
)
ƒƒz {
;
ƒƒ{ |
return
∆∆ 
Json
∆∆ 
(
∆∆ 
new
∆∆ 
{
∆∆  !
success
«« 
=
«« 
true
«« "
,
««" #
pedidoId
»» 
=
»» 
pedido
»» %
.
»»% &
PedidoId
»»& .
,
»». /
notificacionId
…… "
=
……# $!
notificacionCliente
……% 8
.
……8 9
NotificacionId
……9 G
}
   
)
   
;
   
}
ÀÀ 
catch
ÃÃ 
(
ÃÃ 
	Exception
ÃÃ 
ex
ÃÃ 
)
ÃÃ  
{
ÕÕ 
await
ŒŒ 
transaction
ŒŒ !
.
ŒŒ! "
RollbackAsync
ŒŒ" /
(
ŒŒ/ 0
)
ŒŒ0 1
;
ŒŒ1 2
_logger
œœ 
.
œœ 
LogError
œœ  
(
œœ  !
ex
œœ! #
,
œœ# $
$str
œœ% M
)
œœM N
;
œœN O
return
–– 
Json
–– 
(
–– 
new
–– 
{
––  !
success
—— 
=
—— 
false
—— #
,
——# $
error
““ 
=
““ 
$str
““ 6
,
““6 7
detail
”” 
=
”” 
ex
”” 
.
””  
Message
””  '
}
‘‘ 
)
‘‘ 
;
‘‘ 
}
’’ 
}
÷÷ 	
[
◊◊ 	
HttpPost
◊◊	 
]
◊◊ 
[
ÿÿ 	
	Authorize
ÿÿ	 
]
ÿÿ 
public
ŸŸ 
async
ŸŸ 
Task
ŸŸ 
<
ŸŸ 
IActionResult
ŸŸ '
>
ŸŸ' (1
#CrearNotificacionConfirmacionPedido
ŸŸ) L
(
ŸŸL M
[
ŸŸM N
FromBody
ŸŸN V
]
ŸŸV W
NotificacionDto
ŸŸX g
notificacionDto
ŸŸh w
)
ŸŸw x
{
⁄⁄ 	
try
€€ 
{
‹‹ 
var
›› 
user
›› 
=
›› 
await
››  
_userManager
››! -
.
››- .
GetUserAsync
››. :
(
››: ;
User
››; ?
)
››? @
;
››@ A
if
ﬁﬁ 
(
ﬁﬁ 
user
ﬁﬁ 
==
ﬁﬁ 
null
ﬁﬁ  
)
ﬁﬁ  !
return
ﬁﬁ" (
Unauthorized
ﬁﬁ) 5
(
ﬁﬁ5 6
new
ﬁﬁ6 9
{
ﬁﬁ: ;
success
ﬁﬁ< C
=
ﬁﬁD E
false
ﬁﬁF K
,
ﬁﬁK L
message
ﬁﬁM T
=
ﬁﬁU V
$str
ﬁﬁW o
}
ﬁﬁp q
)
ﬁﬁq r
;
ﬁﬁr s
var
‡‡ 
notificacion
‡‡  
=
‡‡! "
new
‡‡# &
Notificacion
‡‡' 3
{
·· 
	UsuarioId
‚‚ 
=
‚‚ 
user
‚‚  $
.
‚‚$ %
Id
‚‚% '
,
‚‚' (
Titulo
„„ 
=
„„ 
notificacionDto
„„ ,
.
„„, -
titulo
„„- 3
??
„„4 6
$str
„„7 O
,
„„O P
Mensaje
‰‰ 
=
‰‰ 
notificacionDto
‰‰ -
.
‰‰- .
mensaje
‰‰. 5
??
‰‰6 8
$str
‰‰9 c
,
‰‰c d
Tipo
ÂÂ 
=
ÂÂ 
$str
ÂÂ 0
,
ÂÂ0 1
PedidoId
ÊÊ 
=
ÊÊ 
notificacionDto
ÊÊ .
.
ÊÊ. /
pedidoId
ÊÊ/ 7
,
ÊÊ7 8
FechaCreacion
ÁÁ !
=
ÁÁ" #
DateTime
ÁÁ$ ,
.
ÁÁ, -
UtcNow
ÁÁ- 3
,
ÁÁ3 4
Leida
ËË 
=
ËË 
false
ËË !
}
ÈÈ 
;
ÈÈ 
_context
ÎÎ 
.
ÎÎ 
Notificaciones
ÎÎ '
.
ÎÎ' (
Add
ÎÎ( +
(
ÎÎ+ ,
notificacion
ÎÎ, 8
)
ÎÎ8 9
;
ÎÎ9 :
await
ÏÏ 
_context
ÏÏ 
.
ÏÏ 
SaveChangesAsync
ÏÏ /
(
ÏÏ/ 0
)
ÏÏ0 1
;
ÏÏ1 2
return
ÓÓ 
Json
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ  !
success
ÓÓ" )
=
ÓÓ* +
true
ÓÓ, 0
,
ÓÓ0 1
notificacionId
ÓÓ2 @
=
ÓÓA B
notificacion
ÓÓC O
.
ÓÓO P
NotificacionId
ÓÓP ^
}
ÓÓ_ `
)
ÓÓ` a
;
ÓÓa b
}
ÔÔ 
catch
 
(
 
	Exception
 
ex
 
)
  
{
ÒÒ 
_logger
ÚÚ 
.
ÚÚ 
LogError
ÚÚ  
(
ÚÚ  !
ex
ÚÚ! #
,
ÚÚ# $
$str
ÚÚ% R
)
ÚÚR S
;
ÚÚS T
return
ÛÛ 
Json
ÛÛ 
(
ÛÛ 
new
ÛÛ 
{
ÛÛ  !
success
ÛÛ" )
=
ÛÛ* +
false
ÛÛ, 1
,
ÛÛ1 2
error
ÛÛ3 8
=
ÛÛ9 :
ex
ÛÛ; =
.
ÛÛ= >
Message
ÛÛ> E
}
ÛÛF G
)
ÛÛG H
;
ÛÛH I
}
ÙÙ 
}
ıı 	
}
ˆˆ 
}˜˜ ß…
FC:\Users\ACER\Desktop\GRINPLAS\Controllers\NotificacionesController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
[ 
	Authorize 
] 
public 

class $
NotificacionesController )
:* +

Controller, 6
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
public $
NotificacionesController '
(' ( 
ApplicationDbContext  
context! (
,( )
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< $
NotificacionesController ,
>, -
logger. 4
)4 5
{ 	
_context 
= 
context 
; 
_userManager 
= 
userManager &
;& '
} 	
["" 	
HttpGet""	 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (!
ObtenerNotificaciones##) >
(##> ?
)##? @
{$$ 	
var%% 
user%% 
=%% 
await%% 
_userManager%% )
.%%) *
GetUserAsync%%* 6
(%%6 7
User%%7 ;
)%%; <
;%%< =
if&& 
(&& 
user&& 
==&& 
null&& 
)&& 
return&& $
Json&&% )
(&&) *
new&&* -
{&&. /
success&&0 7
=&&8 9
false&&: ?
,&&? @
message&&A H
=&&I J
$str&&K c
}&&d e
)&&e f
;&&f g
var(( 
notificaciones(( 
=((  
await((! &
_context((' /
.((/ 0
Notificaciones((0 >
.)) 
Where)) 
()) 
n)) 
=>)) 
n)) 
.)) 
	UsuarioId)) '
==))( *
user))+ /
.))/ 0
Id))0 2
)))2 3
.** 
OrderByDescending** "
(**" #
n**# $
=>**% '
n**( )
.**) *
FechaCreacion*** 7
)**7 8
.++ 
Take++ 
(++ 
$num++ 
)++ 
.,, 
Select,, 
(,, 
n,, 
=>,, 
new,,  
{-- 
notificacionId.. "
=..# $
n..% &
...& '
NotificacionId..' 5
,..5 6
titulo// 
=// 
n// 
.// 
Titulo// %
,//% &
mensaje00 
=00 
n00 
.00  
Mensaje00  '
,00' (
fechaCreacion11 !
=11" #
n11$ %
.11% &
FechaCreacion11& 3
,113 4
tipo22 
=22 
n22 
.22 
Tipo22 !
,22" #
pedidoId33 
=33 
n33  
.33  !
PedidoId33! )
,33) *
leida44 
=44 
n44 
.44 
Leida44 #
,44# $
	usuarioId55 
=55 
n55  !
.55! "
	UsuarioId55" +
}66 
)66 
.77 
ToListAsync77 
(77 
)77 
;77 
return99 
Json99 
(99 
new99 
{99 
success99 %
=99& '
true99( ,
,99, -
data99. 2
=993 4
notificaciones995 C
}99D E
)99E F
;99F G
}:: 	
[>> 	
HttpGet>>	 
]>> 
public?? 
async?? 
Task?? 
<?? 
IActionResult?? '
>??' (
ContadorNoLeidas??) 9
(??9 :
)??: ;
{@@ 	
tryAA 
{BB 
varCC 
userCC 
=CC 
awaitCC  
_userManagerCC! -
.CC- .
GetUserAsyncCC. :
(CC: ;
UserCC; ?
)CC? @
;CC@ A
ifDD 
(DD 
userDD 
==DD 
nullDD  
)DD  !
returnDD" (
JsonDD) -
(DD- .
$numDD. /
)DD/ 0
;DD0 1
varFF 
countFF 
=FF 
awaitFF !
_contextFF" *
.FF* +
NotificacionesFF+ 9
.GG 
WhereGG 
(GG 
nGG 
=>GG 
nGG  !
.GG! "
	UsuarioIdGG" +
==GG, .
userGG/ 3
.GG3 4
IdGG4 6
&&GG7 9
!GG: ;
nGG; <
.GG< =
LeidaGG= B
)GGB C
.HH 

CountAsyncHH 
(HH  
)HH  !
;HH! "
returnJJ 
JsonJJ 
(JJ 
countJJ !
)JJ! "
;JJ" #
}KK 
catchLL 
(LL 
	ExceptionLL 
exLL 
)LL  
{MM 
returnOO 
JsonOO 
(OO 
$numOO 
)OO 
;OO 
}PP 
}QQ 	
[UU 	
HttpPostUU	 
]UU 
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
MarcarComoLeidaVV) 8
(VV8 9
[VV9 :
FromFormVV: B
]VVB C
intVVD G
idVVH J
)VVJ K
{WW 	
tryXX 
{YY 
var[[ 
notificacion[[  
=[[! "
await[[# (
_context[[) 1
.[[1 2
Notificaciones[[2 @
.[[@ A
	FindAsync[[A J
([[J K
id[[K M
)[[M N
;[[N O
if\\ 
(\\ 
notificacion\\  
==\\! #
null\\$ (
)\\( )
{]] 
return^^ 
NotFound^^ #
(^^# $
new^^$ '
{^^( )
success^^* 1
=^^2 3
false^^4 9
,^^9 :
message^^; B
=^^C D
$"^^E G
$str^^G c
{^^c d
id^^d f
}^^f g
"^^g h
}^^i j
)^^j k
;^^k l
}__ 
varbb 
userbb 
=bb 
awaitbb  
_userManagerbb! -
.bb- .
GetUserAsyncbb. :
(bb: ;
Userbb; ?
)bb? @
;bb@ A
ifcc 
(cc 
usercc 
==cc 
nullcc  
||cc! #
notificacioncc$ 0
.cc0 1
	UsuarioIdcc1 :
!=cc; =
usercc> B
.ccB C
IdccC E
)ccE F
{dd 
returnee 
Unauthorizedee '
(ee' (
newee( +
{ee, -
successee. 5
=ee6 7
falseee8 =
,ee= >
messageee? F
=eeG H
$streeI X
}eeY Z
)eeZ [
;ee[ \
}ff 
notificacionhh 
.hh 
Leidahh "
=hh# $
truehh% )
;hh) *
_contextii 
.ii 
Updateii 
(ii  
notificacionii  ,
)ii, -
;ii- .
awaitjj 
_contextjj 
.jj 
SaveChangesAsyncjj /
(jj/ 0
)jj0 1
;jj1 2
returnll 
Okll 
(ll 
newll 
{ll 
successll  '
=ll( )
truell* .
}ll/ 0
)ll0 1
;ll1 2
}mm 
catchnn 
(nn 
	Exceptionnn 
exnn 
)nn  
{oo 
returnpp 

StatusCodepp !
(pp! "
$numpp" %
,pp% &
newpp' *
{pp+ ,
successpp- 4
=pp5 6
falsepp7 <
,pp< =
messagepp> E
=ppF G
$strppH d
,ppd e
errorppf k
=ppl m
exppn p
.ppp q
Messageppq x
}ppy z
)ppz {
;pp{ |
}qq 
}rr 	
[vv 	
HttpPostvv	 
]vv 
publicww 
asyncww 
Taskww 
<ww 
IActionResultww '
>ww' (!
MarcarTodasComoLeidasww) >
(ww> ?
)ww? @
{xx 	
tryyy 
{zz 
var{{ 
user{{ 
={{ 
await{{  
_userManager{{! -
.{{- .
GetUserAsync{{. :
({{: ;
User{{; ?
){{? @
;{{@ A
if|| 
(|| 
user|| 
==|| 
null||  
)||  !
return||" (
Unauthorized||) 5
(||5 6
new||6 9
{||: ;
success||< C
=||D E
false||F K
,||K L
message||M T
=||U V
$str||W o
}||p q
)||q r
;||r s
var~~ 
notificaciones~~ "
=~~# $
await~~% *
_context~~+ 3
.~~3 4
Notificaciones~~4 B
. 
Where 
( 
n 
=> 
n  !
.! "
	UsuarioId" +
==, .
user/ 3
.3 4
Id4 6
&&7 9
!: ;
n; <
.< =
Leida= B
)B C
.
ÄÄ 
ToListAsync
ÄÄ  
(
ÄÄ  !
)
ÄÄ! "
;
ÄÄ" #
foreach
ÇÇ 
(
ÇÇ 
var
ÇÇ 
notificacion
ÇÇ )
in
ÇÇ* ,
notificaciones
ÇÇ- ;
)
ÇÇ; <
{
ÉÉ 
notificacion
ÑÑ  
.
ÑÑ  !
Leida
ÑÑ! &
=
ÑÑ' (
true
ÑÑ) -
;
ÑÑ- .
_context
ÖÖ 
.
ÖÖ 
Update
ÖÖ #
(
ÖÖ# $
notificacion
ÖÖ$ 0
)
ÖÖ0 1
;
ÖÖ1 2
}
ÜÜ 
await
àà 
_context
àà 
.
àà 
SaveChangesAsync
àà /
(
àà/ 0
)
àà0 1
;
àà1 2
return
ää 
Ok
ää 
(
ää 
new
ää 
{
ää 
success
ää  '
=
ää( )
true
ää* .
}
ää/ 0
)
ää0 1
;
ää1 2
}
ãã 
catch
åå 
(
åå 
	Exception
åå 
ex
åå 
)
åå  
{
çç 
return
éé 

StatusCode
éé !
(
éé! "
$num
éé" %
,
éé% &
new
éé' *
{
éé+ ,
success
éé- 4
=
éé5 6
false
éé7 <
,
éé< =
message
éé> E
=
ééF G
$str
ééH d
,
ééd e
error
ééf k
=
éél m
ex
één p
.
éép q
Message
ééq x
}
ééy z
)
ééz {
;
éé{ |
}
èè 
}
êê 	
[
îî 	
HttpGet
îî	 
]
îî 
public
ïï 
async
ïï 
Task
ïï 
<
ïï 
IActionResult
ïï '
>
ïï' (
Todas
ïï) .
(
ïï. /
)
ïï/ 0
{
ññ 	
var
óó 
user
óó 
=
óó 
await
óó 
_userManager
óó )
.
óó) *
GetUserAsync
óó* 6
(
óó6 7
User
óó7 ;
)
óó; <
;
óó< =
if
òò 
(
òò 
user
òò 
==
òò 
null
òò 
)
òò 
return
òò $
Unauthorized
òò% 1
(
òò1 2
new
òò2 5
{
òò6 7
success
òò8 ?
=
òò@ A
false
òòB G
,
òòG H
message
òòI P
=
òòQ R
$str
òòS k
}
òòl m
)
òòm n
;
òòn o
try
öö 
{
õõ 
var
úú 
notificaciones
úú "
=
úú# $
await
úú% *
_context
úú+ 3
.
úú3 4
Notificaciones
úú4 B
.
ùù 
Where
ùù 
(
ùù 
n
ùù 
=>
ùù 
n
ùù  !
.
ùù! "
	UsuarioId
ùù" +
==
ùù, .
user
ùù/ 3
.
ùù3 4
Id
ùù4 6
)
ùù6 7
.
ûû 
OrderByDescending
ûû &
(
ûû& '
n
ûû' (
=>
ûû) +
n
ûû, -
.
ûû- .
FechaCreacion
ûû. ;
)
ûû; <
.
üü 
Select
üü 
(
üü 
n
üü 
=>
üü  
new
üü! $
{
†† 
notificacionId
°° &
=
°°' (
n
°°) *
.
°°* +
NotificacionId
°°+ 9
,
°°9 :
titulo
¢¢ 
=
¢¢  
n
¢¢! "
.
¢¢" #
Titulo
¢¢# )
??
¢¢* ,
$str
¢¢- 9
,
¢¢9 :
mensaje
££ 
=
££  !
n
££" #
.
££# $
Mensaje
££$ +
??
££, .
$str
££/ <
,
££< =
fechaCreacion
§§ %
=
§§& '
n
§§( )
.
§§) *
FechaCreacion
§§* 7
,
§§7 8
tipo
•• 
=
•• 
n
••  
.
••  !
Tipo
••! %
??
••& (
$str
••) 2
,
••2 3
pedidoId
¶¶  
=
¶¶! "
n
¶¶# $
.
¶¶$ %
PedidoId
¶¶% -
,
¶¶- .
leida
ßß 
=
ßß 
n
ßß  !
.
ßß! "
Leida
ßß" '
}
®® 
)
®® 
.
©© 
ToListAsync
©©  
(
©©  !
)
©©! "
;
©©" #
return
´´ 
Json
´´ 
(
´´ 
new
´´ 
{
¨¨ 
success
≠≠ 
=
≠≠ 
true
≠≠ "
,
≠≠" #
data
ÆÆ 
=
ÆÆ 
notificaciones
ÆÆ )
,
ÆÆ) *
count
ØØ 
=
ØØ 
notificaciones
ØØ *
.
ØØ* +
Count
ØØ+ 0
}
∞∞ 
)
∞∞ 
;
∞∞ 
}
±± 
catch
≤≤ 
(
≤≤ 
	Exception
≤≤ 
ex
≤≤ 
)
≤≤  
{
≥≥ 
return
¥¥ 
Json
¥¥ 
(
¥¥ 
new
¥¥ 
{
¥¥  !
success
¥¥" )
=
¥¥* +
false
¥¥, 1
,
¥¥1 2
message
¥¥3 :
=
¥¥; <
$str
¥¥= Y
}
¥¥Z [
)
¥¥[ \
;
¥¥\ ]
}
µµ 
}
∂∂ 	
[
∫∫ 	
HttpGet
∫∫	 
]
∫∫ 
public
ªª 
async
ªª 
Task
ªª 
<
ªª 
IActionResult
ªª '
>
ªª' (+
ObtenerNotificacionesNoLeidas
ªª) F
(
ªªF G
)
ªªG H
{
ºº 	
var
ΩΩ 
user
ΩΩ 
=
ΩΩ 
await
ΩΩ 
_userManager
ΩΩ )
.
ΩΩ) *
GetUserAsync
ΩΩ* 6
(
ΩΩ6 7
User
ΩΩ7 ;
)
ΩΩ; <
;
ΩΩ< =
if
ææ 
(
ææ 
user
ææ 
==
ææ 
null
ææ 
)
ææ 
return
ææ $
Json
ææ% )
(
ææ) *
new
ææ* -
{
ææ. /
success
ææ0 7
=
ææ8 9
false
ææ: ?
,
ææ? @
message
ææA H
=
ææI J
$str
ææK c
}
ææd e
)
ææe f
;
ææf g
var
¿¿ 
notificaciones
¿¿ 
=
¿¿  
await
¿¿! &
_context
¿¿' /
.
¿¿/ 0
Notificaciones
¿¿0 >
.
¡¡ 
Where
¡¡ 
(
¡¡ 
n
¡¡ 
=>
¡¡ 
n
¡¡ 
.
¡¡ 
	UsuarioId
¡¡ '
==
¡¡( *
user
¡¡+ /
.
¡¡/ 0
Id
¡¡0 2
&&
¡¡3 5
!
¡¡6 7
n
¡¡7 8
.
¡¡8 9
Leida
¡¡9 >
)
¡¡> ?
.
¬¬ 
OrderByDescending
¬¬ "
(
¬¬" #
n
¬¬# $
=>
¬¬% '
n
¬¬( )
.
¬¬) *
FechaCreacion
¬¬* 7
)
¬¬7 8
.
√√ 
Take
√√ 
(
√√ 
$num
√√ 
)
√√ 
.
ƒƒ 
Select
ƒƒ 
(
ƒƒ 
n
ƒƒ 
=>
ƒƒ 
new
ƒƒ  
{
≈≈ 
notificacionId
∆∆ "
=
∆∆# $
n
∆∆% &
.
∆∆& '
NotificacionId
∆∆' 5
,
∆∆5 6
titulo
«« 
=
«« 
n
«« 
.
«« 
Titulo
«« %
,
««% &
mensaje
»» 
=
»» 
n
»» 
.
»»  
Mensaje
»»  '
,
»»' (
fechaCreacion
…… !
=
……" #
n
……$ %
.
……% &
FechaCreacion
……& 3
,
……3 4
tipo
   
=
   
(
   
n
   
.
   
Tipo
   "
??
  # %
$str
  & /
)
  / 0
.
  0 1
ToLower
  1 8
(
  8 9
)
  9 :
,
  : ;
pedidoId
ÀÀ 
=
ÀÀ 
n
ÀÀ  
.
ÀÀ  !
PedidoId
ÀÀ! )
,
ÀÀ) *
leida
ÃÃ 
=
ÃÃ 
n
ÃÃ 
.
ÃÃ 
Leida
ÃÃ #
,
ÃÃ# $
	usuarioId
ÕÕ 
=
ÕÕ 
n
ÕÕ  !
.
ÕÕ! "
	UsuarioId
ÕÕ" +
}
ŒŒ 
)
ŒŒ 
.
œœ 
ToListAsync
œœ 
(
œœ 
)
œœ 
;
œœ 
return
—— 
Json
—— 
(
—— 
new
—— 
{
—— 
success
—— %
=
——& '
true
——( ,
,
——, -
data
——. 2
=
——3 4
notificaciones
——5 C
}
——D E
)
——E F
;
——F G
}
““ 	
public
”” 
async
”” 
Task
”” 
<
”” 
IActionResult
”” '
>
””' (
CrearNotificacion
””) :
(
””: ;
string
””; A
	usuarioId
””B K
,
””K L
string
””M S
titulo
””T Z
,
””Z [
string
””\ b
mensaje
””c j
,
””j k
string
””l r
tipo
””s w
,
””w x
int
””y |
?
””| }
pedidoId””~ Ü
=””á à
null””â ç
)””ç é
{
‘‘ 
try
’’ 
{
÷÷ 	
var
ÿÿ 
usuario
ÿÿ 
=
ÿÿ 
await
ÿÿ 
_userManager
ÿÿ  ,
.
ÿÿ, -
FindByIdAsync
ÿÿ- :
(
ÿÿ: ;
	usuarioId
ÿÿ; D
)
ÿÿD E
;
ÿÿE F
if
ŸŸ 
(
ŸŸ 
usuario
ŸŸ 
==
ŸŸ 
null
ŸŸ 
)
ŸŸ  
{
⁄⁄ 
return
‹‹ 
NotFound
‹‹ 
(
‹‹  
$str
‹‹  7
)
‹‹7 8
;
‹‹8 9
}
›› 
var
ﬂﬂ 
notificacion
ﬂﬂ 
=
ﬂﬂ 
new
ﬂﬂ "
Notificacion
ﬂﬂ# /
{
‡‡ 
	UsuarioId
·· 
=
·· 
	usuarioId
·· %
,
··% &
Titulo
‚‚ 
=
‚‚ 
titulo
‚‚ 
,
‚‚  
Mensaje
„„ 
=
„„ 
mensaje
„„ !
,
„„! "
Tipo
‰‰ 
=
‰‰ 
tipo
‰‰ 
,
‰‰ 
PedidoId
ÂÂ 
=
ÂÂ 
pedidoId
ÂÂ #
,
ÂÂ# $
FechaCreacion
ÊÊ 
=
ÊÊ 
DateTime
ÊÊ  (
.
ÊÊ( )
UtcNow
ÊÊ) /
,
ÊÊ/ 0
Leida
ÁÁ 
=
ÁÁ 
false
ÁÁ 
}
ËË 
;
ËË 
_context
ÍÍ 
.
ÍÍ 
Notificaciones
ÍÍ #
.
ÍÍ# $
Add
ÍÍ$ '
(
ÍÍ' (
notificacion
ÍÍ( 4
)
ÍÍ4 5
;
ÍÍ5 6
await
ÎÎ 
_context
ÎÎ 
.
ÎÎ 
SaveChangesAsync
ÎÎ +
(
ÎÎ+ ,
)
ÎÎ, -
;
ÎÎ- .
return
ÓÓ 
Ok
ÓÓ 
(
ÓÓ 
new
ÓÓ 
{
ÓÓ 
success
ÓÓ #
=
ÓÓ$ %
true
ÓÓ& *
,
ÓÓ* +
notificacionId
ÓÓ, :
=
ÓÓ; <
notificacion
ÓÓ= I
.
ÓÓI J
NotificacionId
ÓÓJ X
}
ÓÓY Z
)
ÓÓZ [
;
ÓÓ[ \
}
ÔÔ 	
catch
 
(
 
	Exception
 
ex
 
)
 
{
ÒÒ 	
return
ÛÛ 

StatusCode
ÛÛ 
(
ÛÛ 
$num
ÛÛ !
,
ÛÛ! "
$str
ÛÛ# H
)
ÛÛH I
;
ÛÛI J
}
ÙÙ 	
}
ıı 
[
ˆˆ 	
HttpPost
ˆˆ	 
]
ˆˆ 
[
˜˜ 	
	Authorize
˜˜	 
(
˜˜ 
Roles
˜˜ 
=
˜˜ 
$str
˜˜ *
)
˜˜* +
]
˜˜+ ,
public
¯¯ 
async
¯¯ 
Task
¯¯ 
<
¯¯ 
IActionResult
¯¯ '
>
¯¯' (,
GenerarNotificacionesStockBajo
¯¯) G
(
¯¯G H
)
¯¯H I
{
˘˘ 	
var
˚˚ 
user
˚˚ 
=
˚˚ 
await
˚˚ 
_userManager
˚˚ )
.
˚˚) *
GetUserAsync
˚˚* 6
(
˚˚6 7
User
˚˚7 ;
)
˚˚; <
;
˚˚< =
if
¸¸ 
(
¸¸ 
user
¸¸ 
==
¸¸ 
null
¸¸ 
)
¸¸ 
return
¸¸ $
Unauthorized
¸¸% 1
(
¸¸1 2
new
¸¸2 5
{
¸¸6 7
success
¸¸8 ?
=
¸¸@ A
false
¸¸B G
,
¸¸G H
message
¸¸I P
=
¸¸Q R
$str
¸¸S k
}
¸¸l m
)
¸¸m n
;
¸¸n o
var
ˇˇ  
productosBajoStock
ˇˇ "
=
ˇˇ# $
await
ˇˇ% *
_context
ˇˇ+ 3
.
ˇˇ3 4
	Productos
ˇˇ4 =
.
ÄÄ 
Where
ÄÄ 
(
ÄÄ 
p
ÄÄ 
=>
ÄÄ 
p
ÄÄ 
.
ÄÄ 
Stock
ÄÄ #
<=
ÄÄ$ &
$num
ÄÄ' (
)
ÄÄ( )
.
ÅÅ 
ToListAsync
ÅÅ 
(
ÅÅ 
)
ÅÅ 
;
ÅÅ 
int
ÉÉ 
creadas
ÉÉ 
=
ÉÉ 
$num
ÉÉ 
;
ÉÉ 
foreach
ÑÑ 
(
ÑÑ 
var
ÑÑ 
producto
ÑÑ !
in
ÑÑ" $ 
productosBajoStock
ÑÑ% 7
)
ÑÑ7 8
{
ÖÖ 
var
áá &
notificacionesAnteriores
áá ,
=
áá- .
await
áá/ 4
_context
áá5 =
.
áá= >
Notificaciones
áá> L
.
àà 
Where
àà 
(
àà 
n
àà 
=>
àà 
n
àà  !
.
àà! "
	UsuarioId
àà" +
==
àà, .
user
àà/ 3
.
àà3 4
Id
àà4 6
&&
ââ 
n
ââ 
.
ââ 
Tipo
ââ !
==
ââ" $
$str
ââ% 1
&&
ää 
n
ää 
.
ää 
Mensaje
ää $
.
ää$ %
Contains
ää% -
(
ää- .
producto
ää. 6
.
ää6 7
Nombre
ää7 =
)
ää= >
)
ää> ?
.
ãã 
ToListAsync
ãã  
(
ãã  !
)
ãã! "
;
ãã" #
if
çç 
(
çç &
notificacionesAnteriores
çç ,
.
çç, -
Any
çç- 0
(
çç0 1
)
çç1 2
)
çç2 3
{
éé 
_context
èè 
.
èè 
Notificaciones
èè +
.
èè+ ,
RemoveRange
èè, 7
(
èè7 8&
notificacionesAnteriores
èè8 P
)
èèP Q
;
èèQ R
}
êê 
var
ìì 
notificacion
ìì  
=
ìì! "
new
ìì# &
Notificacion
ìì' 3
{
îî 
	UsuarioId
ïï 
=
ïï 
user
ïï  $
.
ïï$ %
Id
ïï% '
,
ïï' (
Titulo
ññ 
=
ññ 
$str
ññ %
,
ññ% &
Mensaje
óó 
=
óó 
$"
óó  
$str
óó  +
{
óó+ ,
producto
óó, 4
.
óó4 5
Stock
óó5 :
}
óó: ;
$str
óó; B
{
óóB C
(
óóC D
producto
óóD L
.
óóL M
Stock
óóM R
==
óóS U
$num
óóV W
?
óóX Y
$str
óóZ \
:
óó] ^
$str
óó_ c
)
óóc d
}
óód e
$str
óóe u
{
óóu v
producto
óóv ~
.
óó~ 
Nombreóó Ö
}óóÖ Ü
$stróóÜ â
"óóâ ä
,óóä ã
Tipo
òò 
=
òò 
$str
òò '
,
òò' (
PedidoId
ôô 
=
ôô 
null
ôô #
,
ôô# $
FechaCreacion
öö !
=
öö" #
DateTime
öö$ ,
.
öö, -
UtcNow
öö- 3
,
öö3 4
Leida
õõ 
=
õõ 
false
õõ !
}
úú 
;
úú 
_context
ùù 
.
ùù 
Notificaciones
ùù '
.
ùù' (
Add
ùù( +
(
ùù+ ,
notificacion
ùù, 8
)
ùù8 9
;
ùù9 :
creadas
ûû 
++
ûû 
;
ûû 
}
üü 
await
†† 
_context
†† 
.
†† 
SaveChangesAsync
†† +
(
††+ ,
)
††, -
;
††- .
return
¢¢ 
Json
¢¢ 
(
¢¢ 
new
¢¢ 
{
¢¢ 
success
¢¢ %
=
¢¢& '
true
¢¢( ,
,
¢¢, -
creadas
¢¢. 5
}
¢¢6 7
)
¢¢7 8
;
¢¢8 9
}
££ 	
}
§§ 
}•• ë
CC:\Users\ACER\Desktop\GRINPLAS\Controllers\InicioGerenController.cs
	namespace		 	
GRINPLAS		
 
.		 
Controllers		 
{

 
public 

class !
InicioGerenController &
:' (

Controller) 3
{ 
private 
readonly 
ILogger  
<  !!
InicioGerenController! 6
>6 7
_logger8 ?
;? @
public !
InicioGerenController $
($ %
ILogger% ,
<, -!
InicioGerenController- B
>B C
loggerD J
)J K
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
InicioGerente *
(* +
)+ ,
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public 
IActionResult 
Error "
(" #
)# $
{ 	
return 
View 
( 
$str  
)  !
;! "
} 	
} 
}   á
BC:\Users\ACER\Desktop\GRINPLAS\Controllers\InicioAdmiController.cs
	namespace		 	
GRINPLAS		
 
.		 
Controllers		 
{

 
public 

class  
InicioAdmiController %
:& '

Controller( 2
{ 
private 
readonly 
ILogger  
<  ! 
InicioAdmiController! 5
>5 6
_logger7 >
;> ?
public  
InicioAdmiController #
(# $
ILogger$ +
<+ , 
InicioAdmiController, @
>@ A
loggerB H
)H I
{ 	
_logger 
= 
logger 
; 
} 	
public 
IActionResult 
Inicio #
(# $
)$ %
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
HttpGet	 
] 
public	 
IActionResult 
TyC !
(! "
)" #
{ 	
return 
View 
( 
) 
; 
} 	
[ 	
ResponseCache	 
( 
Duration 
=  !
$num" #
,# $
Location% -
=. /!
ResponseCacheLocation0 E
.E F
NoneF J
,J K
NoStoreL S
=T U
trueV Z
)Z [
][ \
public   
IActionResult   
Error   "
(  " #
)  # $
{!! 	
return"" 
View"" 
("" 
$str""  
)""  !
;""! "
}## 	
}$$ 
}%% ±5
<C:\Users\ACER\Desktop\GRINPLAS\Controllers\HomeController.cs
	namespace		 	
GRINPLAS		
 
.		 
Controllers		 
;		 
public 
class 
HomeController 
: 

Controller (
{ 
private 
readonly  
ApplicationDbContext )
_context* 2
;2 3
private 
readonly 
UserManager  
<  !
ApplicationUser! 0
>0 1
_userManager2 >
;> ?
public 

HomeController 
(  
ApplicationDbContext .
context/ 6
,6 7
UserManager8 C
<C D
ApplicationUserD S
>S T
userManagerU `
)` a
{ 
_context 
= 
context 
; 
_userManager 
= 
userManager "
;" #
} 
[ 
	Authorize 
] 
public 

async 
Task 
< 
IActionResult #
># $
PerfilCliente% 2
(2 3
)3 4
{ 
var 
userId 
= 
_userManager !
.! "
	GetUserId" +
(+ ,
User, 0
)0 1
;1 2
var 
cliente 
= 
await 
_context $
.$ %
Clientes% -
. 
Include 
( 
c 
=> 
c 
. 
User  
)  !
. 
FirstOrDefaultAsync  
(  !
c! "
=># %
c& '
.' (
ApplicationUserId( 9
==: <
userId= C
)C D
;D E
if 

( 
cliente 
== 
null 
) 
{   	
var!! 
user!! 
=!! 
await!! 
_userManager!! )
.!!) *
GetUserAsync!!* 6
(!!6 7
User!!7 ;
)!!; <
;!!< =
cliente"" 
="" 
new"" 
Cliente"" !
{## 
ApplicationUserId$$ !
=$$" #
userId$$$ *
,$$* +
User%% 
=%% 
user%% 
,%% 
NombreEmpresa&& 
=&& 
$str&&  1
,&&1 2
TipDoc'' 
='' 
$str'' *
,''* +
NumDoc(( 
=(( 
$str(( *
,((* +
Telefono)) 
=)) 
$str)) ,
}** 
;** 
_context++ 
.++ 
Clientes++ 
.++ 
Add++ !
(++! "
cliente++" )
)++) *
;++* +
await,, 
_context,, 
.,, 
SaveChangesAsync,, +
(,,+ ,
),,, -
;,,- .
}-- 	
return// 
View// 
(// 
cliente// 
)// 
;// 
}00 
public22 

IActionResult22 
HistorialCliente22 )
(22) *
)22* +
{33 
var44 
clientes44 
=44 
_context44 
.44  
Clientes44  (
.44( )
Include44) 0
(440 1
c441 2
=>443 5
c446 7
.447 8
User448 <
)44< =
.44= >
ToList44> D
(44D E
)44E F
;44F G
return55 
View55 
(55 
clientes55 
)55 
;55 
}66 
public88 

IActionResult88 
Index88 
(88 
)88  
{99 
return:: 
View:: 
(:: 
):: 
;:: 
};; 
[<< 
HttpPost<< 
]<< 
[== $
ValidateAntiForgeryToken== 
]== 
public>> 

async>> 
Task>> 
<>> 
IActionResult>> #
>>># $
EnviarComentario>>% 5
(>>5 6
Comentarios>>6 A

comentario>>B L
)>>L M
{?? 
if@@ 

(@@ 

ModelState@@ 
.@@ 
IsValid@@ 
)@@ 
{AA 	
_contextBB 
.BB 
ComentariosBB  
.BB  !
AddBB! $
(BB$ %

comentarioBB% /
)BB/ 0
;BB0 1
awaitCC 
_contextCC 
.CC 
SaveChangesAsyncCC +
(CC+ ,
)CC, -
;CC- .
TempDataEE 
[EE 
$strEE 
]EE 
=EE  !
$strEE" G
;EEG H
returnFF 
RedirectToActionFF #
(FF# $
nameofFF$ *
(FF* +
IndexFF+ 0
)FF0 1
)FF1 2
;FF2 3
}GG 	
TempDataII 
[II 
$strII 
]II 
=II 
$strII [
;II[ \
returnJJ 
RedirectToActionJJ 
(JJ  
nameofJJ  &
(JJ& '
IndexJJ' ,
)JJ, -
)JJ- .
;JJ. /
}KK 
publicLL 

IActionResultLL 
InformacionLL $
(LL$ %
)LL% &
{MM 
returnNN 
ViewNN 
(NN 
)NN 
;NN 
}OO 
publicPP 

IActionResultPP 
ProcesosPP !
(PP! "
)PP" #
{QQ 
returnRR 
ViewRR 
(RR 
)RR 
;RR 
}SS 
publicTT 

IActionResultTT 
PrivacyTT  
(TT  !
)TT! "
{UU 
returnVV 
ViewVV 
(VV 
)VV 
;VV 
}WW 
[YY 
ResponseCacheYY 
(YY 
DurationYY 
=YY 
$numYY 
,YY  
LocationYY! )
=YY* +!
ResponseCacheLocationYY, A
.YYA B
NoneYYB F
,YYF G
NoStoreYYH O
=YYP Q
trueYYR V
)YYV W
]YYW X
publicZZ 

IActionResultZZ 
ErrorZZ 
(ZZ 
)ZZ  
{[[ 
return\\ 
View\\ 
(\\ 
new\\ 
ErrorViewModel\\ &
{\\' (
	RequestId\\) 2
=\\3 4
Activity\\5 =
.\\= >
Current\\> E
?\\E F
.\\F G
Id\\G I
??\\J L
HttpContext\\M X
.\\X Y
TraceIdentifier\\Y h
}\\i j
)\\j k
;\\k l
}]] 
}^^ ◊
IC:\Users\ACER\Desktop\GRINPLAS\Controllers\HistorialReclamosController.cs
	namespace

 	
GRINPLAS


 
.

 
Controllers

 
{ 
public 

class '
HistorialReclamosController ,
:- .

Controller/ 9
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public '
HistorialReclamosController *
(* + 
ApplicationDbContext+ ?
context@ G
)G H
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
userId 
= 
User 
. 
FindFirstValue ,
(, -

ClaimTypes- 7
.7 8
NameIdentifier8 F
)F G
;G H
if 
( 
string 
. 
IsNullOrEmpty $
($ %
userId% +
)+ ,
), -
{ 
return 
RedirectToAction '
(' (
$str( /
,/ 0
$str1 :
): ;
;; <
} 
var 
cliente 
= 
await 
_context  (
.( )
Clientes) 1
. 
FirstOrDefaultAsync $
($ %
c% &
=>' )
c* +
.+ ,
ApplicationUserId, =
==> @
userIdA G
)G H
;H I
if   
(   
cliente   
==   
null   
)    
{!! 
return"" 
NotFound"" 
(""  
)""  !
;""! "
}## 
var%% 
reclamos%% 
=%% 
await%%  
_context%%! )
.%%) *
Reclamaciones%%* 7
.&& 
Where&& 
(&& 
r&& 
=>&& 
r&& 
.&& 
	ClienteId&& '
==&&( *
cliente&&+ 2
.&&2 3
	ClienteId&&3 <
)&&< =
.'' 
OrderByDescending'' "
(''" #
r''# $
=>''% '
r''( )
.'') *
FechaCreacion''* 7
)''7 8
.(( 
ToListAsync(( 
((( 
)(( 
;(( 
return** 
View** 
(** 
$str** O
,**O P
reclamos**Q Y
??**Z \
new**] `
List**a e
<**e f
Reclamaciones**f s
>**s t
(**t u
)**u v
)**v w
;**w x
}++ 	
},, 
}-- ‹
HC:\Users\ACER\Desktop\GRINPLAS\Controllers\HistorialPedidosController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
[ 
	Authorize 
] 
public 

class &
HistorialPedidosController +
:, -

Controller. 8
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
public &
HistorialPedidosController )
() * 
ApplicationDbContext* >
context? F
,F G
UserManagerH S
<S T
ApplicationUserT c
>c d
userManagere p
)p q
{ 	
_context 
= 
context 
; 
_userManager 
= 
userManager &
;& '
} 	
public 
async 
Task !
<! "
IActionResult" /
>/ 0
Index1 6
(6 7
)7 8
{ 	
var 
userId 
= 
User 
. 
FindFirstValue ,
(, -

ClaimTypes- 7
.7 8
NameIdentifier8 F
)F G
;G H
if 
( 
userId 
== 
null 
) 
{ 
return 
Unauthorized #
(# $
)$ %
;% &
} 
var!! 
cliente!! 
=!! 
await!! 
_context!!  (
.!!( )
Clientes!!) 1
."" 
FirstOrDefaultAsync"" $
(""$ %
c""% &
=>""' )
c""* +
.""+ ,
ApplicationUserId"", =
==""> @
userId""A G
)""G H
;""H I
if$$ 
($$ 
cliente$$ 
==$$ 
null$$ 
)$$  
{%% 
return'' 
View'' 
('' 
new'' 
List''  $
<''$ %
Pedido''% +
>''+ ,
('', -
)''- .
)''. /
;''/ 0
})) 
var++ 
pedidos++ 
=++ 
await++ 
_context++  (
.++( )
Pedidos++) 0
.,, 
Include,, 
(,, 
p,, 
=>,, 
p,, 
.,,  
Cliente,,  '
),,' (
.-- 
Where-- 
(-- 
p-- 
=>-- 
p-- 
.-- 
	ClienteId-- '
==--( *
cliente--+ 2
.--2 3
	ClienteId--3 <
)--< =
... 
OrderByDescending.. "
(.." #
p..# $
=>..% '
p..( )
...) *
FechaEntrega..* 6
)..6 7
.// 
ToListAsync// 
(// 
)// 
;// 
return11 
View11 
(11 
pedidos11 
)11  
;11  !
}22 	
}44 
}55 ¿á
FC:\Users\ACER\Desktop\GRINPLAS\Controllers\EstadoContableController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
[ 
	Authorize 
] 
public 

class $
EstadoContableController )
:* +

Controller, 6
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
int 
	_pageSize &
=' (
$num) *
;* +
public $
EstadoContableController '
(' ( 
ApplicationDbContext( <
context= D
)D E
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
DateTime/ 7
?7 8
fechaInicio9 D
,D E
DateTimeF N
?N O
fechaFinP X
,X Y
intZ ]

pageNumber^ h
=i j
$numk l
)l m
{ 	
var 
query 
= 
_context  
.  !
Gastos! '
.' (
AsQueryable( 3
(3 4
)4 5
;5 6
decimal   
totalIngresos   !
;  ! "
decimal!! 
totalGastos!! 
;!!  
if## 
(## 
fechaInicio## 
.## 
HasValue## $
&&##% '
fechaFin##( 0
.##0 1
HasValue##1 9
)##9 :
{$$ 
ViewBag%% 
.%% 
FechaInicio%% #
=%%$ %
fechaInicio%%& 1
.%%1 2
Value%%2 7
.%%7 8
ToString%%8 @
(%%@ A
$str%%A M
)%%M N
;%%N O
ViewBag&& 
.&& 
FechaFin&&  
=&&! "
fechaFin&&# +
.&&+ ,
Value&&, 1
.&&1 2
ToString&&2 :
(&&: ;
$str&&; G
)&&G H
;&&H I
query)) 
=)) 
query)) 
.)) 
Where)) #
())# $
g))$ %
=>))& (
g))) *
.))* +
Fecha))+ 0
.))0 1
Date))1 5
>=))6 8
fechaInicio))9 D
.))D E
Value))E J
.))J K
Date))K O
&&))P R
g**( )
.**) *
Fecha*** /
.**/ 0
Date**0 4
<=**5 7
fechaFin**8 @
.**@ A
Value**A F
.**F G
Date**G K
)**K L
;**L M
totalIngresos-- 
=-- 
await--  %
_context--& .
.--. /
Pedidos--/ 6
... 
Where.. 
(.. 
p.. 
=>.. 
p..  !
...! "
FechaEmision.." .
.... /
Date../ 3
>=..4 6
fechaInicio..7 B
...B C
Value..C H
...H I
Date..I M
&&..N P
p// 
.// 
FechaEmision// *
.//* +
Date//+ /
<=//0 2
fechaFin//3 ;
.//; <
Value//< A
.//A B
Date//B F
)//F G
.00 
SumAsync00 
(00 
p00 
=>00  "
p00# $
.00$ %
Total00% *
)00* +
;00+ ,
totalGastos33 
=33 
await33 #
_context33$ ,
.33, -
Gastos33- 3
.44 
Where44 
(44 
g44 
=>44 
g44  !
.44! "
Fecha44" '
.44' (
Date44( ,
>=44- /
fechaInicio440 ;
.44; <
Value44< A
.44A B
Date44B F
&&44G I
g55 
.55 
Fecha55 #
.55# $
Date55$ (
<=55) +
fechaFin55, 4
.554 5
Value555 :
.55: ;
Date55; ?
)55? @
.66 
SumAsync66 
(66 
g66 
=>66  "
g66# $
.66$ %
Valor66% *
)66* +
;66+ ,
}77 
else88 
{99 
fechaInicio;; 
=;; 
new;; !
DateTime;;" *
(;;* +
DateTime;;+ 3
.;;3 4
Now;;4 7
.;;7 8
Year;;8 <
,;;< =
DateTime;;> F
.;;F G
Now;;G J
.;;J K
Month;;K P
,;;P Q
$num;;R S
);;S T
;;;T U
fechaFin<< 
=<< 
DateTime<< #
.<<# $
Now<<$ '
;<<' (
ViewBag== 
.== 
FechaInicio== #
===$ %
fechaInicio==& 1
.==1 2
Value==2 7
.==7 8
ToString==8 @
(==@ A
$str==A M
)==M N
;==N O
ViewBag>> 
.>> 
FechaFin>>  
=>>! "
fechaFin>># +
.>>+ ,
Value>>, 1
.>>1 2
ToString>>2 :
(>>: ;
$str>>; G
)>>G H
;>>H I
totalIngresosAA 
=AA 
awaitAA  %
_contextAA& .
.AA. /
PedidosAA/ 6
.AA6 7
SumAsyncAA7 ?
(AA? @
pAA@ A
=>AAB D
pAAE F
.AAF G
TotalAAG L
)AAL M
;AAM N
totalGastosDD 
=DD 
awaitDD #
_contextDD$ ,
.DD, -
GastosDD- 3
.DD3 4
SumAsyncDD4 <
(DD< =
gDD= >
=>DD? A
gDDB C
.DDC D
ValorDDD I
)DDI J
;DDJ K
}EE 
varHH 

totalItemsHH 
=HH 
awaitHH "
queryHH# (
.HH( )

CountAsyncHH) 3
(HH3 4
)HH4 5
;HH5 6
varII 

totalPagesII 
=II 
(II 
intII !
)II! "
MathII" &
.II& '
CeilingII' .
(II. /

totalItemsII/ 9
/II: ;
(II< =
doubleII= C
)IIC D
	_pageSizeIID M
)IIM N
;IIN O
ifLL 
(LL 

pageNumberLL 
<LL 
$numLL 
)LL 

pageNumberLL  *
=LL+ ,
$numLL- .
;LL. /
ifMM 
(MM 

pageNumberMM 
>MM 

totalPagesMM '
&&MM( *

totalPagesMM+ 5
>MM6 7
$numMM8 9
)MM9 :

pageNumberMM; E
=MMF G

totalPagesMMH R
;MMR S
varPP 
gastosPP 
=PP 
awaitPP 
queryPP $
.QQ 
OrderByDescendingQQ "
(QQ" #
gQQ# $
=>QQ% '
gQQ( )
.QQ) *
FechaQQ* /
)QQ/ 0
.RR 
SkipRR 
(RR 
(RR 

pageNumberRR !
-RR" #
$numRR$ %
)RR% &
*RR' (
	_pageSizeRR) 2
)RR2 3
.SS 
TakeSS 
(SS 
	_pageSizeSS 
)SS  
.TT 
ToListAsyncTT 
(TT 
)TT 
;TT 
ViewBagWW 
.WW 
CurrentPageWW 
=WW  !

pageNumberWW" ,
;WW, -
ViewBagXX 
.XX 

TotalPagesXX 
=XX  

totalPagesXX! +
;XX+ ,
ViewBagYY 
.YY 
HasPreviousPageYY #
=YY$ %

pageNumberYY& 0
>YY1 2
$numYY3 4
;YY4 5
ViewBagZZ 
.ZZ 
HasNextPageZZ 
=ZZ  !

pageNumberZZ" ,
<ZZ- .

totalPagesZZ/ 9
;ZZ9 :
ViewBag[[ 
.[[ 

TotalItems[[ 
=[[  

totalItems[[! +
;[[+ ,
ViewBag^^ 
.^^ 
FechaInicioParam^^ $
=^^% &
fechaInicio^^' 2
?^^2 3
.^^3 4
ToString^^4 <
(^^< =
$str^^= I
)^^I J
;^^J K
ViewBag__ 
.__ 
FechaFinParam__ !
=__" #
fechaFin__$ ,
?__, -
.__- .
ToString__. 6
(__6 7
$str__7 C
)__C D
;__D E
ViewBagbb 
.bb 
TotalIngresosbb !
=bb" #
totalIngresosbb$ 1
.bb1 2
ToStringbb2 :
(bb: ;
$strbb; ?
)bb? @
;bb@ A
ViewBagcc 
.cc 
TotalGastoscc 
=cc  !
Mathcc" &
.cc& '
Abscc' *
(cc* +
totalGastoscc+ 6
)cc6 7
.cc7 8
ToStringcc8 @
(cc@ A
$strccA E
)ccE F
;ccF G
ViewBagdd 
.dd 
	ChartDatadd 
=dd 
newdd  #
{ee 
Ingresosff 
=ff 
totalIngresosff (
,ff( )
Gastosgg 
=gg 
Mathgg 
.gg 
Absgg !
(gg! "
totalGastosgg" -
)gg- .
}hh 
;hh 
returnjj 
Viewjj 
(jj 
gastosjj 
)jj 
;jj  
}kk 	
[mm 	
HttpGetmm	 
]mm 
publicnn 
IActionResultnn 
Createnn #
(nn# $
)nn$ %
{oo 	
returnpp 
Viewpp 
(pp 
)pp 
;pp 
}qq 	
[ss 	
HttpPostss	 
]ss 
publictt 
asynctt 
Tasktt 
<tt 
IActionResulttt '
>tt' (
Creatett) /
(tt/ 0
[tt0 1
Bindtt1 5
(tt5 6
$strtt6 L
)ttL M
]ttM N
GastottO T
gastottU Z
)ttZ [
{uu 	
ifvv 
(vv 

ModelStatevv 
.vv 
IsValidvv "
)vv" #
{ww 
_contextxx 
.xx 
Addxx 
(xx 
gastoxx "
)xx" #
;xx# $
awaityy 
_contextyy 
.yy 
SaveChangesAsyncyy /
(yy/ 0
)yy0 1
;yy1 2
returnzz 
RedirectToActionzz '
(zz' (
nameofzz( .
(zz. /
Indexzz/ 4
)zz4 5
)zz5 6
;zz6 7
}{{ 
return|| 
RedirectToAction|| #
(||# $
nameof||$ *
(||* +
Index||+ 0
)||0 1
)||1 2
;||2 3
}}} 	
[ 	
HttpGet	 
] 
public
ÄÄ 
async
ÄÄ 
Task
ÄÄ 
<
ÄÄ 
IActionResult
ÄÄ '
>
ÄÄ' (
GetGasto
ÄÄ) 1
(
ÄÄ1 2
int
ÄÄ2 5
id
ÄÄ6 8
)
ÄÄ8 9
{
ÅÅ 	
try
ÇÇ 
{
ÉÉ 
var
ÑÑ 
gasto
ÑÑ 
=
ÑÑ 
await
ÑÑ !
_context
ÑÑ" *
.
ÑÑ* +
Gastos
ÑÑ+ 1
.
ÑÑ1 2
	FindAsync
ÑÑ2 ;
(
ÑÑ; <
id
ÑÑ< >
)
ÑÑ> ?
;
ÑÑ? @
if
ÖÖ 
(
ÖÖ 
gasto
ÖÖ 
==
ÖÖ 
null
ÖÖ !
)
ÖÖ! "
{
ÜÜ 
return
áá 
Json
áá 
(
áá  
new
áá  #
{
áá$ %
success
áá& -
=
áá. /
false
áá0 5
,
áá5 6
message
áá7 >
=
áá? @
$str
ááA V
}
ááW X
)
ááX Y
;
ááY Z
}
àà 
return
ââ 
Json
ââ 
(
ââ 
new
ââ 
{
ââ  !
success
ââ" )
=
ââ* +
true
ââ, 0
,
ââ0 1
data
ââ2 6
=
ââ7 8
gasto
ââ9 >
}
ââ? @
)
ââ@ A
;
ââA B
}
ää 
catch
ãã 
(
ãã 
	Exception
ãã 
ex
ãã 
)
ãã  
{
åå 
return
çç 
Json
çç 
(
çç 
new
çç 
{
çç  !
success
çç" )
=
çç* +
false
çç, 1
,
çç1 2
message
çç3 :
=
çç; <
ex
çç= ?
.
çç? @
Message
çç@ G
}
ççH I
)
ççI J
;
ççJ K
}
éé 
}
èè 	
[
ëë 	
HttpPost
ëë	 
]
ëë 
public
íí 
async
íí 
Task
íí 
<
íí 
IActionResult
íí '
>
íí' (
Edit
íí) -
(
íí- .
[
íí. /
FromBody
íí/ 7
]
íí7 8
Gasto
íí9 >
gasto
íí? D
)
ííD E
{
ìì 	
try
îî 
{
ïï 
if
ññ 
(
ññ 
!
ññ 

ModelState
ññ 
.
ññ  
IsValid
ññ  '
)
ññ' (
{
óó 
return
òò 
Json
òò 
(
òò  
new
òò  #
{
òò$ %
success
òò& -
=
òò. /
false
òò0 5
,
òò5 6
message
òò7 >
=
òò? @
$str
òòA R
}
òòS T
)
òòT U
;
òòU V
}
ôô 
var
õõ 
gastoExistente
õõ "
=
õõ# $
await
õõ% *
_context
õõ+ 3
.
õõ3 4
Gastos
õõ4 :
.
õõ: ;
	FindAsync
õõ; D
(
õõD E
gasto
õõE J
.
õõJ K
Id
õõK M
)
õõM N
;
õõN O
if
úú 
(
úú 
gastoExistente
úú "
==
úú# %
null
úú& *
)
úú* +
{
ùù 
return
ûû 
Json
ûû 
(
ûû  
new
ûû  #
{
ûû$ %
success
ûû& -
=
ûû. /
false
ûû0 5
,
ûû5 6
message
ûû7 >
=
ûû? @
$str
ûûA V
}
ûûW X
)
ûûX Y
;
ûûY Z
}
üü 
gastoExistente
°° 
.
°° 
Fecha
°° $
=
°°% &
gasto
°°' ,
.
°°, -
Fecha
°°- 2
;
°°2 3
gastoExistente
¢¢ 
.
¢¢ 
Concepto
¢¢ '
=
¢¢( )
gasto
¢¢* /
.
¢¢/ 0
Concepto
¢¢0 8
;
¢¢8 9
gastoExistente
££ 
.
££ 
Valor
££ $
=
££% &
gasto
££' ,
.
££, -
Valor
££- 2
;
££2 3
_context
•• 
.
•• 
Update
•• 
(
••  
gastoExistente
••  .
)
••. /
;
••/ 0
await
¶¶ 
_context
¶¶ 
.
¶¶ 
SaveChangesAsync
¶¶ /
(
¶¶/ 0
)
¶¶0 1
;
¶¶1 2
return
®® 
Json
®® 
(
®® 
new
®® 
{
®®  !
success
®®" )
=
®®* +
true
®®, 0
}
®®1 2
)
®®2 3
;
®®3 4
}
©© 
catch
™™ 
(
™™ 
	Exception
™™ 
ex
™™ 
)
™™  
{
´´ 
return
¨¨ 
Json
¨¨ 
(
¨¨ 
new
¨¨ 
{
¨¨  !
success
¨¨" )
=
¨¨* +
false
¨¨, 1
,
¨¨1 2
message
¨¨3 :
=
¨¨; <
ex
¨¨= ?
.
¨¨? @
Message
¨¨@ G
}
¨¨H I
)
¨¨I J
;
¨¨J K
}
≠≠ 
}
ÆÆ 	
[
∞∞ 	
HttpPost
∞∞	 
]
∞∞ 
public
±± 
async
±± 
Task
±± 
<
±± 
IActionResult
±± '
>
±±' (
Delete
±±) /
(
±±/ 0
int
±±0 3
id
±±4 6
)
±±6 7
{
≤≤ 	
var
≥≥ 
gasto
≥≥ 
=
≥≥ 
await
≥≥ 
_context
≥≥ &
.
≥≥& '
Gastos
≥≥' -
.
≥≥- .
	FindAsync
≥≥. 7
(
≥≥7 8
id
≥≥8 :
)
≥≥: ;
;
≥≥; <
if
¥¥ 
(
¥¥ 
gasto
¥¥ 
==
¥¥ 
null
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
NotFound
∂∂ 
(
∂∂  
)
∂∂  !
;
∂∂! "
}
∑∑ 
_context
ππ 
.
ππ 
Gastos
ππ 
.
ππ 
Remove
ππ "
(
ππ" #
gasto
ππ# (
)
ππ( )
;
ππ) *
await
∫∫ 
_context
∫∫ 
.
∫∫ 
SaveChangesAsync
∫∫ +
(
∫∫+ ,
)
∫∫, -
;
∫∫- .
return
ªª 
Ok
ªª 
(
ªª 
)
ªª 
;
ªª 
}
ºº 	
private
ææ 
bool
ææ 
GastoExists
ææ  
(
ææ  !
int
ææ! $
id
ææ% '
)
ææ' (
{
øø 	
return
¿¿ 
_context
¿¿ 
.
¿¿ 
Gastos
¿¿ "
.
¿¿" #
Any
¿¿# &
(
¿¿& '
e
¿¿' (
=>
¿¿) +
e
¿¿, -
.
¿¿- .
Id
¿¿. 0
==
¿¿1 3
id
¿¿4 6
)
¿¿6 7
;
¿¿7 8
}
¡¡ 	
}
¬¬ 
}√√ ≥A
CC:\Users\ACER\Desktop\GRINPLAS\Controllers\ComentariosController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class !
ComentariosController &
:' (

Controller) 3
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public !
ComentariosController $
($ % 
ApplicationDbContext% 9
context: A
)A B
{ 	
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
var 
comentarios 
= 
_context &
.& '
Comentarios' 2
.2 3
ToList3 9
(9 :
): ;
;; <
return 
View 
( 
comentarios #
)# $
;$ %
} 	
[ 	
HttpPost	 
] 
[ 	$
ValidateAntiForgeryToken	 !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
EnviarComentario) 9
(9 :
Comentarios: E

comentarioF P
)P Q
{ 	
if   
(   

ModelState   
.   
IsValid   "
)  " #
{!! 
var"" 
input"" 
="" 
new"" $
MLModelTextClasification""  8
.""8 9

ModelInput""9 C
{## 
Comment$$ 
=$$ 

comentario$$ (
.$$( )
	Contenido$$) 2
}%% 
;%% 
var'' 
	resultado'' 
='' $
MLModelTextClasification''  8
.''8 9
Predict''9 @
(''@ A
input''A F
)''F G
;''G H
var(( 
etiqueta(( 
=(( 
	resultado(( (
.((( )
PredictedLabel(() 7
;((7 8

comentario** 
.** 

EsPositivo** %
=**& '
etiqueta**( 0
?**0 1
.**1 2
ToLower**2 9
(**9 :
)**: ;
==**< >
$str**? I
;**I J
_context,, 
.,, 
Comentarios,, $
.,,$ %
Add,,% (
(,,( )

comentario,,) 3
),,3 4
;,,4 5
await-- 
_context-- 
.-- 
SaveChangesAsync-- /
(--/ 0
)--0 1
;--1 2
TempData// 
[// 
$str// "
]//" #
=//$ %
$str//& H
;//H I
return00 
RedirectToAction00 '
(00' (
$str00( /
)00/ 0
;000 1
}11 
return33 
View33 
(33 

comentario33 "
)33" #
;33# $
}44 	
[66 	
HttpGet66	 
]66 
public77 
IActionResult77 
ExportarExcel77 *
(77* +
)77+ ,
{88 	
var99 
comentarios99 
=99 
_context99 &
.99& '
Comentarios99' 2
.992 3
ToList993 9
(999 :
)99: ;
;99; <
if;; 
(;; 
!;; 
comentarios;; 
.;; 
Any;;  
(;;  !
);;! "
);;" #
{<< 
return== 

BadRequest== !
(==! "
$str==" E
)==E F
;==F G
}>> 
using@@ 
var@@ 
workbook@@ 
=@@  
new@@! $

XLWorkbook@@% /
(@@/ 0
)@@0 1
;@@1 2
varAA 
	worksheetAA 
=AA 
workbookAA $
.AA$ %

WorksheetsAA% /
.AA/ 0
AddAA0 3
(AA3 4
$strAA4 A
)AAA B
;AAB C
	worksheetDD 
.DD 
CellDD 
(DD 
$numDD 
,DD 
$numDD 
)DD  
.DD  !
ValueDD! &
=DD' (
$strDD) -
;DD- .
	worksheetEE 
.EE 
CellEE 
(EE 
$numEE 
,EE 
$numEE 
)EE  
.EE  !
ValueEE! &
=EE' (
$strEE) 2
;EE2 3
	worksheetFF 
.FF 
CellFF 
(FF 
$numFF 
,FF 
$numFF 
)FF  
.FF  !
ValueFF! &
=FF' (
$strFF) 3
;FF3 4
	worksheetGG 
.GG 
CellGG 
(GG 
$numGG 
,GG 
$numGG 
)GG  
.GG  !
ValueGG! &
=GG' (
$strGG) 0
;GG0 1
	worksheetHH 
.HH 
CellHH 
(HH 
$numHH 
,HH 
$numHH 
)HH  
.HH  !
ValueHH! &
=HH' (
$strHH) 5
;HH5 6
	worksheetII 
.II 
CellII 
(II 
$numII 
,II 
$numII 
)II  
.II  !
ValueII! &
=II' (
$strII) /
;II/ 0
intKK 
filaKK 
=KK 
$numKK 
;KK 
foreachLL 
(LL 
varLL 
cLL 
inLL 
comentariosLL )
)LL) *
{MM 
	worksheetNN 
.NN 
CellNN 
(NN 
filaNN #
,NN# $
$numNN% &
)NN& '
.NN' (
ValueNN( -
=NN. /
cNN0 1
.NN1 2
IdNN2 4
;NN4 5
	worksheetOO 
.OO 
CellOO 
(OO 
filaOO #
,OO# $
$numOO% &
)OO& '
.OO' (
ValueOO( -
=OO. /
cOO0 1
.OO1 2
NombresOO2 9
;OO9 :
	worksheetPP 
.PP 
CellPP 
(PP 
filaPP #
,PP# $
$numPP% &
)PP& '
.PP' (
ValuePP( -
=PP. /
cPP0 1
.PP1 2
TelefonoPP2 :
;PP: ;
	worksheetQQ 
.QQ 
CellQQ 
(QQ 
filaQQ #
,QQ# $
$numQQ% &
)QQ& '
.QQ' (
ValueQQ( -
=QQ. /
cQQ0 1
.QQ1 2
EmailQQ2 7
;QQ7 8
	worksheetRR 
.RR 
CellRR 
(RR 
filaRR #
,RR# $
$numRR% &
)RR& '
.RR' (
ValueRR( -
=RR. /
cRR0 1
.RR1 2
	ContenidoRR2 ;
;RR; <
	worksheetSS 
.SS 
CellSS 
(SS 
filaSS #
,SS# $
$numSS% &
)SS& '
.SS' (
ValueSS( -
=SS. /
cSS0 1
.SS1 2

EsPositivoSS2 <
?SS= >
$strSS? I
:SSJ K
$strSSL V
;SSV W
filaTT 
++TT 
;TT 
}UU 
	worksheetWW 
.WW 
ColumnsWW 
(WW 
)WW 
.WW  
AdjustToContentsWW  0
(WW0 1
)WW1 2
;WW2 3
usingYY 
varYY 
streamYY 
=YY 
newYY "
MemoryStreamYY# /
(YY/ 0
)YY0 1
;YY1 2
workbookZZ 
.ZZ 
SaveAsZZ 
(ZZ 
streamZZ "
)ZZ" #
;ZZ# $
stream[[ 
.[[ 
Position[[ 
=[[ 
$num[[ 
;[[  
var]] 
fileName]] 
=]] 
$"]] 
$str]] )
{]]) *
DateTime]]* 2
.]]2 3
Now]]3 6
:]]6 7
$str]]7 F
}]]F G
$str]]G L
"]]L M
;]]M N
return__ 
File__ 
(__ 
stream__ 
.__ 
ToArray__ &
(__& '
)__' (
,__( )
$str__* m
,__m n
fileName__o w
)__w x
;__x y
}`` 	
}ee 
}ff ˆA
GC:\Users\ACER\Desktop\GRINPLAS\Controllers\ClienteGr√°ficoController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class $
ClienteGraficoController )
:* +

Controller, 6
{ 
private 
readonly 
ILogger  
<  !$
ClienteGraficoController! 9
>9 :
_logger; B
;B C
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public $
ClienteGraficoController '
(( )
ILogger 
< $
ClienteGraficoController ,
>, -
logger. 4
,4 5 
ApplicationDbContext  
context! (
)( )
{ 	
_logger 
= 
logger 
; 
_context 
= 
context 
; 
} 	
public 
IActionResult 
Index "
(" #
)# $
{ 	
return   
View   
(   
)   
;   
}!! 	
[## 	
HttpGet##	 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
IActionResult$$ '
>$$' ( 
GetClientesPorSemana$$) =
($$= >
string$$> D
fecha$$E J
)$$J K
{%% 	
try&& 
{'' 
if(( 
((( 
!(( 
DateTime(( 
.(( 
TryParse(( &
(((& '
fecha((' ,
,((, -
out((. 1
var((2 5
fechaSeleccionada((6 G
)((G H
)((H I
{)) 
return** 

BadRequest** %
(**% &
new**& )
{*** +
success**, 3
=**4 5
false**6 ;
,**; <
error**= B
=**C D
$str**E U
}**V W
)**W X
;**X Y
}++ 
fechaSeleccionada-- !
=--" #
DateTime--$ ,
.--, -
SpecifyKind--- 8
(--8 9
fechaSeleccionada--9 J
,--J K
DateTimeKind--L X
.--X Y
Utc--Y \
)--\ ]
;--] ^
var// 
inicioSemana//  
=//! "
fechaSeleccionada//# 4
.//4 5
AddDays//5 <
(//< =
-//= >
(//> ?
int//? B
)//B C
fechaSeleccionada//C T
.//T U
	DayOfWeek//U ^
+//_ `
(//a b
int//b e
)//e f
	DayOfWeek//f o
.//o p
Monday//p v
)//v w
;//w x
var00 
	finSemana00 
=00 
inicioSemana00  ,
.00, -
AddDays00- 4
(004 5
$num005 6
)006 7
.007 8
AddHours008 @
(00@ A
$num00A C
)00C D
.00D E

AddMinutes00E O
(00O P
$num00P R
)00R S
.00S T

AddSeconds00T ^
(00^ _
$num00_ a
)00a b
;00b c
var22 
clientes22 
=22 
await22 $
_context22% -
.22- .
Clientes22. 6
.33 
Include33 
(33 
c33 
=>33 !
c33" #
.33# $
User33$ (
)33( )
.44 
Where44 
(44 
c44 
=>44 
c44  !
.44! "
User44" &
.44& '
FechaRegistro44' 4
>=445 7
inicioSemana448 D
&&44E G
c55 
.55 
User55 "
.55" #
FechaRegistro55# 0
<=551 3
	finSemana554 =
)55= >
.66 
ToListAsync66  
(66  !
)66! "
;66" #
if99 
(99 
clientes99 
.99 
Count99 "
==99# %
$num99& '
)99' (
{:: 
return;; 
Json;; 
(;;  
new;;  #
{<< 
success== 
===  !
true==" &
,==& '
	emptyData>> !
=>>" #
true>>$ (
,>>( )
message?? 
=??  !
$str??" X
,??X Y
labels@@ 
=@@  
new@@! $
[@@$ %
]@@% &
{@@' (
$str@@) 0
,@@0 1
$str@@2 :
,@@: ;
$str@@< G
,@@G H
$str@@I Q
,@@Q R
$str@@S \
,@@\ ]
$str@@^ f
,@@f g
$str@@h q
}@@r s
,@@s t
dataAA 
=AA 
newAA "
intAA# &
[AA& '
$numAA' (
]AA( )
,AA) *
inicioSemanaBB $
=BB% &
inicioSemanaBB' 3
.BB3 4
ToStringBB4 <
(BB< =
$strBB= I
)BBI J
,BBJ K
	finSemanaCC !
=CC" #
	finSemanaCC$ -
.CC- .
ToStringCC. 6
(CC6 7
$strCC7 C
)CCC D
}DD 
)DD 
;DD 
}EE 
varGG 
dataGG 
=GG 
newGG 
intGG "
[GG" #
$numGG# $
]GG$ %
;GG% &
foreachHH 
(HH 
varHH 
clienteHH $
inHH% '
clientesHH( 0
)HH0 1
{II 
ifJJ 
(JJ 
clienteJJ 
.JJ  
UserJJ  $
?JJ$ %
.JJ% &
FechaRegistroJJ& 3
!=JJ4 6
nullJJ7 ;
)JJ; <
{KK 
varLL 
diaLL 
=LL  !
(LL" #
intLL# &
)LL& '
clienteLL' .
.LL. /
UserLL/ 3
.LL3 4
FechaRegistroLL4 A
.LLA B
	DayOfWeekLLB K
;LLK L
varNN 
indexNN !
=NN" #
(NN$ %
diaNN% (
==NN) +
$numNN, -
)NN- .
?NN/ 0
$numNN1 2
:NN3 4
diaNN5 8
-NN9 :
$numNN; <
;NN< =
dataOO 
[OO 
indexOO "
]OO" #
++OO# %
;OO% &
}PP 
}QQ 
returnSS 
JsonSS 
(SS 
newSS 
{TT 
successUU 
=UU 
trueUU "
,UU" #
labelsVV 
=VV 
newVV  
[VV  !
]VV! "
{VV# $
$strVV% ,
,VV, -
$strVV. 6
,VV6 7
$strVV8 C
,VVC D
$strVVE M
,VVM N
$strVVO X
,VVX Y
$strVVZ b
,VVb c
$strVVd m
}VVn o
,VVo p
dataWW 
,WW 
inicioSemanaXX  
=XX! "
inicioSemanaXX# /
.XX/ 0
ToStringXX0 8
(XX8 9
$strXX9 E
)XXE F
,XXF G
	finSemanaYY 
=YY 
	finSemanaYY  )
.YY) *
ToStringYY* 2
(YY2 3
$strYY3 ?
)YY? @
}ZZ 
)ZZ 
;ZZ 
}[[ 
catch\\ 
(\\ 
	Exception\\ 
ex\\ 
)\\  
{]] 
_logger^^ 
.^^ 
LogError^^  
(^^  !
ex^^! #
,^^# $
$str^^% K
)^^K L
;^^L M
return__ 

StatusCode__ !
(__! "
$num__" %
,__% &
new__' *
{__+ ,
success__- 4
=__5 6
false__7 <
,__< =
error__> C
=__D E
ex__F H
.__H I
Message__I P
}__Q R
)__R S
;__S T
}`` 
}aa 	
[bb 	
ResponseCachebb	 
(bb 
Durationbb 
=bb  !
$numbb" #
,bb# $
Locationbb% -
=bb. /!
ResponseCacheLocationbb0 E
.bbE F
NonebbF J
,bbJ K
NoStorebbL S
=bbT U
truebbV Z
)bbZ [
]bb[ \
publiccc 
IActionResultcc 
Errorcc "
(cc" #
)cc# $
{dd 	
returnee 
Viewee 
(ee 
$stree  
)ee  !
;ee! "
}ff 	
}gg 
}hh ∑
?C:\Users\ACER\Desktop\GRINPLAS\Controllers\ClienteController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class 
ClienteController "
:# $

Controller% /
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
ClienteController  
(  ! 
ApplicationDbContext! 5
context6 =
)= >
{ 	
_context 
= 
context 
; 
} 	
public	 
IActionResult 
PerfilCliente +
(+ ,
), -
{ 	
return 
View 
( 
) 
; 
} 	
public 
IActionResult 
HistorialCliente -
(- .
). /
{ 	
var 
clientes 
= 
_context #
.# $
Clientes$ ,
., -
Include- 4
(4 5
c5 6
=>7 9
c: ;
.; <
User< @
)@ A
.A B
ToListB H
(H I
)I J
;J K
return 
View 
( 
clientes  
)  !
;! "
} 	
}   
}!! îÂ
?C:\Users\ACER\Desktop\GRINPLAS\Controllers\CarritoController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
public 

class 
CarritoController "
:# $

Controller% /
{ 
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
?5 6
_userManager7 C
;C D
private 
readonly 
ILogger  
<  !
CarritoController! 2
>2 3
_logger4 ;
;; <
private 
readonly 
IWebHostEnvironment ,
_webHostEnvironment- @
;@ A
[ 	)
ActivatorUtilitiesConstructor	 &
]& '
public 
CarritoController  
(  ! 
ApplicationDbContext 
context $
,$ %
UserManager 
< 
ApplicationUser #
># $
userManager% 0
,0 1
ILogger 
< 
CarritoController !
>! "
logger# )
,) *
IWebHostEnvironment 
webHostEnvironment .
). /
{   	
_context!! 
=!! 
context!! 
;!! 
_userManager"" 
="" 
userManager"" &
;""& '
_logger## 
=## 
logger## 
;## 
_webHostEnvironment$$ 
=$$  !
webHostEnvironment$$" 4
;$$4 5
}%% 	
public'' 
CarritoController''  
(''  ! 
ApplicationDbContext(( 
context(( $
,(($ %
UserManager)) 
<)) 
ApplicationUser)) #
>))# $
userManager))% 0
)))0 1
:** 	
this**
 
(** 
context** 
,** 
userManager** #
,**# $

NullLogger**% /
<**/ 0
CarritoController**0 A
>**A B
.**B C
Instance**C K
,**K L
null**M Q
!**Q R
)**R S
{++ 	
},, 	
public.. 
async.. 
Task.. 
<.. 
IActionResult.. '
>..' (
Cliente..) 0
(..0 1
)..1 2
{// 	
if00 
(00 
_userManager00 
==00 
null00  $
)00$ %
{11 
return33 
View33 
(33 
$str33 *
)33* +
;33+ ,
}44 
var55 
user55 
=55 
await55 
_userManager55 )
.55) *
GetUserAsync55* 6
(556 7
User557 ;
)55; <
;55< =
if77 
(77 
user77 
==77 
null77 
)77 
{77 
return88 
View88 
(88 
$str88 *
)88* +
;88+ ,
}99 
var:: 
	userRoles:: 
=:: 
await::  
_userManager::! -
.::- .
GetRolesAsync::. ;
(::; <
user::< @
)::@ A
;::A B
var<< 
cliente<< 
=<< 
await<< 
_context<<  (
.<<( )
Clientes<<) 1
.<<1 2
FirstOrDefaultAsync<<2 E
(<<E F
c<<F G
=><<H J
c<<K L
.<<L M
ApplicationUserId<<M ^
==<<_ a
user<<b f
.<<f g
Id<<g i
)<<i j
;<<j k
if== 
(== 
cliente== 
==== 
null== 
)==  
{>> 
return?? 
View?? 
(?? 
$str?? *
)??* +
;??+ ,
}@@ 
varBB 
carritoBB 
=BB 
awaitBB 
_contextBB  (
.BB( )
CarritoBB) 0
.CC 
IncludeCC 
(CC 
cCC 
=>CC 
cCC 
.CC  
detalleCarritoCC  .
)CC. /
.DD 
ThenIncludeDD 
(DD 
dcDD 
=>DD  "
dcDD# %
.DD% &
ProductoDD& .
)DD. /
.EE 
ThenIncludeEE 
(EE 
pEE 
=>EE !
pEE" #
.EE# $
	CategoriaEE$ -
)EE- .
.FF 
FirstOrDefaultAsyncFF $
(FF$ %
cFF% &
=>FF' )
cFF* +
.FF+ ,
	ClienteIdFF, 5
==FF6 8
clienteFF9 @
.FF@ A
	ClienteIdFFA J
)FFJ K
;FFK L
ifHH 
(HH 
carritoHH 
==HH 
nullHH 
)HH  
{II 
carritoJJ 
=JJ 
newJJ 
CarritoJJ %
{KK 
	ClienteIdLL 
=LL 
clienteLL #
.LL# $
	ClienteIdLL$ -
,LL- .
ClienteMM 
=MM 
clienteMM !
,MM! "
FechaCreacionNN 
=NN 
DateTimeNN  (
.NN( )
NowNN) ,
,NN, -
detalleCarritoOO 
=OO  
newOO! $
ListOO% )
<OO) *
DetalleCarritoOO* 8
>OO8 9
(OO9 :
)OO: ;
}PP 
;PP 
_contextQQ 
.QQ 
CarritoQQ  
.QQ  !
AddQQ! $
(QQ$ %
carritoQQ% ,
)QQ, -
;QQ- .
awaitRR 
_contextRR 
.RR 
SaveChangesAsyncRR /
(RR/ 0
)RR0 1
;RR1 2
}SS 
ifVV 
(VV 
carritoVV 
.VV 
detalleCarritoVV &
==VV' )
nullVV* .
||VV/ 1
carritoVV2 9
.VV9 :
detalleCarritoVV: H
.VVH I
CountVVI N
==VVO Q
$numVVR S
)VVS T
{WW 
TempDataYY 
[YY 
$strYY ,
]YY, -
=YY. /
$strYY0 ^
;YY^ _
}ZZ 
var\\ 
	viewModel\\ 
=\\ 
new\\ 
CarritoViewModel\\  0
{]] 
	Productos^^ 
=^^ 
carrito^^ #
.^^# $
detalleCarrito^^$ 2
.^^2 3
Select^^3 9
(^^9 :
dc^^: <
=>^^= ?
dc^^@ B
.^^B C
Producto^^C K
)^^K L
.^^L M
Where^^M R
(^^R S
producto^^S [
=>^^\ ^
producto^^_ g
!=^^h j
null^^k o
)^^o p
.^^p q
ToList^^q w
(^^w x
)^^x y
!^^y z
,^^z {
Carrito__ 
=__ 
carrito__ !
.__! "
detalleCarrito__" 0
.__0 1
ToList__1 7
(__7 8
)__8 9
}`` 
;`` 
returnbb 
Viewbb 
(bb 
	viewModelbb !
)bb! "
;bb" #
}cc 	
[ee 	
HttpPostee	 
]ee 
[ff 	$
ValidateAntiForgeryTokenff	 !
]ff! "
publicgg 
asyncgg 
Taskgg 
<gg 
IActionResultgg '
>gg' (
EliminarProductogg) 9
(gg9 :
[gg: ;
FromBodygg; C
]ggC D 
DeleteProductRequestggE Y
requestggZ a
)gga b
{hh 	
ifii 
(ii 
_userManagerii 
==ii 
nullii  $
)ii$ %
{jj 
returnkk 
Jsonkk 
(kk 
newkk 
{kk  !
successkk" )
=kk* +
falsekk, 1
,kk1 2
messagekk3 :
=kk; <
$strkk= O
}kkP Q
)kkQ R
;kkR S
}ll 
varnn 
usernn 
=nn 
awaitnn 
_userManagernn )
.nn) *
GetUserAsyncnn* 6
(nn6 7
Usernn7 ;
)nn; <
;nn< =
ifoo 
(oo 
useroo 
==oo 
nulloo 
)oo 
{pp 
returnqq 
Jsonqq 
(qq 
newqq 
{qq  !
successqq" )
=qq* +
falseqq, 1
,qq1 2
messageqq3 :
=qq; <
$strqq= U
}qqV W
)qqW X
;qqX Y
}rr 
vartt 
clientett 
=tt 
awaittt 
_contexttt  (
.tt( )
Clientestt) 1
.tt1 2
FirstOrDefaultAsynctt2 E
(ttE F
cttF G
=>ttH J
cttK L
.ttL M
ApplicationUserIdttM ^
==tt_ a
userttb f
.ttf g
Idttg i
)tti j
;ttj k
ifuu 
(uu 
clienteuu 
==uu 
nulluu 
)uu  
{vv 
returnww 
Jsonww 
(ww 
newww 
{ww  !
successww" )
=ww* +
falseww, 1
,ww1 2
messageww3 :
=ww; <
$strww= U
}wwV W
)wwW X
;wwX Y
}xx 
varzz 
carritozz 
=zz 
awaitzz 
_contextzz  (
.zz( )
Carritozz) 0
.{{ 
Include{{ 
({{ 
c{{ 
=>{{ 
c{{ 
.{{  
detalleCarrito{{  .
){{. /
.|| 
FirstOrDefaultAsync|| $
(||$ %
c||% &
=>||' )
c||* +
.||+ ,
	ClienteId||, 5
==||6 8
cliente||9 @
.||@ A
	ClienteId||A J
)||J K
;||K L
if~~ 
(~~ 
carrito~~ 
==~~ 
null~~ 
)~~  
{ 
return
ÄÄ 
Json
ÄÄ 
(
ÄÄ 
new
ÄÄ 
{
ÄÄ  !
success
ÄÄ" )
=
ÄÄ* +
false
ÄÄ, 1
,
ÄÄ1 2
message
ÄÄ3 :
=
ÄÄ; <
$str
ÄÄ= U
}
ÄÄV W
)
ÄÄW X
;
ÄÄX Y
}
ÅÅ 
var
ÉÉ 
detalleCarrito
ÉÉ 
=
ÉÉ  
carrito
ÉÉ! (
.
ÉÉ( )
detalleCarrito
ÉÉ) 7
.
ÑÑ 
FirstOrDefault
ÑÑ 
(
ÑÑ  
dc
ÑÑ  "
=>
ÑÑ# %
dc
ÑÑ& (
.
ÑÑ( )

ProductoId
ÑÑ) 3
==
ÑÑ4 6
request
ÑÑ7 >
.
ÑÑ> ?

ProductoId
ÑÑ? I
)
ÑÑI J
;
ÑÑJ K
if
ÜÜ 
(
ÜÜ 
detalleCarrito
ÜÜ 
==
ÜÜ !
null
ÜÜ" &
)
ÜÜ& '
{
áá 
return
àà 
Json
àà 
(
àà 
new
àà 
{
àà  !
success
àà" )
=
àà* +
false
àà, 1
,
àà1 2
message
àà3 :
=
àà; <
$str
àà= d
}
ààe f
)
ààf g
;
ààg h
}
ââ 
_context
ãã 
.
ãã 
DetalleCarrito
ãã #
.
ãã# $
Remove
ãã$ *
(
ãã* +
detalleCarrito
ãã+ 9
)
ãã9 :
;
ãã: ;
await
åå 
_context
åå 
.
åå 
SaveChangesAsync
åå +
(
åå+ ,
)
åå, -
;
åå- .
return
éé 
Json
éé 
(
éé 
new
éé 
{
éé 
success
éé %
=
éé& '
true
éé( ,
}
éé- .
)
éé. /
;
éé/ 0
}
èè 	
public
ëë 
class
ëë "
DeleteProductRequest
ëë )
{
íí 	
public
ìì 
int
ìì 

ProductoId
ìì !
{
ìì" #
get
ìì$ '
;
ìì' (
set
ìì) ,
;
ìì, -
}
ìì. /
}
îî 	
[
ññ 	
HttpPost
ññ	 
]
ññ 
public
óó 
async
óó 
Task
óó 
<
óó 
IActionResult
óó '
>
óó' (
GenerarPedido
óó) 6
(
óó6 7
string
óó7 =
	direccion
óó> G
,
óóG H
	IFormFile
óóI R
comprobantePago
óóS b
)
óób c
{
òò 	
if
ôô 
(
ôô 
_userManager
ôô 
==
ôô 
null
ôô  $
)
ôô$ %
{
öö 
return
õõ 
RedirectToPage
õõ %
(
õõ% &
$str
õõ& =
)
õõ= >
;
õõ> ?
}
úú 
var
ùù 
user
ùù 
=
ùù 
await
ùù 
_userManager
ùù )
.
ùù) *
GetUserAsync
ùù* 6
(
ùù6 7
User
ùù7 ;
)
ùù; <
;
ùù< =
if
üü 
(
üü 
user
üü 
==
üü 
null
üü 
)
üü 
{
†† 
return
°° 
RedirectToPage
°° %
(
°°% &
$str
°°& =
)
°°= >
;
°°> ?
}
¢¢ 
var
££ 
	userRoles
££ 
=
££ 
await
££ !
_userManager
££" .
.
££. /
GetRolesAsync
££/ <
(
££< =
user
££= A
)
££A B
;
££B C
var
•• 
cliente
•• 
=
•• 
await
•• 
_context
••  (
.
••( )
Clientes
••) 1
.
••1 2!
FirstOrDefaultAsync
••2 E
(
••E F
c
••F G
=>
••H J
c
••K L
.
••L M
ApplicationUserId
••M ^
==
••_ a
user
••b f
.
••f g
Id
••g i
)
••i j
;
••j k
if
¶¶ 
(
¶¶ 
cliente
¶¶ 
==
¶¶ 
null
¶¶ 
)
¶¶  
{
ßß 
return
®® 
RedirectToPage
®® %
(
®®% &
$str
®®& =
)
®®= >
;
®®> ?
}
©© 
var
´´ 
carrito
´´ 
=
´´ 
await
´´ 
_context
´´  (
.
´´( )
Carrito
´´) 0
.
¨¨ 
Include
¨¨ 
(
¨¨ 
c
¨¨ 
=>
¨¨ 
c
¨¨ 
.
¨¨  
detalleCarrito
¨¨  .
)
¨¨. /
.
≠≠ 
ThenInclude
≠≠ 
(
≠≠ 
dc
≠≠ 
=>
≠≠  "
dc
≠≠# %
.
≠≠% &
Producto
≠≠& .
)
≠≠. /
.
ÆÆ !
FirstOrDefaultAsync
ÆÆ $
(
ÆÆ$ %
c
ÆÆ% &
=>
ÆÆ' )
c
ÆÆ* +
.
ÆÆ+ ,
	ClienteId
ÆÆ, 5
==
ÆÆ6 8
cliente
ÆÆ9 @
.
ÆÆ@ A
	ClienteId
ÆÆA J
)
ÆÆJ K
;
ÆÆK L
if
∞∞ 
(
∞∞ 
carrito
∞∞ 
==
∞∞ 
null
∞∞ 
||
∞∞  "
carrito
∞∞# *
.
∞∞* +
detalleCarrito
∞∞+ 9
.
∞∞9 :
Count
∞∞: ?
==
∞∞@ B
$num
∞∞C D
)
∞∞D E
{
±± 
TempData
≤≤ 
[
≤≤ 
$str
≤≤ '
]
≤≤' (
=
≤≤) *
$str
≤≤+ L
;
≤≤L M
return
≥≥ 
RedirectToAction
≥≥ '
(
≥≥' (
$str
≥≥( 1
,
≥≥1 2
$str
≥≥3 <
)
≥≥< =
;
≥≥= >
}
¥¥ 
string
∑∑ !
comprobanteFileName
∑∑ &
=
∑∑' (
string
∑∑) /
.
∑∑/ 0
Empty
∑∑0 5
;
∑∑5 6
if
ππ 
(
ππ 
comprobantePago
ππ 
!=
ππ  "
null
ππ# '
&&
ππ( *
comprobantePago
ππ+ :
.
ππ: ;
Length
ππ; A
>
ππB C
$num
ππD E
)
ππE F
{
∫∫ 
string
ºº 
uploadsFolder
ºº $
=
ºº% &
Path
ºº' +
.
ºº+ ,
Combine
ºº, 3
(
ºº3 4!
_webHostEnvironment
ºº4 G
.
ººG H
WebRootPath
ººH S
,
ººS T
$str
ººU ^
)
ºº^ _
;
ºº_ `
if
ΩΩ 
(
ΩΩ 
!
ΩΩ 
	Directory
ΩΩ 
.
ΩΩ 
Exists
ΩΩ %
(
ΩΩ% &
uploadsFolder
ΩΩ& 3
)
ΩΩ3 4
)
ΩΩ4 5
{
ææ 
	Directory
øø 
.
øø 
CreateDirectory
øø -
(
øø- .
uploadsFolder
øø. ;
)
øø; <
;
øø< =
}
¿¿ !
comprobanteFileName
√√ #
=
√√$ %
$"
√√& (
$str
√√( 4
{
√√4 5
DateTime
√√5 =
.
√√= >
Now
√√> A
:
√√A B
$str
√√B P
}
√√P Q
$str
√√Q R
{
√√R S
Path
√√S W
.
√√W X
GetExtension
√√X d
(
√√d e
comprobantePago
√√e t
.
√√t u
FileName
√√u }
)
√√} ~
}
√√~ 
"√√ Ä
;√√Ä Å
string
ƒƒ 
filePath
ƒƒ 
=
ƒƒ  !
Path
ƒƒ" &
.
ƒƒ& '
Combine
ƒƒ' .
(
ƒƒ. /
uploadsFolder
ƒƒ/ <
,
ƒƒ< =!
comprobanteFileName
ƒƒ> Q
)
ƒƒQ R
;
ƒƒR S
using
«« 
(
«« 
var
«« 

fileStream
«« %
=
««& '
new
««( +

FileStream
««, 6
(
««6 7
filePath
««7 ?
,
««? @
FileMode
««A I
.
««I J
Create
««J P
)
««P Q
)
««Q R
{
»» 
await
…… 
comprobantePago
…… )
.
……) *
CopyToAsync
……* 5
(
……5 6

fileStream
……6 @
)
……@ A
;
……A B
}
   
}
ÀÀ 
string
ÕÕ 
boletaFileName
ÕÕ !
=
ÕÕ" #
$"
ÕÕ$ &
$str
ÕÕ& -
{
ÕÕ- .
DateTime
ÕÕ. 6
.
ÕÕ6 7
Now
ÕÕ7 :
:
ÕÕ: ;
$str
ÕÕ; I
}
ÕÕI J
$str
ÕÕJ N
"
ÕÕN O
;
ÕÕO P
string
ŒŒ 
rutaArchivo
ŒŒ 
=
ŒŒ  
Path
ŒŒ! %
.
ŒŒ% &
Combine
ŒŒ& -
(
ŒŒ- .
	Directory
ŒŒ. 7
.
ŒŒ7 8!
GetCurrentDirectory
ŒŒ8 K
(
ŒŒK L
)
ŒŒL M
,
ŒŒM N
$str
ŒŒO X
,
ŒŒX Y
$str
ŒŒZ f
,
ŒŒf g
$str
ŒŒh q
)
ŒŒq r
;
ŒŒr s
if
—— 
(
—— 
!
—— 
	Directory
—— 
.
—— 
Exists
—— !
(
——! "
rutaArchivo
——" -
)
——- .
)
——. /
{
““ 
	Directory
”” 
.
”” 
CreateDirectory
”” )
(
””) *
rutaArchivo
””* 5
)
””5 6
;
””6 7
}
‘‘ 
string
÷÷ 
rutaCompleta
÷÷ 
=
÷÷  !
Path
÷÷" &
.
÷÷& '
Combine
÷÷' .
(
÷÷. /
rutaArchivo
÷÷/ :
,
÷÷: ;
boletaFileName
÷÷< J
)
÷÷J K
;
÷÷K L
string
◊◊ 
rutaRelativa
◊◊ 
=
◊◊  !
$"
◊◊" $
$str
◊◊$ 8
{
◊◊8 9
boletaFileName
◊◊9 G
}
◊◊G H
"
◊◊H I
;
◊◊I J
var
⁄⁄ 
pedido
⁄⁄ 
=
⁄⁄ 
new
⁄⁄ 
Pedido
⁄⁄ #
{
€€ 
	ClienteId
‹‹ 
=
‹‹ 
cliente
‹‹ #
.
‹‹# $
	ClienteId
‹‹$ -
,
‹‹- .
	Direccion
›› 
=
›› 
	direccion
›› %
,
››% &
FechaEmision
ﬁﬁ 
=
ﬁﬁ 
DateTime
ﬁﬁ '
.
ﬁﬁ' (
Now
ﬁﬁ( +
,
ﬁﬁ+ ,
Status
ﬂﬂ 
=
ﬂﬂ 
$str
ﬂﬂ $
,
ﬂﬂ$ %
Total
‡‡ 
=
‡‡ 
carrito
‡‡ 
.
‡‡  
detalleCarrito
‡‡  .
.
‡‡. /
Sum
‡‡/ 2
(
‡‡2 3
dc
‡‡3 5
=>
‡‡6 8
dc
‡‡9 ;
.
‡‡; <
Subtotal
‡‡< D
)
‡‡D E
,
‡‡E F
Pago
·· 
=
·· 
$str
·· !
,
··! "
ComprobantePago
‚‚ 
=
‚‚  !!
comprobanteFileName
‚‚" 5
.
‚‚5 6
Length
‚‚6 <
>
‚‚= >
$num
‚‚? @
?
‚‚A B
$"
‚‚C E
$str
‚‚E N
{
‚‚N O!
comprobanteFileName
‚‚O b
}
‚‚b c
"
‚‚c d
:
‚‚e f
null
‚‚g k
,
‚‚k l
BoletaEmitida
„„ 
=
„„ 
rutaRelativa
„„  ,
}
‰‰ 
;
‰‰ 
_context
ÊÊ 
.
ÊÊ 
Pedidos
ÊÊ 
.
ÊÊ 
Add
ÊÊ  
(
ÊÊ  !
pedido
ÊÊ! '
)
ÊÊ' (
;
ÊÊ( )
await
ÁÁ 
_context
ÁÁ 
.
ÁÁ 
SaveChangesAsync
ÁÁ +
(
ÁÁ+ ,
)
ÁÁ, -
;
ÁÁ- .
foreach
ÈÈ 
(
ÈÈ 
var
ÈÈ 
detalle
ÈÈ  
in
ÈÈ! #
carrito
ÈÈ$ +
.
ÈÈ+ ,
detalleCarrito
ÈÈ, :
)
ÈÈ: ;
{
ÍÍ 
var
ÎÎ 
producto
ÎÎ 
=
ÎÎ 
detalle
ÎÎ &
.
ÎÎ& '
Producto
ÎÎ' /
;
ÎÎ/ 0
if
ÏÏ 
(
ÏÏ 
producto
ÏÏ 
!=
ÏÏ 
null
ÏÏ  $
)
ÏÏ$ %
{
ÌÌ 
producto
ÓÓ 
.
ÓÓ 
Stock
ÓÓ "
-=
ÓÓ# %
detalle
ÓÓ& -
.
ÓÓ- .
Cantidad
ÓÓ. 6
;
ÓÓ6 7
_context
ÔÔ 
.
ÔÔ 
	Productos
ÔÔ &
.
ÔÔ& '
Update
ÔÔ' -
(
ÔÔ- .
producto
ÔÔ. 6
)
ÔÔ6 7
;
ÔÔ7 8
var
ÒÒ 
detallePedido
ÒÒ %
=
ÒÒ& '
new
ÒÒ( +
DetallePedido
ÒÒ, 9
{
ÚÚ 
PedidoId
ÛÛ  
=
ÛÛ! "
pedido
ÛÛ# )
.
ÛÛ) *
PedidoId
ÛÛ* 2
,
ÛÛ2 3

ProductoId
ÙÙ "
=
ÙÙ# $
producto
ÙÙ% -
.
ÙÙ- .

ProductoId
ÙÙ. 8
,
ÙÙ8 9
Cantidad
ıı  
=
ıı! "
detalle
ıı# *
.
ıı* +
Cantidad
ıı+ 3
,
ıı3 4
PrecioUnitario
ˆˆ &
=
ˆˆ' (
(
ˆˆ) *
decimal
ˆˆ* 1
)
ˆˆ1 2
producto
ˆˆ3 ;
.
ˆˆ; <
Precio
ˆˆ< B
,
ˆˆB C
PrecioTotal
˜˜ #
=
˜˜$ %
detalle
˜˜& -
.
˜˜- .
Subtotal
˜˜. 6
}
¯¯ 
;
¯¯ 
_context
˘˘ 
.
˘˘ 
DetallePedidos
˘˘ +
.
˘˘+ ,
Add
˘˘, /
(
˘˘/ 0
detallePedido
˘˘0 =
)
˘˘= >
;
˘˘> ?
await
˙˙ 
_context
˙˙ "
.
˙˙" #
SaveChangesAsync
˙˙# 3
(
˙˙3 4
)
˙˙4 5
;
˙˙5 6
}
˚˚ 
}
¸¸ 
var
˛˛ 
detallesPedido
˛˛ 
=
˛˛  
await
˛˛! &
_context
˛˛' /
.
˛˛/ 0
DetallePedidos
˛˛0 >
.
ˇˇ 
Where
ˇˇ 
(
ˇˇ 
dp
ˇˇ 
=>
ˇˇ 
dp
ˇˇ 
.
ˇˇ 
PedidoId
ˇˇ $
==
ˇˇ% '
pedido
ˇˇ( .
.
ˇˇ. /
PedidoId
ˇˇ/ 7
)
ˇˇ7 8
.
ÄÄ 
Include
ÄÄ 
(
ÄÄ 
dp
ÄÄ 
=>
ÄÄ 
dp
ÄÄ 
.
ÄÄ 
Producto
ÄÄ &
)
ÄÄ& '
.
ÅÅ 
ThenInclude
ÅÅ 
(
ÅÅ 
p
ÅÅ 
=>
ÅÅ 
p
ÅÅ 
.
ÅÅ  
	Categoria
ÅÅ  )
)
ÅÅ) *
.
ÇÇ 
ToListAsync
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
var
ÖÖ 
modelBoleta
ÖÖ 
=
ÖÖ 
new
ÖÖ 
BoletaViewModel
ÖÖ -
{
ÜÜ 	
Pedido
áá 
=
áá 
pedido
áá 
,
áá 
Cliente
àà 
=
àà 
cliente
àà 
,
àà 
DetallesPedido
ââ 
=
ââ 
detallesPedido
ââ +
}
ää 	
;
ää	 

try
åå 
{
çç 	
var
èè 
pdf
èè 
=
èè 
new
èè 
	ViewAsPdf
èè #
(
èè# $
$str
èè$ ,
,
èè, -
modelBoleta
èè. 9
)
èè9 :
{
êê 
FileName
ëë 
=
ëë 
boletaFileName
ëë )
,
ëë) *
PageSize
íí 
=
íí 
Rotativa
íí #
.
íí# $

AspNetCore
íí$ .
.
íí. /
Options
íí/ 6
.
íí6 7
Size
íí7 ;
.
íí; <
A4
íí< >
,
íí> ?
PageOrientation
ìì 
=
ìì  !
Rotativa
ìì" *
.
ìì* +

AspNetCore
ìì+ 5
.
ìì5 6
Options
ìì6 =
.
ìì= >
Orientation
ìì> I
.
ììI J
Portrait
ììJ R
,
ììR S
CustomSwitches
îî 
=
îî  
$str
îî! <
}
ïï 
;
ïï 
var
òò 
pdfData
òò 
=
òò 
await
òò 
pdf
òò  #
.
òò# $
	BuildFile
òò$ -
(
òò- .
ControllerContext
òò. ?
)
òò? @
;
òò@ A
await
ôô 
System
ôô 
.
ôô 
IO
ôô 
.
ôô 
File
ôô  
.
ôô  ! 
WriteAllBytesAsync
ôô! 3
(
ôô3 4
rutaCompleta
ôô4 @
,
ôô@ A
pdfData
ôôB I
)
ôôI J
;
ôôJ K
_context
õõ 
.
õõ 
DetalleCarrito
õõ #
.
õõ# $
RemoveRange
õõ$ /
(
õõ/ 0
carrito
õõ0 7
.
õõ7 8
detalleCarrito
õõ8 F
)
õõF G
;
õõG H
await
úú 
_context
úú 
.
úú 
SaveChangesAsync
úú +
(
úú+ ,
)
úú, -
;
úú- .
TempData
ûû 
[
ûû 
$str
ûû %
]
ûû% &
=
ûû' (
$str
ûû) I
;
ûûI J
TempData
üü 
.
üü 
Remove
üü 
(
üü 
$str
üü ,
)
üü, -
;
üü- .
return
†† 
RedirectToAction
†† #
(
††# $
$str
††$ -
,
††- .
$str
††/ 8
)
††8 9
;
††9 :
}
°° 	
catch
¢¢ 
(
¢¢ 
	Exception
¢¢ 
ex
¢¢ 
)
¢¢ 
{
££ 	
TempData
•• 
[
•• 
$str
•• #
]
••# $
=
••% &
$"
••' )
$str
••) E
{
••E F
ex
••F H
.
••H I
Message
••I P
}
••P Q
"
••Q R
;
••R S
return
ßß 
RedirectToAction
ßß #
(
ßß# $
$str
ßß$ -
,
ßß- .
$str
ßß/ 8
)
ßß8 9
;
ßß9 :
}
®®	 

}
©© 	
public
´´ 
IActionResult
´´ 
	VerBoleta
´´ &
(
´´& '
int
´´' *
id
´´+ -
)
´´- .
{
¨¨ 	
var
≠≠ 
pedido
≠≠ 
=
≠≠ 
_context
≠≠ !
.
≠≠! "
Pedidos
≠≠" )
.
ÆÆ 
Include
ÆÆ 
(
ÆÆ 
p
ÆÆ 
=>
ÆÆ 
p
ÆÆ 
.
ÆÆ  
Cliente
ÆÆ  '
)
ÆÆ' (
.
ØØ 
Include
ØØ 
(
ØØ 
p
ØØ 
=>
ØØ 
p
ØØ 
.
ØØ  
DetallePedidos
ØØ  .
)
ØØ. /
.
∞∞ 
ThenInclude
∞∞ 
(
∞∞ 
dp
∞∞ 
=>
∞∞  "
dp
∞∞# %
.
∞∞% &
Producto
∞∞& .
)
∞∞. /
.
±± 
ThenInclude
±± 
(
±± 
p
±± 
=>
±± !
p
±±" #
.
±±# $
	Categoria
±±$ -
)
±±- .
.
≤≤ 
FirstOrDefault
≤≤ 
(
≤≤  
p
≤≤  !
=>
≤≤" $
p
≤≤% &
.
≤≤& '
PedidoId
≤≤' /
==
≤≤0 2
id
≤≤3 5
)
≤≤5 6
;
≤≤6 7
if
¥¥ 
(
¥¥ 
pedido
¥¥ 
==
¥¥ 
null
¥¥ 
)
¥¥ 
{
µµ 
return
∂∂ 
NotFound
∂∂ 
(
∂∂  
)
∂∂  !
;
∂∂! "
}
∑∑ 
var
ππ 
modelBoleta
ππ 
=
ππ 
new
ππ !
BoletaViewModel
ππ" 1
{
∫∫ 
Pedido
ªª 
=
ªª 
pedido
ªª 
,
ªª  
Cliente
ºº 
=
ºº 
pedido
ºº  
.
ºº  !
Cliente
ºº! (
,
ºº( )
DetallesPedido
ΩΩ 
=
ΩΩ  
pedido
ΩΩ! '
.
ΩΩ' (
DetallePedidos
ΩΩ( 6
.
ΩΩ6 7
ToList
ΩΩ7 =
(
ΩΩ= >
)
ΩΩ> ?
}
ææ 
;
ææ 
return
¿¿ 
new
¿¿ 
	ViewAsPdf
¿¿  
(
¿¿  !
$str
¿¿! )
,
¿¿) *
modelBoleta
¿¿+ 6
)
¿¿6 7
;
¿¿7 8
}
¡¡ 	
}
¬¬ 
}√√ ÀØ
FC:\Users\ACER\Desktop\GRINPLAS\Controllers\AnalisisVentasController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
[ 
	Authorize 
( 
Roles 
= 
$str '
)' (
]( )
public 

class $
AnalisisVentasController )
:* +

Controller, 6
{ 
private 
readonly 
ILogger  
<  !$
AnalisisVentasController! 9
>9 :
_logger; B
;B C
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public $
AnalisisVentasController '
(' (
ILogger( /
</ 0$
AnalisisVentasController0 H
>H I
loggerJ P
,P Q 
ApplicationDbContextR f
contextg n
)n o
{ 	
_logger 
= 
logger 
; 
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
Index) .
(. /
)/ 0
{ 	
var 
	viewModel 
= 
new 
AnalisisViewModel  1
(1 2
)2 3
;3 4
try 
{   
await"" 
LoadBaseData"" "
(""" #
	viewModel""# ,
)"", -
;""- .
return## 
View## 
(## 
	viewModel## %
)##% &
;##& '
}$$ 
catch%% 
(%% 
	Exception%% 
ex%% 
)%%  
{&& 
_logger'' 
.'' 
LogError''  
(''  !
ex''! #
,''# $
$str''% L
)''L M
;''M N
return(( 
View(( 
((( 
	viewModel(( %
)((% &
;((& '
})) 
}** 	
[,, 	
HttpGet,,	 
],, 
public-- 
async-- 
Task-- 
<-- 
IActionResult-- '
>--' (
GetChartData--) 5
(--5 6
string--6 <
period--= C
,--C D
string--E K
category--L T
,--T U
DateTime--V ^
?--^ _

customDate--` j
)--j k
{.. 	
try// 
{00 
var11 
timeZone11 
=11 
TimeZoneInfo11 +
.11+ ,"
FindSystemTimeZoneById11, B
(11B C
$str11C ]
)11] ^
;11^ _
var22 

todayLocal22 
=22  
TimeZoneInfo22! -
.22- .
ConvertTimeFromUtc22. @
(22@ A
DateTime22A I
.22I J
UtcNow22J P
,22P Q
timeZone22R Z
)22Z [
.22[ \
Date22\ `
;22` a
var55 
pedidosQuery55  
=55! "
_context55# +
.55+ ,
Pedidos55, 3
.66 
Include66 
(66 
p66 
=>66 !
p66" #
.66# $
DetallePedidos66$ 2
)662 3
.77 
ThenInclude77 $
(77$ %
d77% &
=>77' )
d77* +
.77+ ,
Producto77, 4
)774 5
.88 
ThenInclude88 $
(88$ %
p88% &
=>88' )
p88* +
.88+ ,
	Categoria88, 5
)885 6
.99 
AsQueryable99  
(99  !
)99! "
;99" #
switch<< 
(<< 
period<< 
)<< 
{== 
case>> 
$str>> !
:>>! "
var?? 
startOfWeek?? '
=??( )

todayLocal??* 4
.??4 5
AddDays??5 <
(??< =
-??= >
(??> ?
int??? B
)??B C

todayLocal??C M
.??M N
	DayOfWeek??N W
)??W X
;??X Y
pedidosQuery@@ $
=@@% &
pedidosQuery@@' 3
.@@3 4
Where@@4 9
(@@9 :
p@@: ;
=>@@< >
p@@? @
.@@@ A
FechaEmision@@A M
>=@@N P
startOfWeek@@Q \
&&@@] _
p@@` a
.@@a b
FechaEmision@@b n
<=@@o q

todayLocal@@r |
)@@| }
;@@} ~
breakAA 
;AA 
caseBB 
$strBB 
:BB 
pedidosQueryCC $
=CC% &
pedidosQueryCC' 3
.CC3 4
WhereCC4 9
(CC9 :
pCC: ;
=>CC< >
pCC? @
.CC@ A
FechaEmisionCCA M
.CCM N
MonthCCN S
==CCT V

todayLocalCCW a
.CCa b
MonthCCb g
&&CCh j
pCCk l
.CCl m
FechaEmisionCCm y
.CCy z
YearCCz ~
==	CC Å

todayLocal
CCÇ å
.
CCå ç
Year
CCç ë
)
CCë í
;
CCí ì
breakDD 
;DD 
caseEE 
$strEE 
:EE 
pedidosQueryFF $
=FF% &
pedidosQueryFF' 3
.FF3 4
WhereFF4 9
(FF9 :
pFF: ;
=>FF< >
pFF? @
.FF@ A
FechaEmisionFFA M
.FFM N
YearFFN R
==FFS U

todayLocalFFV `
.FF` a
YearFFa e
)FFe f
;FFf g
breakGG 
;GG 
caseHH 
$strHH !
:HH! "
ifII 
(II 
!II 

customDateII '
.II' (
HasValueII( 0
)II0 1
returnII2 8
JsonII9 =
(II= >
newII> A
{IIB C
successIID K
=IIL M
falseIIN S
,IIS T
errorIIU Z
=II[ \
$strII] t
}IIu v
)IIv w
;IIw x
pedidosQueryJJ $
=JJ% &
pedidosQueryJJ' 3
.JJ3 4
WhereJJ4 9
(JJ9 :
pJJ: ;
=>JJ< >
pJJ? @
.JJ@ A
FechaEmisionJJA M
.JJM N
DateJJN R
==JJS U

customDateJJV `
.JJ` a
ValueJJa f
.JJf g
DateJJg k
)JJk l
;JJl m
breakKK 
;KK 
defaultLL 
:LL 
pedidosQueryMM $
=MM% &
pedidosQueryMM' 3
.MM3 4
WhereMM4 9
(MM9 :
pMM: ;
=>MM< >
pMM? @
.MM@ A
FechaEmisionMMA M
>=MMN P

todayLocalMMQ [
.MM[ \
AddDaysMM\ c
(MMc d
-MMd e
$numMMe f
)MMf g
&&MMh j
pMMk l
.MMl m
FechaEmisionMMm y
<=MMz |

todayLocal	MM} á
)
MMá à
;
MMà â
breakNN 
;NN 
}OO 
varQQ 
pedidosFiltradosQQ $
=QQ% &
awaitQQ' ,
pedidosQueryQQ- 9
.QQ9 :
ToListAsyncQQ: E
(QQE F
)QQF G
;QQG H
varTT 
productosQueryTT "
=TT# $
_contextTT% -
.TT- .
	ProductosTT. 7
.UU 
IncludeUU 
(UU 
pUU 
=>UU !
pUU" #
.UU# $
	CategoriaUU$ -
)UU- .
.VV 
AsQueryableVV  
(VV  !
)VV! "
;VV" #
ifXX 
(XX 
categoryXX 
!=XX 
$strXX  '
)XX' (
{YY 
productosQueryZZ "
=ZZ# $
productosQueryZZ% 3
.ZZ3 4
WhereZZ4 9
(ZZ9 :
pZZ: ;
=>ZZ< >
pZZ? @
.ZZ@ A
	CategoriaZZA J
.ZZJ K
NombreZZK Q
==ZZR T
categoryZZU ]
)ZZ] ^
;ZZ^ _
}[[ 
var]] 
	productos]] 
=]] 
await]]  %
productosQuery]]& 4
.]]4 5
ToListAsync]]5 @
(]]@ A
)]]A B
;]]B C
var`` 
	resultado`` 
=`` 
	productos``  )
.``) *
Select``* 0
(``0 1
p``1 2
=>``3 5
new``6 9
{aa 
NombreProductobb "
=bb# $
pbb% &
.bb& '
Nombrebb' -
,bb- .
CantidadVendidacc #
=cc$ %
pedidosFiltradoscc& 6
.dd 

SelectManydd #
(dd# $
peddd$ '
=>dd( *
peddd+ .
.dd. /
DetallePedidosdd/ =
)dd= >
.ee 
Whereee 
(ee 
dee  
=>ee! #
dee$ %
.ee% &

ProductoIdee& 0
==ee1 3
pee4 5
.ee5 6

ProductoIdee6 @
)ee@ A
.ff 
Sumff 
(ff 
dff 
=>ff !
dff" #
.ff# $
Cantidadff$ ,
)ff, -
}gg 
)gg 
.hh 
Wherehh 
(hh 
xhh 
=>hh 
xhh 
.hh 
CantidadVendidahh -
>hh. /
$numhh0 1
)hh1 2
.ii 
OrderByDescendingii "
(ii" #
xii# $
=>ii% '
xii( )
.ii) *
CantidadVendidaii* 9
)ii9 :
.jj 
ToListjj 
(jj 
)jj 
;jj 
returnll 
Jsonll 
(ll 
newll 
{mm 
labelsnn 
=nn 
	resultadonn &
.nn& '
Selectnn' -
(nn- .
xnn. /
=>nn0 2
xnn3 4
.nn4 5
NombreProductonn5 C
)nnC D
.nnD E
ToArraynnE L
(nnL M
)nnM N
,nnN O
valuesoo 
=oo 
	resultadooo &
.oo& '
Selectoo' -
(oo- .
xoo. /
=>oo0 2
xoo3 4
.oo4 5
CantidadVendidaoo5 D
)ooD E
.ooE F
ToArrayooF M
(ooM N
)ooN O
,ooO P
successpp 
=pp 
truepp "
}qq 
)qq 
;qq 
}rr 
catchss 
(ss 
	Exceptionss 
exss 
)ss  
{tt 
_loggeruu 
.uu 
LogErroruu  
(uu  !
exuu! #
,uu# $
$struu% M
)uuM N
;uuN O
returnvv 
Jsonvv 
(vv 
newvv 
{vv  !
successvv" )
=vv* +
falsevv, 1
,vv1 2
errorvv3 8
=vv9 :
exvv; =
.vv= >
Messagevv> E
}vvF G
)vvG H
;vvH I
}ww 
}xx 	
[yy 	
HttpGetyy	 
]yy 
publiczz 
asynczz 
Taskzz 
<zz 
IActionResultzz '
>zz' (
GetProductoszz) 5
(zz5 6
stringzz6 <
	categoriazz= F
)zzF G
{{{ 	
try|| 
{}} 
var~~ 
	productos~~ 
=~~ 
await~~  %
_context~~& .
.~~. /
	Productos~~/ 8
. 
Include 
( 
p 
=> !
p" #
.# $
	Categoria$ -
)- .
.
ÄÄ 
Where
ÄÄ 
(
ÄÄ 
p
ÄÄ 
=>
ÄÄ 
p
ÄÄ  !
.
ÄÄ! "
	Categoria
ÄÄ" +
.
ÄÄ+ ,
Nombre
ÄÄ, 2
==
ÄÄ3 5
	categoria
ÄÄ6 ?
)
ÄÄ? @
.
ÅÅ 
Select
ÅÅ 
(
ÅÅ 
p
ÅÅ 
=>
ÅÅ  
new
ÅÅ! $
{
ÅÅ% &
id
ÇÇ 
=
ÇÇ 
p
ÇÇ 
.
ÇÇ 

ProductoId
ÇÇ )
,
ÇÇ) *
nombre
ÉÉ 
=
ÉÉ  
p
ÉÉ! "
.
ÉÉ" #
Nombre
ÉÉ# )
}
ÑÑ 
)
ÑÑ 
.
ÖÖ 
ToListAsync
ÖÖ  
(
ÖÖ  !
)
ÖÖ! "
;
ÖÖ" #
return
áá 
Json
áá 
(
áá 
	productos
áá %
)
áá% &
;
áá& '
}
àà 
catch
ââ 
(
ââ 
	Exception
ââ 
ex
ââ 
)
ââ  
{
ää 
_logger
ãã 
.
ãã 
LogError
ãã  
(
ãã  !
ex
ãã! #
,
ãã# $
$str
ãã% A
)
ããA B
;
ããB C
return
åå 
Json
åå 
(
åå 
new
åå 
{
åå  !
success
åå" )
=
åå* +
false
åå, 1
,
åå1 2
error
åå3 8
=
åå9 :
ex
åå; =
.
åå= >
Message
åå> E
}
ååF G
)
ååG H
;
ååH I
}
çç 
}
éé 	
[
êê 	
HttpGet
êê	 
]
êê 
public
ëë 
async
ëë 
Task
ëë 
<
ëë 
IActionResult
ëë '
>
ëë' (
GetVentasProducto
ëë) :
(
ëë: ;
string
ëë; A
producto
ëëB J
,
ëëJ K
string
ëëL R
fecha
ëëS X
)
ëëX Y
{
íí 	
try
ìì 
{
îî 
if
ññ 
(
ññ 
!
ññ 
DateTime
ññ 
.
ññ 
TryParse
ññ &
(
ññ& '
fecha
ññ' ,
,
ññ, -
out
ññ. 1
var
ññ2 5
	fechaDate
ññ6 ?
)
ññ? @
)
ññ@ A
{
óó 
return
òò 
Json
òò 
(
òò  
new
òò  #
{
òò$ %
success
òò& -
=
òò. /
false
òò0 5
,
òò5 6
error
òò7 <
=
òò= >
$str
òò? Z
}
òò[ \
)
òò\ ]
;
òò] ^
}
ôô 
var
õõ 
cantidad
õõ 
=
õõ 
await
õõ $
_context
õõ% -
.
õõ- .
DetallePedidos
õõ. <
.
úú 
Include
úú 
(
úú 
d
úú 
=>
úú !
d
úú" #
.
úú# $
Producto
úú$ ,
)
úú, -
.
ùù 
Include
ùù 
(
ùù 
d
ùù 
=>
ùù !
d
ùù" #
.
ùù# $
Pedido
ùù$ *
)
ùù* +
.
ûû 
Where
ûû 
(
ûû 
d
ûû 
=>
ûû 
d
ûû  !
.
ûû! "
Producto
ûû" *
.
ûû* +
Nombre
ûû+ 1
==
ûû2 4
producto
ûû5 =
&&
ûû> @
d
üü 
.
üü 
Pedido
üü  
.
üü  !
FechaEmision
üü! -
.
üü- .
Date
üü. 2
==
üü3 5
	fechaDate
üü6 ?
.
üü? @
Date
üü@ D
)
üüD E
.
†† 
SumAsync
†† 
(
†† 
d
†† 
=>
††  "
(
††# $
int
††$ '
?
††' (
)
††( )
d
††) *
.
††* +
Cantidad
††+ 3
)
††3 4
??
††5 7
$num
††8 9
;
††9 :
return
¢¢ 
Json
¢¢ 
(
¢¢ 
new
¢¢ 
{
¢¢  !
success
££ 
=
££ 
true
££ "
,
££" #
cantidad
§§ 
}
•• 
)
•• 
;
•• 
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
ex
ßß 
)
ßß  
{
®® 
_logger
©© 
.
©© 
LogError
©©  
(
©©  !
ex
©©! #
,
©©# $
$str
©©% K
)
©©K L
;
©©L M
return
™™ 
Json
™™ 
(
™™ 
new
™™ 
{
™™  !
success
´´ 
=
´´ 
false
´´ #
,
´´# $
error
¨¨ 
=
¨¨ 
ex
¨¨ 
.
¨¨ 
Message
¨¨ &
,
¨¨& '
cantidad
≠≠ 
=
≠≠ 
$num
≠≠  
}
ÆÆ 
)
ÆÆ 
;
ÆÆ 
}
ØØ 
}
∞∞ 	
[
≤≤ 	
HttpGet
≤≤	 
]
≤≤ 
public
≥≥ 
async
≥≥ 
Task
≥≥ 
<
≥≥ 
IActionResult
≥≥ '
>
≥≥' (
GetStockProducto
≥≥) 9
(
≥≥9 :
string
≥≥: @
producto
≥≥A I
)
≥≥I J
{
¥¥ 	
try
µµ 
{
∂∂ 
var
∑∑ 
cantidad
∑∑ 
=
∑∑ 
await
∑∑ $
_context
∑∑% -
.
∑∑- .
	Productos
∑∑. 7
.
∏∏ 
Where
∏∏ 
(
∏∏ 
p
∏∏ 
=>
∏∏ 
p
∏∏  !
.
∏∏! "
Nombre
∏∏" (
==
∏∏) +
producto
∏∏, 4
)
∏∏4 5
.
ππ 
Select
ππ 
(
ππ 
p
ππ 
=>
ππ  
p
ππ! "
.
ππ" #
Stock
ππ# (
)
ππ( )
.
∫∫ !
FirstOrDefaultAsync
∫∫ (
(
∫∫( )
)
∫∫) *
;
∫∫* +
return
ºº 
Json
ºº 
(
ºº 
new
ºº 
{
ºº  !
cantidad
ºº" *
}
ºº+ ,
)
ºº, -
;
ºº- .
}
ΩΩ 
catch
ææ 
(
ææ 
	Exception
ææ 
ex
ææ 
)
ææ  
{
øø 
_logger
¿¿ 
.
¿¿ 
LogError
¿¿  
(
¿¿  !
ex
¿¿! #
,
¿¿# $
$str
¿¿% J
)
¿¿J K
;
¿¿K L
return
¡¡ 
Json
¡¡ 
(
¡¡ 
new
¡¡ 
{
¡¡  !
success
¡¡" )
=
¡¡* +
false
¡¡, 1
,
¡¡1 2
error
¡¡3 8
=
¡¡9 :
ex
¡¡; =
.
¡¡= >
Message
¡¡> E
}
¡¡F G
)
¡¡G H
;
¡¡H I
}
¬¬ 
}
√√ 	
private
ƒƒ 
async
ƒƒ 
Task
ƒƒ 
LoadBaseData
ƒƒ '
(
ƒƒ' (
AnalisisViewModel
ƒƒ( 9
	viewModel
ƒƒ: C
)
ƒƒC D
{
≈≈ 	
var
∆∆ 
pedidos
∆∆ 
=
∆∆ 
await
∆∆ 
_context
∆∆  (
.
∆∆( )
Pedidos
∆∆) 0
.
«« 
Include
«« 
(
«« 
p
«« 
=>
«« 
p
«« 
.
««  
DetallePedidos
««  .
)
««. /
.
»» 
ThenInclude
»» 
(
»» 
d
»» 
=>
»» !
d
»»" #
.
»»# $
Producto
»»$ ,
)
»», -
.
…… 
ThenInclude
…… 
(
…… 
pr
…… 
=>
……  "
pr
……# %
.
……% &
	Categoria
……& /
)
……/ 0
.
   
ToListAsync
   
(
   
)
   
;
   
	viewModel
ÃÃ 
.
ÃÃ 
VentasBolsas
ÃÃ "
=
ÃÃ# $
pedidos
ÃÃ% ,
.
ÕÕ 

SelectMany
ÕÕ 
(
ÕÕ 
p
ÕÕ 
=>
ÕÕ  
p
ÕÕ! "
.
ÕÕ" #
DetallePedidos
ÕÕ# 1
)
ÕÕ1 2
.
ŒŒ 
Where
ŒŒ 
(
ŒŒ 
d
ŒŒ 
=>
ŒŒ 
d
ŒŒ 
.
ŒŒ 
Producto
ŒŒ &
?
ŒŒ& '
.
ŒŒ' (
	Categoria
ŒŒ( 1
?
ŒŒ1 2
.
ŒŒ2 3
Nombre
ŒŒ3 9
==
ŒŒ: <
$str
ŒŒ= E
)
ŒŒE F
.
œœ 
Sum
œœ 
(
œœ 
d
œœ 
=>
œœ 
d
œœ 
.
œœ 
Cantidad
œœ $
)
œœ$ %
;
œœ% &
	viewModel
—— 
.
—— 
VentasMangas
—— "
=
——# $
pedidos
——% ,
.
““ 

SelectMany
““ 
(
““ 
p
““ 
=>
““  
p
““! "
.
““" #
DetallePedidos
““# 1
)
““1 2
.
”” 
Where
”” 
(
”” 
d
”” 
=>
”” 
d
”” 
.
”” 
Producto
”” &
?
””& '
.
””' (
	Categoria
””( 1
?
””1 2
.
””2 3
Nombre
””3 9
==
””: <
$str
””= E
)
””E F
.
‘‘ 
Sum
‘‘ 
(
‘‘ 
d
‘‘ 
=>
‘‘ 
d
‘‘ 
.
‘‘ 
Cantidad
‘‘ $
)
‘‘$ %
;
‘‘% &
	viewModel
÷÷ 
.
÷÷ 
TotalClientes
÷÷ #
=
÷÷$ %
await
÷÷& +
_context
÷÷, 4
.
÷÷4 5
Clientes
÷÷5 =
.
÷÷= >

CountAsync
÷÷> H
(
÷÷H I
)
÷÷I J
;
÷÷J K
	viewModel
◊◊ 
.
◊◊ 
GananciaTotal
◊◊ #
=
◊◊$ %
pedidos
◊◊& -
.
◊◊- .
Sum
◊◊. 1
(
◊◊1 2
p
◊◊2 3
=>
◊◊4 6
p
◊◊7 8
.
◊◊8 9
Total
◊◊9 >
)
◊◊> ?
;
◊◊? @
	viewModel
ÿÿ 
.
ÿÿ 
Pedidos
ÿÿ 
=
ÿÿ 
pedidos
ÿÿ  '
;
ÿÿ' (
	viewModel
ŸŸ 
.
ŸŸ 
Clientes
ŸŸ 
=
ŸŸ  
await
ŸŸ! &
_context
ŸŸ' /
.
ŸŸ/ 0
Clientes
ŸŸ0 8
.
ŸŸ8 9
ToListAsync
ŸŸ9 D
(
ŸŸD E
)
ŸŸE F
;
ŸŸF G
}
⁄⁄ 	
[
‹‹ 	
ResponseCache
‹‹	 
(
‹‹ 
Duration
‹‹ 
=
‹‹  !
$num
‹‹" #
,
‹‹# $
Location
‹‹% -
=
‹‹. /#
ResponseCacheLocation
‹‹0 E
.
‹‹E F
None
‹‹F J
,
‹‹J K
NoStore
‹‹L S
=
‹‹T U
true
‹‹V Z
)
‹‹Z [
]
‹‹[ \
public
›› 
IActionResult
›› 
Error
›› "
(
››" #
)
››# $
{
ﬁﬁ 	
return
ﬂﬂ 
View
ﬂﬂ 
(
ﬂﬂ 
new
ﬂﬂ 
ErrorViewModel
ﬂﬂ *
{
ﬂﬂ+ ,
	RequestId
ﬂﬂ- 6
=
ﬂﬂ7 8
Activity
ﬂﬂ9 A
.
ﬂﬂA B
Current
ﬂﬂB I
?
ﬂﬂI J
.
ﬂﬂJ K
Id
ﬂﬂK M
??
ﬂﬂN P
HttpContext
ﬂﬂQ \
.
ﬂﬂ\ ]
TraceIdentifier
ﬂﬂ] l
}
ﬂﬂm n
)
ﬂﬂn o
;
ﬂﬂo p
}
‡‡ 	
}
·· 
}‚‚ ó?
?C:\Users\ACER\Desktop\GRINPLAS\Controllers\AccountController.cs
	namespace 	
GRINPLAS
 
. 
Controllers 
{ 
[ 
	Authorize 
] 
public 

class 
AccountController "
:# $

Controller% /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public 
AccountController  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
,I J 
ApplicationDbContext 0
context1 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_context 
= 
context 
; 
} 	
[ 	
	Authorize	 
] 
[ 	
HttpPost	 
] 
public   
async   
Task   
<   
IActionResult   '
>  ' (
UpdateProfile  ) 6
(  6 7
[  7 8
FromBody  8 @
]  @ A 
ProfileEditViewModel  B V
model  W \
)  \ ]
{!! 	
if"" 
("" 
model"" 
=="" 
null"" 
)"" 
{## 
return$$ 

BadRequest$$ !
($$! "
new$$" %
{$$& '
success$$( /
=$$0 1
false$$2 7
,$$7 8
message$$9 @
=$$A B
$str$$C T
}$$U V
)$$V W
;$$W X
}%% 
try'' 
{(( 
var)) 
user)) 
=)) 
await))  
_userManager))! -
.))- .
GetUserAsync)). :
()): ;
User)); ?
)))? @
;))@ A
if** 
(** 
user** 
==** 
null**  
)**  !
{++ 
return,, 
NotFound,, #
(,,# $
new,,$ '
{,,( )
success,,* 1
=,,2 3
false,,4 9
,,,9 :
message,,; B
=,,C D
$str,,E \
},,] ^
),,^ _
;,,_ `
}-- 
if00 
(00 
!00 
string00 
.00 
IsNullOrEmpty00 )
(00) *
model00* /
.00/ 0
Email000 5
)005 6
&&007 9
model00: ?
.00? @
Email00@ E
!=00F H
user00I M
.00M N
Email00N S
)00S T
{11 
user22 
.22 
Email22 
=22  
model22! &
.22& '
Email22' ,
;22, -
await33 
_userManager33 &
.33& '
UpdateAsync33' 2
(332 3
user333 7
)337 8
;338 9
}44 
var77 
cliente77 
=77 
await77 #
_context77$ ,
.77, -
Clientes77- 5
.88 
FirstOrDefaultAsync88 (
(88( )
c88) *
=>88+ -
c88. /
.88/ 0
ApplicationUserId880 A
==88B D
user88E I
.88I J
Id88J L
)88L M
??88N P
new88Q T
Cliente88U \
(88\ ]
)88] ^
;88^ _
cliente;; 
.;; 
ApplicationUserId;; )
=;;* +
user;;, 0
.;;0 1
Id;;1 3
;;;3 4
cliente<< 
.<< 
NombreEmpresa<< %
=<<& '
model<<( -
.<<- .
NombreEmpresa<<. ;
??<<< >
cliente<<? F
.<<F G
NombreEmpresa<<G T
;<<T U
cliente== 
.== 
TipDoc== 
===  
model==! &
.==& '
TipDoc==' -
??==. 0
cliente==1 8
.==8 9
TipDoc==9 ?
;==? @
cliente>> 
.>> 
NumDoc>> 
=>>  
model>>! &
.>>& '
NumDoc>>' -
??>>. 0
cliente>>1 8
.>>8 9
NumDoc>>9 ?
;>>? @
cliente?? 
.?? 
Telefono??  
=??! "
model??# (
.??( )
Telefono??) 1
????2 4
cliente??5 <
.??< =
Telefono??= E
;??E F
cliente@@ 
.@@ 
Imagen@@ 
=@@  
model@@! &
.@@& '
Imagen@@' -
??@@. 0
cliente@@1 8
.@@8 9
Imagen@@9 ?
;@@? @
ifBB 
(BB 
clienteBB 
.BB 
	ClienteIdBB %
==BB& (
$numBB) *
)BB* +
{CC 
_contextDD 
.DD 
ClientesDD %
.DD% &
AddDD& )
(DD) *
clienteDD* 1
)DD1 2
;DD2 3
}EE 
elseFF 
{GG 
_contextHH 
.HH 
ClientesHH %
.HH% &
UpdateHH& ,
(HH, -
clienteHH- 4
)HH4 5
;HH5 6
}II 
awaitKK 
_contextKK 
.KK 
SaveChangesAsyncKK /
(KK/ 0
)KK0 1
;KK1 2
returnMM 
JsonMM 
(MM 
newMM 
{MM  !
successMM" )
=MM* +
trueMM, 0
}MM1 2
)MM2 3
;MM3 4
}NN 
catchOO 
(OO 
	ExceptionOO 
exOO 
)OO  
{PP 
returnQQ 

StatusCodeQQ !
(QQ! "
$numQQ" %
,QQ% &
newQQ' *
{QQ+ ,
successQQ- 4
=QQ5 6
falseQQ7 <
,QQ< =
messageQQ> E
=QQF G
exQQH J
.QQJ K
MessageQQK R
}QQS T
)QQT U
;QQU V
}RR 
}SS 	
[UU 	
HttpPostUU	 
]UU 
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
ChangePasswordVV) 7
(VV7 8
stringWW 
currentPasswordWW "
,WW" #
stringXX 
newPasswordXX 
)XX 
{YY 	
varZZ 
userZZ 
=ZZ 
awaitZZ 
_userManagerZZ )
.ZZ) *
GetUserAsyncZZ* 6
(ZZ6 7
UserZZ7 ;
)ZZ; <
;ZZ< =
if[[ 
([[ 
user[[ 
==[[ 
null[[ 
)[[ 
return[[ $
NotFound[[% -
([[- .
)[[. /
;[[/ 0
var]] 
result]] 
=]] 
await]] 
_userManager]] +
.]]+ ,
ChangePasswordAsync]], ?
(]]? @
user^^ 
,^^ 
currentPassword^^ %
,^^% &
newPassword^^' 2
)^^2 3
;^^3 4
if`` 
(`` 
result`` 
.`` 
	Succeeded``  
)``  !
{aa 
returnbb 
Jsonbb 
(bb 
newbb 
{bb  !
successbb" )
=bb* +
truebb, 0
}bb1 2
)bb2 3
;bb3 4
}cc 
returnee 
Jsonee 
(ee 
newee 
{ee 
successff 
=ff 
falseff 
,ff  
messagegg 
=gg 
stringgg  
.gg  !
Joingg! %
(gg% &
$strgg& *
,gg* +
resultgg, 2
.gg2 3
Errorsgg3 9
.gg9 :
Selectgg: @
(gg@ A
eggA B
=>ggC E
eggF G
.ggG H
DescriptionggH S
)ggS T
)ggT U
}hh 
)hh 
;hh 
}ii 	
}jj 
}kk ·
CC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Error.cshtml.cs
	namespace

 	
GRINPLAS


 
.

 
Areas

 
.

 
Identity

 !
.

! "
Pages

" '
{ 
[ 
AllowAnonymous 
] 
[ 
ResponseCache 
( 
Duration 
= 
$num 
,  
Location! )
=* +!
ResponseCacheLocation, A
.A B
NoneB F
,F G
NoStoreH O
=P Q
trueR V
)V W
]W X
public 

class 

ErrorModel 
: 
	PageModel '
{ 
public 
string 
	RequestId 
{  !
get" %
;% &
set' *
;* +
}, -
public 
bool 
ShowRequestId !
=>" $
!% &
string& ,
., -
IsNullOrEmpty- :
(: ;
	RequestId; D
)D E
;E F
public$$ 
void$$ 
OnGet$$ 
($$ 
)$$ 
{%% 	
	RequestId&& 
=&& 
Activity&&  
.&&  !
Current&&! (
?&&( )
.&&) *
Id&&* ,
??&&- /
HttpContext&&0 ;
.&&; <
TraceIdentifier&&< K
;&&K L
}'' 	
}(( 
})) ˘
_C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ResetPasswordConfirmation.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{		 
[ 
AllowAnonymous 
] 
public 

class *
ResetPasswordConfirmationModel /
:0 1
	PageModel2 ;
{ 
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} Ù6
SC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ResetPassword.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
ResetPasswordModel #
:$ %
	PageModel& /
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
public 
ResetPasswordModel !
(! "
UserManager" -
<- .
ApplicationUser. =
>= >
userManager? J
)J K
{ 	
_userManager 
= 
userManager &
;& '
} 	
[ 	
BindProperty	 
] 
public   

InputModel   
Input   
{    !
get  " %
;  % &
set  ' *
;  * +
}  , -
public&& 
class&& 

InputModel&& '
{'' 	
[(( 
Required(( 
((( 
ErrorMessage(( "
=((# $
$str((% I
)((I J
]((J K
[)) 
EmailAddress)) 
()) 
ErrorMessage)) &
=))' (
$str))) O
)))O P
]))P Q
public** 
string** 
Email** 
{**  !
get**" %
;**% &
set**' *
;*** +
}**, -
[,, 
Required,, 
(,, 
ErrorMessage,, "
=,,# $
$str,,% A
),,A B
],,B C
[-- 
StringLength-- 
(-- 
$num-- 
,-- 
ErrorMessage-- +
=--, -
$str--. l
,--l m
MinimumLength--n {
=--| }
$num--~ 
)	-- Ä
]
--Ä Å
[.. 
DataType.. 
(.. 
DataType.. 
... 
Password.. '
)..' (
]..( )
public// 
string// 
Password// "
{//# $
get//% (
;//( )
set//* -
;//- .
}/// 0
[11 
DataType11 
(11 
DataType11 
.11 
Password11 '
)11' (
]11( )
[22 
Display22 
(22 
Name22 
=22 
$str22 2
)222 3
]223 4
[33 
Compare33 
(33 
$str33 
,33  
ErrorMessage33! -
=33. /
$str330 _
)33_ `
]33` a
public44 
string44 
ConfirmPassword44 )
{44* +
get44, /
;44/ 0
set441 4
;444 5
}446 7
[66 
Required66 
(66 
ErrorMessage66 "
=66# $
$str66% M
)66M N
]66N O
public77 
string77 
Code77 
{77  
get77! $
;77$ %
set77& )
;77) *
}77+ ,
}88 	
public:: 
IActionResult:: 
OnGet:: "
(::" #
string::# )
code::* .
=::/ 0
null::1 5
)::5 6
{;; 	
if<< 
(<< 
code<< 
==<< 
null<< 
)<< 
{== 
return>> 

BadRequest>> !
(>>! "
$str>>" O
)>>O P
;>>P Q
}?? 
else@@ 
{AA 
InputBB 
=BB 
newBB 

InputModelBB &
{CC 
CodeDD 
=DD 
codeDD 
}EE 
;EE 
returnFF 
PageFF 
(FF 
)FF 
;FF 
}GG 
}HH 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
IActionResultJJ '
>JJ' (
OnPostAsyncJJ) 4
(JJ4 5
)JJ5 6
{KK 	
ifLL 
(LL 
!LL 

ModelStateLL 
.LL 
IsValidLL #
)LL# $
{MM 
returnNN 
PageNN 
(NN 
)NN 
;NN 
}OO 
varQQ 
userQQ 
=QQ 
awaitQQ 
_userManagerQQ )
.QQ) *
FindByEmailAsyncQQ* :
(QQ: ;
InputQQ; @
.QQ@ A
EmailQQA F
)QQF G
;QQG H
ifRR 
(RR 
userRR 
==RR 
nullRR 
)RR 
{SS 
returnUU 
RedirectToPageUU %
(UU% &
$strUU& C
)UUC D
;UUD E
}VV 
varYY 
decodedTokenYY 
=YY 
EncodingYY '
.YY' (
UTF8YY( ,
.YY, -
	GetStringYY- 6
(YY6 7
WebEncodersYY7 B
.YYB C
Base64UrlDecodeYYC R
(YYR S
InputYYS X
.YYX Y
CodeYYY ]
)YY] ^
)YY^ _
;YY_ `
var[[ 
result[[ 
=[[ 
await[[ 
_userManager[[ +
.[[+ ,
ResetPasswordAsync[[, >
([[> ?
user[[? C
,[[C D
decodedToken[[E Q
,[[Q R
Input[[S X
.[[X Y
Password[[Y a
)[[a b
;[[b c
if]] 
(]] 
result]] 
.]] 
	Succeeded]]  
)]]  !
{^^ 
await`` 
_userManager`` "
.``" #$
UpdateSecurityStampAsync``# ;
(``; <
user``< @
)``@ A
;``A B
returnaa 
RedirectToPageaa %
(aa% &
$straa& C
)aaC D
;aaD E
}bb 
ifee 
(ee 
resultee 
.ee 
Errorsee 
.ee 
Anyee !
(ee! "
eee" #
=>ee$ &
eee' (
.ee( )
Codeee) -
==ee. 0
$stree1 ?
)ee? @
)ee@ A
{ff 

ModelStategg 
.gg 
AddModelErrorgg (
(gg( )
stringgg) /
.gg/ 0
Emptygg0 5
,gg5 6
$str	gg7 è
)
ggè ê
;
ggê ë
}hh 
elseii 
{jj 
foreachkk 
(kk 
varkk 
errorkk "
inkk# %
resultkk& ,
.kk, -
Errorskk- 3
)kk3 4
{ll 

ModelStatemm 
.mm 
AddModelErrormm ,
(mm, -
stringmm- 3
.mm3 4
Emptymm4 9
,mm9 :
errormm; @
.mm@ A
DescriptionmmA L
)mmL M
;mmM N
}nn 
}oo 
returnqq 
Pageqq 
(qq 
)qq 
;qq 
}rr 	
}ss 
}tt ¡'
]C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ResendEmailConfirmation.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
[ 
AllowAnonymous 
] 
public 

class (
ResendEmailConfirmationModel -
:. /
	PageModel0 9
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
IEmailSender %
_emailSender& 2
;2 3
public (
ResendEmailConfirmationModel +
(+ ,
UserManager, 7
<7 8
ApplicationUser8 G
>G H
userManagerI T
,T U
IEmailSenderV b
emailSenderc n
)n o
{ 	
_userManager 
= 
userManager &
;& '
_emailSender 
= 
emailSender &
;& '
} 	
[$$ 	
BindProperty$$	 
]$$ 
public%% 

InputModel%% 
Input%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
public++ 
class++ 

InputModel++ 
{,, 	
[11 
Required11 
]11 
[22 
EmailAddress22 
]22 
public33 
string33 
Email33 
{33  !
get33" %
;33% &
set33' *
;33* +
}33, -
}44 	
public66 
void66 
OnGet66 
(66 
)66 
{77 	
}88 	
public:: 
async:: 
Task:: 
<:: 
IActionResult:: '
>::' (
OnPostAsync::) 4
(::4 5
)::5 6
{;; 	
if<< 
(<< 
!<< 

ModelState<< 
.<< 
IsValid<< #
)<<# $
{== 
return>> 
Page>> 
(>> 
)>> 
;>> 
}?? 
varAA 
userAA 
=AA 
awaitAA 
_userManagerAA )
.AA) *
FindByEmailAsyncAA* :
(AA: ;
InputAA; @
.AA@ A
EmailAAA F
)AAF G
;AAG H
ifBB 
(BB 
userBB 
==BB 
nullBB 
)BB 
{CC 

ModelStateDD 
.DD 
AddModelErrorDD (
(DD( )
stringDD) /
.DD/ 0
EmptyDD0 5
,DD5 6
$strDD7 j
)DDj k
;DDk l
returnEE 
PageEE 
(EE 
)EE 
;EE 
}FF 
varHH 
userIdHH 
=HH 
awaitHH 
_userManagerHH +
.HH+ ,
GetUserIdAsyncHH, :
(HH: ;
userHH; ?
)HH? @
;HH@ A
varII 
codeII 
=II 
awaitII 
_userManagerII )
.II) */
#GenerateEmailConfirmationTokenAsyncII* M
(IIM N
userIIN R
)IIR S
;IIS T
codeJJ 
=JJ 
WebEncodersJJ 
.JJ 
Base64UrlEncodeJJ .
(JJ. /
EncodingJJ/ 7
.JJ7 8
UTF8JJ8 <
.JJ< =
GetBytesJJ= E
(JJE F
codeJJF J
)JJJ K
)JJK L
;JJL M
varKK 
callbackUrlKK 
=KK 
UrlKK !
.KK! "
PageKK" &
(KK& '
$strLL '
,LL' (
pageHandlerMM 
:MM 
nullMM !
,MM! "
valuesNN 
:NN 
newNN 
{NN 
userIdNN $
=NN% &
userIdNN' -
,NN- .
codeNN/ 3
=NN4 5
codeNN6 :
}NN; <
,NN< =
protocolOO 
:OO 
RequestOO !
.OO! "
SchemeOO" (
)OO( )
;OO) *
awaitPP 
_emailSenderPP 
.PP 
SendEmailAsyncPP -
(PP- .
InputQQ 
.QQ 
EmailQQ 
,QQ 
$strRR $
,RR$ %
$"SS 
$strSS :
{SS: ;
HtmlEncoderSS; F
.SSF G
DefaultSSG N
.SSN O
EncodeSSO U
(SSU V
callbackUrlSSV a
)SSa b
}SSb c
$strSSc w
"SSw x
)SSx y
;SSy z

ModelStateUU 
.UU 
AddModelErrorUU $
(UU$ %
stringUU% +
.UU+ ,
EmptyUU, 1
,UU1 2
$strUU3 f
)UUf g
;UUg h
returnVV 
PageVV 
(VV 
)VV 
;VV 
}WW 	
}XX 
}YY ®%
ZC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\RegisterConfirmation.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
[ 
AllowAnonymous 
] 
public 

class %
RegisterConfirmationModel *
:+ ,
	PageModel- 6
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
IEmailSender %
_sender& -
;- .
public %
RegisterConfirmationModel (
(( )
UserManager) 4
<4 5
ApplicationUser5 D
>D E
userManagerF Q
,Q R
IEmailSenderS _
sender` f
)f g
{ 	
_userManager 
= 
userManager &
;& '
_sender 
= 
sender 
; 
} 	
public"" 
string"" 
Email"" 
{"" 
get"" !
;""! "
set""# &
;""& '
}""( )
public(( 
bool(( %
DisplayConfirmAccountLink(( -
{((. /
get((0 3
;((3 4
set((5 8
;((8 9
}((: ;
public.. 
string..  
EmailConfirmationUrl.. *
{..+ ,
get..- 0
;..0 1
set..2 5
;..5 6
}..7 8
public00 
async00 
Task00 
<00 
IActionResult00 '
>00' (

OnGetAsync00) 3
(003 4
string004 :
email00; @
,00@ A
string00B H
	returnUrl00I R
=00S T
null00U Y
)00Y Z
{11 	
if22 
(22 
email22 
==22 
null22 
)22 
{33 
return44 
RedirectToPage44 %
(44% &
$str44& .
)44. /
;44/ 0
}55 
	returnUrl66 
=66 
	returnUrl66 !
??66" $
Url66% (
.66( )
Content66) 0
(660 1
$str661 5
)665 6
;666 7
var88 
user88 
=88 
await88 
_userManager88 )
.88) *
FindByEmailAsync88* :
(88: ;
email88; @
)88@ A
;88A B
if99 
(99 
user99 
==99 
null99 
)99 
{:: 
return;; 
NotFound;; 
(;;  
$";;  "
$str;;" B
{;;B C
email;;C H
};;H I
$str;;I K
";;K L
);;L M
;;;M N
}<< 
Email>> 
=>> 
email>> 
;>> %
DisplayConfirmAccountLink@@ %
=@@& '
true@@( ,
;@@, -
ifAA 
(AA %
DisplayConfirmAccountLinkAA )
)AA) *
{BB 
varCC 
userIdCC 
=CC 
awaitCC "
_userManagerCC# /
.CC/ 0
GetUserIdAsyncCC0 >
(CC> ?
userCC? C
)CCC D
;CCD E
varDD 
codeDD 
=DD 
awaitDD  
_userManagerDD! -
.DD- ./
#GenerateEmailConfirmationTokenAsyncDD. Q
(DDQ R
userDDR V
)DDV W
;DDW X
codeEE 
=EE 
WebEncodersEE "
.EE" #
Base64UrlEncodeEE# 2
(EE2 3
EncodingEE3 ;
.EE; <
UTF8EE< @
.EE@ A
GetBytesEEA I
(EEI J
codeEEJ N
)EEN O
)EEO P
;EEP Q 
EmailConfirmationUrlFF $
=FF% &
UrlFF' *
.FF* +
PageFF+ /
(FF/ 0
$strGG +
,GG+ ,
pageHandlerHH 
:HH  
nullHH! %
,HH% &
valuesII 
:II 
newII 
{II  !
areaII" &
=II' (
$strII) 3
,II3 4
userIdII5 ;
=II< =
userIdII> D
,IID E
codeIIF J
=IIK L
codeIIM Q
,IIQ R
	returnUrlIIS \
=II] ^
	returnUrlII_ h
}IIi j
,IIj k
protocolJJ 
:JJ 
RequestJJ %
.JJ% &
SchemeJJ& ,
)JJ, -
;JJ- .
}KK 
returnMM 
PageMM 
(MM 
)MM 
;MM 
}NN 	
}OO 
}PP ‹∑
NC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Register.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
RegisterModel 
:  
	PageModel! *
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 

IUserStore #
<# $
ApplicationUser$ 3
>3 4

_userStore5 ?
;? @
private 
readonly 
IUserEmailStore (
<( )
ApplicationUser) 8
>8 9
_emailStore: E
;E F
private 
readonly 
ILogger  
<  !
RegisterModel! .
>. /
_logger0 7
;7 8
private 
readonly 
IEmailSender %
_emailSender& 2
;2 3
private 
readonly  
ApplicationDbContext -
_context. 6
;6 7
public   
RegisterModel   
(   
UserManager!! 
<!! 
ApplicationUser!! '
>!!' (
userManager!!) 4
,!!4 5

IUserStore"" 
<"" 
ApplicationUser"" &
>""& '
	userStore""( 1
,""1 2
SignInManager## 
<## 
ApplicationUser## )
>##) *
signInManager##+ 8
,##8 9
ILogger$$ 
<$$ 
RegisterModel$$ !
>$$! "
logger$$# )
,$$) *
IEmailSender%% 
emailSender%% $
,%%$ % 
ApplicationDbContext&&  
context&&! (
)&&( )
{'' 	
_userManager(( 
=(( 
userManager(( &
;((& '

_userStore)) 
=)) 
	userStore)) "
;))" #
_emailStore** 
=** 
GetEmailStore** '
(**' (
)**( )
;**) *
_signInManager++ 
=++ 
signInManager++ *
;++* +
_logger,, 
=,, 
logger,, 
;,, 
_emailSender-- 
=-- 
emailSender-- &
;--& '
_context.. 
=.. 
context.. 
;.. 
}// 	
[11 	
BindProperty11	 
]11 
public22 

InputModel22 
Input22 
{22  !
get22" %
;22% &
set22' *
;22* +
}22, -
public44 
string44 
	ReturnUrl44 
{44  !
get44" %
;44% &
set44' *
;44* +
}44, -
public66 
IList66 
<66  
AuthenticationScheme66 )
>66) *
ExternalLogins66+ 9
{66: ;
get66< ?
;66? @
set66A D
;66D E
}66F G
public88 
class88 

InputModel88 
{99 	
[:: 
Required:: 
(:: 
ErrorMessage:: "
=::# $
$str::% E
)::E F
]::F G
[;; 
EmailAddress;; 
(;; 
ErrorMessage;; &
=;;' (
$str;;) P
);;P Q
];;Q R
[<< 
Display<< 
(<< 
Name<< 
=<< 
$str<< #
)<<# $
]<<$ %
public== 
string== 
Email== 
{==  !
get==" %
;==% &
set==' *
;==* +
}==, -
[?? 
Required?? 
(?? 
ErrorMessage?? "
=??# $
$str??% D
)??D E
]??E F
[@@ 
StringLength@@ 
(@@ 
$num@@ 
,@@ 
ErrorMessage@@ +
=@@, -
$str@@. l
,@@l m
MinimumLength@@n {
=@@| }
$num@@~ 
)	@@ Ä
]
@@Ä Å
[AA 
DataTypeAA 
(AA 
DataTypeAA 
.AA 
PasswordAA '
)AA' (
]AA( )
[BB 
DisplayBB 
(BB 
NameBB 
=BB 
$strBB &
)BB& '
]BB' (
publicCC 
stringCC 
PasswordCC "
{CC# $
getCC% (
;CC( )
setCC* -
;CC- .
}CC/ 0
[EE 
RequiredEE 
(EE 
ErrorMessageEE "
=EE# $
$strEE% W
)EEW X
]EEX Y
[FF 
DataTypeFF 
(FF 
DataTypeFF 
.FF 
PasswordFF '
)FF' (
]FF( )
[GG 
DisplayGG 
(GG 
NameGG 
=GG 
$strGG .
)GG. /
]GG/ 0
[HH 
CompareHH 
(HH 
$strHH 
,HH  
ErrorMessageHH! -
=HH. /
$strHH0 f
)HHf g
]HHg h
publicII 
stringII 
ConfirmPasswordII )
{II* +
getII, /
;II/ 0
setII1 4
;II4 5
}II6 7
[KK 
RequiredKK 
(KK 
ErrorMessageKK "
=KK# $
$strKK% R
)KKR S
]KKS T
[LL 
StringLengthLL 
(LL 
$numLL 
,LL 
ErrorMessageLL +
=LL, -
$strLL. r
)LLr s
]LLs t
[MM 
DisplayMM 
(MM 
NameMM 
=MM 
$strMM /
)MM/ 0
]MM0 1
publicNN 
stringNN 
NombreEmpresaNN '
{NN( )
getNN* -
;NN- .
setNN/ 2
;NN2 3
}NN4 5
[PP 
RequiredPP 
(PP 
ErrorMessagePP "
=PP# $
$strPP% H
)PPH I
]PPI J
[QQ 
DisplayQQ 
(QQ 
NameQQ 
=QQ 
$strQQ /
)QQ/ 0
]QQ0 1
publicRR 
stringRR 
TipDocRR  
{RR! "
getRR# &
;RR& '
setRR( +
;RR+ ,
}RR- .
[TT 
RequiredTT 
(TT 
ErrorMessageTT "
=TT# $
$strTT% J
)TTJ K
]TTK L
[UU 
DisplayUU 
(UU 
NameUU 
=UU 
$strUU 1
)UU1 2
]UU2 3
[VV 
CustomValidationVV 
(VV 
typeofVV $
(VV$ %

InputModelVV% /
)VV/ 0
,VV0 1
$strVV2 J
)VVJ K
]VVK L
publicWW 
stringWW 
NumDocWW  
{WW! "
getWW# &
;WW& '
setWW( +
;WW+ ,
}WW- .
[YY 
RequiredYY 
(YY 
ErrorMessageYY "
=YY# $
$strYY% ?
)YY? @
]YY@ A
[ZZ 
RegularExpressionZZ 
(ZZ 
$strZZ )
,ZZ) *
ErrorMessageZZ+ 7
=ZZ8 9
$strZZ: h
)ZZh i
]ZZi j
[[[ 
Display[[ 
([[ 
Name[[ 
=[[ 
$str[[ &
)[[& '
][[' (
public\\ 
string\\ 
Telefono\\ "
{\\# $
get\\% (
;\\( )
set\\* -
;\\- .
}\\/ 0
[^^ 
Required^^ 
(^^ 
ErrorMessage^^ "
=^^# $
$str^^% O
)^^O P
]^^P Q
[__ 
Display__ 
(__ 
Name__ 
=__ 
$str__ ?
)__? @
]__@ A
public`` 
bool`` 
TerminosCondiciones`` +
{``, -
get``. 1
;``1 2
set``3 6
;``6 7
}``8 9
publicaa 
staticaa 
ValidationResultaa *"
ValidateDocumentNumberaa+ A
(aaA B
stringaaB H
numDocaaI O
,aaO P
ValidationContextaaQ b
contextaac j
)aaj k
{bb 
varcc 
instancecc 
=cc 
(cc  

InputModelcc  *
)cc* +
contextcc+ 2
.cc2 3
ObjectInstancecc3 A
;ccA B
ifee 
(ee 
stringee 
.ee 
IsNullOrEmptyee (
(ee( )
numDocee) /
)ee/ 0
)ee0 1
returnff 
newff 
ValidationResultff /
(ff/ 0
$strff0 U
)ffU V
;ffV W
ifhh 
(hh 
!hh 
numDochh 
.hh 
Allhh 
(hh  
charhh  $
.hh$ %
IsDigithh% ,
)hh, -
)hh- .
returnii 
newii 
ValidationResultii /
(ii/ 0
$strii0 Y
)iiY Z
;iiZ [
ifkk 
(kk 
instancekk 
.kk 
TipDockk #
==kk$ &
$strkk' ,
&&kk- /
numDockk0 6
.kk6 7
Lengthkk7 =
!=kk> @
$numkkA B
)kkB C
returnll 
newll 
ValidationResultll /
(ll/ 0
$strll0 Y
)llY Z
;llZ [
ifnn 
(nn 
instancenn 
.nn 
TipDocnn #
==nn$ &
$strnn' ,
&&nn- /
(nn0 1
numDocnn1 7
.nn7 8
Lengthnn8 >
<nn? @
$numnnA C
||nnD F
numDocnnG M
.nnM N
LengthnnN T
>nnU V
$numnnW Y
)nnY Z
)nnZ [
returnoo 
newoo 
ValidationResultoo /
(oo/ 0
$stroo0 Y
)ooY Z
;ooZ [
returnqq 
ValidationResultqq '
.qq' (
Successqq( /
;qq/ 0
}rr 
}ss 	
publicuu 
asyncuu 
Taskuu 

OnGetAsyncuu $
(uu$ %
stringuu% +
	returnUrluu, 5
=uu6 7
nulluu8 <
)uu< =
{vv 	
	ReturnUrlww 
=ww 
	returnUrlww !
;ww! "
ExternalLoginsxx 
=xx 
(xx 
awaitxx #
_signInManagerxx$ 2
.xx2 31
%GetExternalAuthenticationSchemesAsyncxx3 X
(xxX Y
)xxY Z
)xxZ [
.xx[ \
ToListxx\ b
(xxb c
)xxc d
;xxd e
}yy 	
public{{ 
async{{ 
Task{{ 
<{{ 
IActionResult{{ '
>{{' (
OnPostAsync{{) 4
({{4 5
string{{5 ;
	returnUrl{{< E
={{F G
null{{H L
){{L M
{|| 	
	returnUrl}} 
??=}} 
Url}} 
.}} 
Content}} %
(}}% &
$str}}& *
)}}* +
;}}+ ,
if 
( 
! 

ModelState 
. 
IsValid #
)# $
{
ÄÄ 
return
ÇÇ 
Page
ÇÇ 
(
ÇÇ  
)
ÇÇ  !
;
ÇÇ! "
}
ÉÉ 
var
ÜÜ 
existingUser
ÜÜ 
=
ÜÜ 
await
ÜÜ $
_userManager
ÜÜ% 1
.
ÜÜ1 2
FindByEmailAsync
ÜÜ2 B
(
ÜÜB C
Input
ÜÜC H
.
ÜÜH I
Email
ÜÜI N
)
ÜÜN O
;
ÜÜO P
if
áá 
(
áá 
existingUser
áá 
!=
áá 
null
áá  $
)
áá$ %
{
àà 

ModelState
ââ 
.
ââ 
AddModelError
ââ (
(
ââ( )
$str
ââ) 6
,
ââ6 7
$str
ââ8 e
)
ââe f
;
ââf g
}
ää 
if
éé 
(
éé 
Input
éé 
.
éé 
TipDoc
éé 
==
éé 
$str
éé  %
&&
éé& (
(
éé) *
Input
éé* /
.
éé/ 0
NumDoc
éé0 6
.
éé6 7
Length
éé7 =
!=
éé> @
$num
ééA B
||
ééC E
!
ééF G
Input
ééG L
.
ééL M
NumDoc
ééM S
.
ééS T
All
ééT W
(
ééW X
char
ééX \
.
éé\ ]
IsDigit
éé] d
)
ééd e
)
éée f
)
ééf g
{
èè 

ModelState
êê 
.
êê 
AddModelError
êê (
(
êê( )
$str
êê) 7
,
êê7 8
$str
êê9 l
)
êêl m
;
êêm n
}
ëë 
else
íí 
if
íí 
(
íí 
Input
íí 
.
íí 
TipDoc
íí !
==
íí" $
$str
íí% *
&&
íí+ -
(
íí. /
Input
íí/ 4
.
íí4 5
NumDoc
íí5 ;
.
íí; <
Length
íí< B
<
ííC D
$num
ííE G
||
ííH J
Input
ííK P
.
ííP Q
NumDoc
ííQ W
.
ííW X
Length
ííX ^
>
íí_ `
$num
íía c
||
ííd f
!
ííg h
Input
ííh m
.
íím n
NumDoc
íín t
.
íít u
All
ííu x
(
ííx y
char
ííy }
.
íí} ~
IsDigitíí~ Ö
)ííÖ Ü
)ííÜ á
)ííá à
{
ìì 

ModelState
îî 
.
îî 
AddModelError
îî (
(
îî( )
$str
îî) 7
,
îî7 8
$str
îî9 l
)
îîl m
;
îîm n
}
ïï 
if
ññ 
(
ññ 
!
ññ 
Input
ññ 
.
ññ !
TerminosCondiciones
ññ *
)
ññ* +
{
óó 

ModelState
òò 
.
òò 
AddModelError
òò (
(
òò( )
$str
òò) D
,
òòD E
$str
òòF q
)
òòq r
;
òòr s
}
ôô 
if
õõ 
(
õõ 

ModelState
õõ 
.
õõ 
IsValid
õõ "
)
õõ" #
{
úú 
var
ùù 
user
ùù 
=
ùù 

CreateUser
ùù %
(
ùù% &
)
ùù& '
;
ùù' (
await
üü 

_userStore
üü  
.
üü  !
SetUserNameAsync
üü! 1
(
üü1 2
user
üü2 6
,
üü6 7
Input
üü8 =
.
üü= >
Email
üü> C
,
üüC D
CancellationToken
üüE V
.
üüV W
None
üüW [
)
üü[ \
;
üü\ ]
await
†† 
_emailStore
†† !
.
††! "
SetEmailAsync
††" /
(
††/ 0
user
††0 4
,
††4 5
Input
††6 ;
.
††; <
Email
††< A
,
††A B
CancellationToken
††C T
.
††T U
None
††U Y
)
††Y Z
;
††Z [
user
°° 
.
°° 
PhoneNumber
°°  
=
°°! "
Input
°°# (
.
°°( )
Telefono
°°) 1
;
°°1 2
var
££ 
result
££ 
=
££ 
await
££ "
_userManager
££# /
.
££/ 0
CreateAsync
££0 ;
(
££; <
user
££< @
,
££@ A
Input
££B G
.
££G H
Password
££H P
)
££P Q
;
££Q R
if
•• 
(
•• 
result
•• 
.
•• 
	Succeeded
•• $
)
••$ %
{
¶¶ 
_logger
ßß 
.
ßß 
LogInformation
ßß *
(
ßß* +
$str
ßß+ V
)
ßßV W
;
ßßW X
var
©© 
cliente
©© 
=
©©  !
new
©©" %
Cliente
©©& -
{
™™ 
ApplicationUserId
´´ )
=
´´* +
user
´´, 0
.
´´0 1
Id
´´1 3
,
´´3 4
NombreEmpresa
¨¨ %
=
¨¨& '
Input
¨¨( -
.
¨¨- .
NombreEmpresa
¨¨. ;
,
¨¨; <
TipDoc
≠≠ 
=
≠≠  
Input
≠≠! &
.
≠≠& '
TipDoc
≠≠' -
,
≠≠- .
NumDoc
ÆÆ 
=
ÆÆ  
Input
ÆÆ! &
.
ÆÆ& '
NumDoc
ÆÆ' -
,
ÆÆ- .
Telefono
ØØ  
=
ØØ! "
Input
ØØ# (
.
ØØ( )
Telefono
ØØ) 1
,
ØØ1 2
}
∞∞ 
;
∞∞ 
try
≤≤ 
{
≥≥ 
_context
¥¥  
.
¥¥  !
Clientes
¥¥! )
.
¥¥) *
Add
¥¥* -
(
¥¥- .
cliente
¥¥. 5
)
¥¥5 6
;
¥¥6 7
await
µµ 
_context
µµ &
.
µµ& '
SaveChangesAsync
µµ' 7
(
µµ7 8
)
µµ8 9
;
µµ9 :
}
∂∂ 
catch
∑∑ 
(
∑∑ 
	Exception
∑∑ $
ex
∑∑% '
)
∑∑' (
{
∏∏ 
_logger
ππ 
.
ππ  
LogError
ππ  (
(
ππ( )
ex
ππ) +
,
ππ+ ,
$str
ππ- H
)
ππH I
;
ππI J
await
∫∫ 
_userManager
∫∫ *
.
∫∫* +
DeleteAsync
∫∫+ 6
(
∫∫6 7
user
∫∫7 ;
)
∫∫; <
;
∫∫< =

ModelState
ªª "
.
ªª" #
AddModelError
ªª# 0
(
ªª0 1
string
ªª1 7
.
ªª7 8
Empty
ªª8 =
,
ªª= >
$str
ªª? z
)
ªªz {
;
ªª{ |
return
ºº 
Page
ºº #
(
ºº# $
)
ºº$ %
;
ºº% &
}
ΩΩ 
var
øø 
userId
øø 
=
øø  
await
øø! &
_userManager
øø' 3
.
øø3 4
GetUserIdAsync
øø4 B
(
øøB C
user
øøC G
)
øøG H
;
øøH I
var
¿¿ 
code
¿¿ 
=
¿¿ 
await
¿¿ $
_userManager
¿¿% 1
.
¿¿1 21
#GenerateEmailConfirmationTokenAsync
¿¿2 U
(
¿¿U V
user
¿¿V Z
)
¿¿Z [
;
¿¿[ \
code
¡¡ 
=
¡¡ 
WebEncoders
¡¡ &
.
¡¡& '
Base64UrlEncode
¡¡' 6
(
¡¡6 7
Encoding
¡¡7 ?
.
¡¡? @
UTF8
¡¡@ D
.
¡¡D E
GetBytes
¡¡E M
(
¡¡M N
code
¡¡N R
)
¡¡R S
)
¡¡S T
;
¡¡T U
var
¬¬ 
callbackUrl
¬¬ #
=
¬¬$ %
Url
¬¬& )
.
¬¬) *
Page
¬¬* .
(
¬¬. /
$str
√√ /
,
√√/ 0
pageHandler
ƒƒ #
:
ƒƒ# $
null
ƒƒ% )
,
ƒƒ) *
values
≈≈ 
:
≈≈ 
new
≈≈  #
{
≈≈$ %
area
≈≈& *
=
≈≈+ ,
$str
≈≈- 7
,
≈≈7 8
userId
≈≈9 ?
=
≈≈@ A
userId
≈≈B H
,
≈≈H I
code
≈≈J N
=
≈≈O P
code
≈≈Q U
,
≈≈U V
	returnUrl
≈≈W `
=
≈≈a b
	returnUrl
≈≈c l
}
≈≈m n
,
≈≈n o
protocol
∆∆  
:
∆∆  !
Request
∆∆" )
.
∆∆) *
Scheme
∆∆* 0
)
∆∆0 1
;
∆∆1 2
await
»» 
_emailSender
»» &
.
»»& '
SendEmailAsync
»»' 5
(
»»5 6
Input
»»6 ;
.
»»; <
Email
»»< A
,
»»A B
$str
»»C W
,
»»W X
$"
…… 
$str
…… B
{
……B C
HtmlEncoder
……C N
.
……N O
Default
……O V
.
……V W
Encode
……W ]
(
……] ^
callbackUrl
……^ i
)
……i j
}
……j k
$str
……k 
"…… Ä
)……Ä Å
;……Å Ç
if
ÀÀ 
(
ÀÀ 
_userManager
ÀÀ $
.
ÀÀ$ %
Options
ÀÀ% ,
.
ÀÀ, -
SignIn
ÀÀ- 3
.
ÀÀ3 4%
RequireConfirmedAccount
ÀÀ4 K
)
ÀÀK L
{
ÃÃ 
return
ÕÕ 
RedirectToPage
ÕÕ -
(
ÕÕ- .
$str
ÕÕ. D
,
ÕÕD E
new
ÕÕF I
{
ÕÕJ K
email
ÕÕL Q
=
ÕÕR S
Input
ÕÕT Y
.
ÕÕY Z
Email
ÕÕZ _
,
ÕÕ_ `
	returnUrl
ÕÕa j
=
ÕÕk l
	returnUrl
ÕÕm v
}
ÕÕw x
)
ÕÕx y
;
ÕÕy z
}
ŒŒ 
else
œœ 
{
–– 
await
—— 
_signInManager
—— ,
.
——, -
SignInAsync
——- 8
(
——8 9
user
——9 =
,
——= >
isPersistent
——? K
:
——K L
false
——M R
)
——R S
;
——S T
return
““ 
LocalRedirect
““ ,
(
““, -
	returnUrl
““- 6
)
““6 7
;
““7 8
}
”” 
}
‘‘ 
foreach
÷÷ 
(
÷÷ 
var
÷÷ 
error
÷÷ "
in
÷÷# %
result
÷÷& ,
.
÷÷, -
Errors
÷÷- 3
)
÷÷3 4
{
◊◊ 

ModelState
ÿÿ 
.
ÿÿ 
AddModelError
ÿÿ ,
(
ÿÿ, -
string
ÿÿ- 3
.
ÿÿ3 4
Empty
ÿÿ4 9
,
ÿÿ9 :
error
ÿÿ; @
.
ÿÿ@ A
Description
ÿÿA L
)
ÿÿL M
;
ÿÿM N
}
ŸŸ 
}
⁄⁄ 
return
‹‹ 
Page
‹‹ 
(
‹‹ 
)
‹‹ 
;
‹‹ 
}
›› 	
private
ﬂﬂ 
ApplicationUser
ﬂﬂ 

CreateUser
ﬂﬂ  *
(
ﬂﬂ* +
)
ﬂﬂ+ ,
{
‡‡ 	
try
·· 
{
‚‚ 
return
„„ 
	Activator
„„  
.
„„  !
CreateInstance
„„! /
<
„„/ 0
ApplicationUser
„„0 ?
>
„„? @
(
„„@ A
)
„„A B
;
„„B C
}
‰‰ 
catch
ÂÂ 
{
ÊÊ 
throw
ÁÁ 
new
ÁÁ '
InvalidOperationException
ÁÁ 3
(
ÁÁ3 4
$"
ÁÁ4 6
$str
ÁÁ6 S
{
ÁÁS T
nameof
ÁÁT Z
(
ÁÁZ [
ApplicationUser
ÁÁ[ j
)
ÁÁj k
}
ÁÁk l
$str
ÁÁl o
"
ÁÁo p
+
ÁÁq r
$"
ËË 
$str
ËË #
{
ËË# $
nameof
ËË$ *
(
ËË* +
ApplicationUser
ËË+ :
)
ËË: ;
}
ËË; <
$strËË< ç
"ËËç é
+ËËè ê
$"
ÈÈ 
$str
ÈÈ a
"
ÈÈa b
)
ÈÈb c
;
ÈÈc d
}
ÍÍ 
}
ÎÎ 	
private
ÌÌ 
IUserEmailStore
ÌÌ 
<
ÌÌ  
ApplicationUser
ÌÌ  /
>
ÌÌ/ 0
GetEmailStore
ÌÌ1 >
(
ÌÌ> ?
)
ÌÌ? @
{
ÓÓ 	
if
ÔÔ 
(
ÔÔ 
!
ÔÔ 
_userManager
ÔÔ 
.
ÔÔ 
SupportsUserEmail
ÔÔ /
)
ÔÔ/ 0
{
 
throw
ÒÒ 
new
ÒÒ #
NotSupportedException
ÒÒ /
(
ÒÒ/ 0
$str
ÒÒ0 j
)
ÒÒj k
;
ÒÒk l
}
ÚÚ 
return
ÛÛ 
(
ÛÛ 
IUserEmailStore
ÛÛ #
<
ÛÛ# $
ApplicationUser
ÛÛ$ 3
>
ÛÛ3 4
)
ÛÛ4 5

_userStore
ÛÛ5 ?
;
ÛÛ? @
}
ÙÙ 	
}
ıı 
}ˆˆ æ+
dC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\TwoFactorAuthentication.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class (
TwoFactorAuthenticationModel -
:. /
	PageModel0 9
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ILogger  
<  !(
TwoFactorAuthenticationModel! =
>= >
_logger? F
;F G
public (
TwoFactorAuthenticationModel +
(+ ,
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager6 C
<C D
ApplicationUserD S
>S T
signInManagerU b
,b c
ILoggerd k
<k l)
TwoFactorAuthenticationModel	l à
>
à â
logger
ä ê
)
ê ë
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_logger 
= 
logger 
; 
} 	
public!! 
bool!! 
HasAuthenticator!! $
{!!% &
get!!' *
;!!* +
set!!, /
;!!/ 0
}!!1 2
public'' 
int'' 
RecoveryCodesLeft'' $
{''% &
get''' *
;''* +
set'', /
;''/ 0
}''1 2
[-- 	
BindProperty--	 
]-- 
public.. 
bool.. 
Is2faEnabled..  
{..! "
get..# &
;..& '
set..( +
;..+ ,
}..- .
public44 
bool44 
IsMachineRemembered44 '
{44( )
get44* -
;44- .
set44/ 2
;442 3
}444 5
[:: 	
TempData::	 
]:: 
public;; 
string;; 
StatusMessage;; #
{;;$ %
get;;& )
;;;) *
set;;+ .
;;;. /
};;0 1
public== 
async== 
Task== 
<== 
IActionResult== '
>==' (

OnGetAsync==) 3
(==3 4
)==4 5
{>> 	
var?? 
user?? 
=?? 
await?? 
_userManager?? )
.??) *
GetUserAsync??* 6
(??6 7
User??7 ;
)??; <
;??< =
if@@ 
(@@ 
user@@ 
==@@ 
null@@ 
)@@ 
{AA 
returnBB 
NotFoundBB 
(BB  
$"BB  "
$strBB" ?
{BB? @
_userManagerBB@ L
.BBL M
	GetUserIdBBM V
(BBV W
UserBBW [
)BB[ \
}BB\ ]
$strBB] _
"BB_ `
)BB` a
;BBa b
}CC 
HasAuthenticatorEE 
=EE 
awaitEE $
_userManagerEE% 1
.EE1 2$
GetAuthenticatorKeyAsyncEE2 J
(EEJ K
userEEK O
)EEO P
!=EEQ S
nullEET X
;EEX Y
Is2faEnabledFF 
=FF 
awaitFF  
_userManagerFF! -
.FF- .$
GetTwoFactorEnabledAsyncFF. F
(FFF G
userFFG K
)FFK L
;FFL M
IsMachineRememberedGG 
=GG  !
awaitGG" '
_signInManagerGG( 6
.GG6 7,
 IsTwoFactorClientRememberedAsyncGG7 W
(GGW X
userGGX \
)GG\ ]
;GG] ^
RecoveryCodesLeftHH 
=HH 
awaitHH  %
_userManagerHH& 2
.HH2 3#
CountRecoveryCodesAsyncHH3 J
(HHJ K
userHHK O
)HHO P
;HHP Q
returnJJ 
PageJJ 
(JJ 
)JJ 
;JJ 
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (
OnPostAsyncMM) 4
(MM4 5
)MM5 6
{NN 	
varOO 
userOO 
=OO 
awaitOO 
_userManagerOO )
.OO) *
GetUserAsyncOO* 6
(OO6 7
UserOO7 ;
)OO; <
;OO< =
ifPP 
(PP 
userPP 
==PP 
nullPP 
)PP 
{QQ 
returnRR 
NotFoundRR 
(RR  
$"RR  "
$strRR" ?
{RR? @
_userManagerRR@ L
.RRL M
	GetUserIdRRM V
(RRV W
UserRRW [
)RR[ \
}RR\ ]
$strRR] _
"RR_ `
)RR` a
;RRa b
}SS 
awaitUU 
_signInManagerUU  
.UU  !&
ForgetTwoFactorClientAsyncUU! ;
(UU; <
)UU< =
;UU= >
StatusMessageVV 
=VV 
$str	VV î
;
VVî ï
returnWW 
RedirectToPageWW !
(WW! "
)WW" #
;WW# $
}XX 	
}YY 
}ZZ Â
^C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\ShowRecoveryCodes.cshtml.cs
	namespace

 	
GRINPLAS


 
.

 
Areas

 
.

 
Identity

 !
.

! "
Pages

" '
.

' (
Account

( /
.

/ 0
Manage

0 6
{ 
public 

class "
ShowRecoveryCodesModel '
:( )
	PageModel* 3
{ 
[ 	
TempData	 
] 
public 
string 
[ 
] 
RecoveryCodes %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
TempData	 
] 
public 
string 
StatusMessage #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public$$ 
IActionResult$$ 
OnGet$$ "
($$" #
)$$# $
{%% 	
if&& 
(&& 
RecoveryCodes&& 
==&&  
null&&! %
||&&& (
RecoveryCodes&&) 6
.&&6 7
Length&&7 =
==&&> @
$num&&A B
)&&B C
{'' 
return(( 
RedirectToPage(( %
(((% &
$str((& A
)((A B
;((B C
})) 
return++ 
Page++ 
(++ 
)++ 
;++ 
},, 	
}-- 
}.. ◊5
XC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\SetPassword.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 
SetPasswordModel !
:" #
	PageModel$ -
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 
SetPasswordModel 
(  
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[   	
BindProperty  	 
]   
public!! 

InputModel!! 
Input!! 
{!!  !
get!!" %
;!!% &
set!!' *
;!!* +
}!!, -
['' 	
TempData''	 
]'' 
public(( 
string(( 
StatusMessage(( #
{(($ %
get((& )
;(() *
set((+ .
;((. /
}((0 1
public.. 
class.. 

InputModel.. 
{// 	
[44 
Required44 
]44 
[55 
StringLength55 
(55 
$num55 
,55 
ErrorMessage55 +
=55, -
$str55. l
,55l m
MinimumLength55n {
=55| }
$num55~ 
)	55 Ä
]
55Ä Å
[66 
DataType66 
(66 
DataType66 
.66 
Password66 '
)66' (
]66( )
[77 
Display77 
(77 
Name77 
=77 
$str77 *
)77* +
]77+ ,
public88 
string88 
NewPassword88 %
{88& '
get88( +
;88+ ,
set88- 0
;880 1
}882 3
[>> 
DataType>> 
(>> 
DataType>> 
.>> 
Password>> '
)>>' (
]>>( )
[?? 
Display?? 
(?? 
Name?? 
=?? 
$str?? 2
)??2 3
]??3 4
[@@ 
Compare@@ 
(@@ 
$str@@ "
,@@" #
ErrorMessage@@$ 0
=@@1 2
$str@@3 m
)@@m n
]@@n o
publicAA 
stringAA 
ConfirmPasswordAA )
{AA* +
getAA, /
;AA/ 0
setAA1 4
;AA4 5
}AA6 7
}BB 	
publicDD 
asyncDD 
TaskDD 
<DD 
IActionResultDD '
>DD' (

OnGetAsyncDD) 3
(DD3 4
)DD4 5
{EE 	
varFF 
userFF 
=FF 
awaitFF 
_userManagerFF )
.FF) *
GetUserAsyncFF* 6
(FF6 7
UserFF7 ;
)FF; <
;FF< =
ifGG 
(GG 
userGG 
==GG 
nullGG 
)GG 
{HH 
returnII 
NotFoundII 
(II  
$"II  "
$strII" ?
{II? @
_userManagerII@ L
.IIL M
	GetUserIdIIM V
(IIV W
UserIIW [
)II[ \
}II\ ]
$strII] _
"II_ `
)II` a
;IIa b
}JJ 
varLL 
hasPasswordLL 
=LL 
awaitLL #
_userManagerLL$ 0
.LL0 1
HasPasswordAsyncLL1 A
(LLA B
userLLB F
)LLF G
;LLG H
ifNN 
(NN 
hasPasswordNN 
)NN 
{OO 
returnPP 
RedirectToPagePP %
(PP% &
$strPP& 8
)PP8 9
;PP9 :
}QQ 
returnSS 
PageSS 
(SS 
)SS 
;SS 
}TT 	
publicVV 
asyncVV 
TaskVV 
<VV 
IActionResultVV '
>VV' (
OnPostAsyncVV) 4
(VV4 5
)VV5 6
{WW 	
ifXX 
(XX 
!XX 

ModelStateXX 
.XX 
IsValidXX #
)XX# $
{YY 
returnZZ 
PageZZ 
(ZZ 
)ZZ 
;ZZ 
}[[ 
var]] 
user]] 
=]] 
await]] 
_userManager]] )
.]]) *
GetUserAsync]]* 6
(]]6 7
User]]7 ;
)]]; <
;]]< =
if^^ 
(^^ 
user^^ 
==^^ 
null^^ 
)^^ 
{__ 
return`` 
NotFound`` 
(``  
$"``  "
$str``" ?
{``? @
_userManager``@ L
.``L M
	GetUserId``M V
(``V W
User``W [
)``[ \
}``\ ]
$str``] _
"``_ `
)``` a
;``a b
}aa 
varcc 
addPasswordResultcc !
=cc" #
awaitcc$ )
_userManagercc* 6
.cc6 7
AddPasswordAsynccc7 G
(ccG H
userccH L
,ccL M
InputccN S
.ccS T
NewPasswordccT _
)cc_ `
;cc` a
ifdd 
(dd 
!dd 
addPasswordResultdd "
.dd" #
	Succeededdd# ,
)dd, -
{ee 
foreachff 
(ff 
varff 
errorff "
inff# %
addPasswordResultff& 7
.ff7 8
Errorsff8 >
)ff> ?
{gg 

ModelStatehh 
.hh 
AddModelErrorhh ,
(hh, -
stringhh- 3
.hh3 4
Emptyhh4 9
,hh9 :
errorhh; @
.hh@ A
DescriptionhhA L
)hhL M
;hhM N
}ii 
returnjj 
Pagejj 
(jj 
)jj 
;jj 
}kk 
awaitmm 
_signInManagermm  
.mm  !
RefreshSignInAsyncmm! 3
(mm3 4
usermm4 8
)mm8 9
;mm9 :
StatusMessagenn 
=nn 
$strnn 9
;nn9 :
returnpp 
RedirectToPagepp !
(pp! "
)pp" #
;pp# $
}qq 	
}rr 
}ss É%
_C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\ResetAuthenticator.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class #
ResetAuthenticatorModel (
:) *
	PageModel+ 4
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ILogger  
<  !#
ResetAuthenticatorModel! 8
>8 9
_logger: A
;A B
public #
ResetAuthenticatorModel &
(& '
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
ILogger 
< #
ResetAuthenticatorModel +
>+ ,
logger- 3
)3 4
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_logger 
= 
logger 
; 
} 	
[## 	
TempData##	 
]## 
public$$ 
string$$ 
StatusMessage$$ #
{$$$ %
get$$& )
;$$) *
set$$+ .
;$$. /
}$$0 1
public&& 
async&& 
Task&& 
<&& 
IActionResult&& '
>&&' (
OnGet&&) .
(&&. /
)&&/ 0
{'' 	
var(( 
user(( 
=(( 
await(( 
_userManager(( )
.(() *
GetUserAsync((* 6
(((6 7
User((7 ;
)((; <
;((< =
if)) 
()) 
user)) 
==)) 
null)) 
))) 
{** 
return++ 
NotFound++ 
(++  
$"++  "
$str++" ?
{++? @
_userManager++@ L
.++L M
	GetUserId++M V
(++V W
User++W [
)++[ \
}++\ ]
$str++] _
"++_ `
)++` a
;++a b
},, 
return.. 
Page.. 
(.. 
).. 
;.. 
}// 	
public11 
async11 
Task11 
<11 
IActionResult11 '
>11' (
OnPostAsync11) 4
(114 5
)115 6
{22 	
var33 
user33 
=33 
await33 
_userManager33 )
.33) *
GetUserAsync33* 6
(336 7
User337 ;
)33; <
;33< =
if44 
(44 
user44 
==44 
null44 
)44 
{55 
return66 
NotFound66 
(66  
$"66  "
$str66" ?
{66? @
_userManager66@ L
.66L M
	GetUserId66M V
(66V W
User66W [
)66[ \
}66\ ]
$str66] _
"66_ `
)66` a
;66a b
}77 
await99 
_userManager99 
.99 $
SetTwoFactorEnabledAsync99 7
(997 8
user998 <
,99< =
false99> C
)99C D
;99D E
await:: 
_userManager:: 
.:: &
ResetAuthenticatorKeyAsync:: 9
(::9 :
user::: >
)::> ?
;::? @
var;; 
userId;; 
=;; 
await;; 
_userManager;; +
.;;+ ,
GetUserIdAsync;;, :
(;;: ;
user;;; ?
);;? @
;;;@ A
_logger<< 
.<< 
LogInformation<< "
(<<" #
$str<<# d
,<<d e
user<<f j
.<<j k
Id<<k m
)<<m n
;<<n o
await>> 
_signInManager>>  
.>>  !
RefreshSignInAsync>>! 3
(>>3 4
user>>4 8
)>>8 9
;>>9 :
StatusMessage?? 
=?? 
$str	?? ç
;
??ç é
returnAA 
RedirectToPageAA !
(AA! "
$strAA" 9
)AA9 :
;AA: ;
}BB 	
}CC 
}DD è
YC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\PersonalData.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 
PersonalDataModel "
:# $
	PageModel% .
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !
PersonalDataModel! 2
>2 3
_logger4 ;
;; <
public 
PersonalDataModel  
(  !
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< 
PersonalDataModel %
>% &
logger' -
)- .
{ 	
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
OnGet) .
(. /
)/ 0
{ 	
var 
user 
= 
await 
_userManager )
.) *
GetUserAsync* 6
(6 7
User7 ;
); <
;< =
if 
( 
user 
== 
null 
) 
{ 
return 
NotFound 
(  
$"  "
$str" ?
{? @
_userManager@ L
.L M
	GetUserIdM V
(V W
UserW [
)[ \
}\ ]
$str] _
"_ `
)` a
;a b
}   
return"" 
Page"" 
("" 
)"" 
;"" 
}## 	
}$$ 
}%% ¥)
TC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\ManageNavPages.cs
	namespace 	
GRINPLAS 
. 
Areas 
. 
Identity "
." #
Pages# (
.( )
Account) 0
.0 1
Manage1 7
{		 
public 

static 
class 
ManageNavPages &
{ 
public 
static 
string 
Index "
=># %
$str& -
;- .
public 
static 
string 
Email "
=># %
$str& -
;- .
public   
static   
string   
ChangePassword   +
=>  , .
$str  / ?
;  ? @
public&& 
static&& 
string&&  
DownloadPersonalData&& 1
=>&&2 4
$str&&5 K
;&&K L
public,, 
static,, 
string,, 
DeletePersonalData,, /
=>,,0 2
$str,,3 G
;,,G H
public22 
static22 
string22 
ExternalLogins22 +
=>22, .
$str22/ ?
;22? @
public88 
static88 
string88 
PersonalData88 )
=>88* ,
$str88- ;
;88; <
public>> 
static>> 
string>> #
TwoFactorAuthentication>> 4
=>>>5 7
$str>>8 Q
;>>Q R
publicDD 
staticDD 
stringDD 
IndexNavClassDD *
(DD* +
ViewContextDD+ 6
viewContextDD7 B
)DDB C
=>DDD F
PageNavClassDDG S
(DDS T
viewContextDDT _
,DD_ `
IndexDDa f
)DDf g
;DDg h
publicJJ 
staticJJ 
stringJJ 
EmailNavClassJJ *
(JJ* +
ViewContextJJ+ 6
viewContextJJ7 B
)JJB C
=>JJD F
PageNavClassJJG S
(JJS T
viewContextJJT _
,JJ_ `
EmailJJa f
)JJf g
;JJg h
publicPP 
staticPP 
stringPP "
ChangePasswordNavClassPP 3
(PP3 4
ViewContextPP4 ?
viewContextPP@ K
)PPK L
=>PPM O
PageNavClassPPP \
(PP\ ]
viewContextPP] h
,PPh i
ChangePasswordPPj x
)PPx y
;PPy z
publicVV 
staticVV 
stringVV (
DownloadPersonalDataNavClassVV 9
(VV9 :
ViewContextVV: E
viewContextVVF Q
)VVQ R
=>VVS U
PageNavClassVVV b
(VVb c
viewContextVVc n
,VVn o!
DownloadPersonalData	VVp Ñ
)
VVÑ Ö
;
VVÖ Ü
public\\ 
static\\ 
string\\ &
DeletePersonalDataNavClass\\ 7
(\\7 8
ViewContext\\8 C
viewContext\\D O
)\\O P
=>\\Q S
PageNavClass\\T `
(\\` a
viewContext\\a l
,\\l m
DeletePersonalData	\\n Ä
)
\\Ä Å
;
\\Å Ç
publicbb 
staticbb 
stringbb "
ExternalLoginsNavClassbb 3
(bb3 4
ViewContextbb4 ?
viewContextbb@ K
)bbK L
=>bbM O
PageNavClassbbP \
(bb\ ]
viewContextbb] h
,bbh i
ExternalLoginsbbj x
)bbx y
;bby z
publichh 
statichh 
stringhh  
PersonalDataNavClasshh 1
(hh1 2
ViewContexthh2 =
viewContexthh> I
)hhI J
=>hhK M
PageNavClasshhN Z
(hhZ [
viewContexthh[ f
,hhf g
PersonalDatahhh t
)hht u
;hhu v
publicnn 
staticnn 
stringnn +
TwoFactorAuthenticationNavClassnn <
(nn< =
ViewContextnn= H
viewContextnnI T
)nnT U
=>nnV X
PageNavClassnnY e
(nne f
viewContextnnf q
,nnq r$
TwoFactorAuthentication	nns ä
)
nnä ã
;
nnã å
publictt 
statictt 
stringtt 
PageNavClasstt )
(tt) *
ViewContexttt* 5
viewContexttt6 A
,ttA B
stringttC I
pagettJ N
)ttN O
{uu 	
varvv 

activePagevv 
=vv 
viewContextvv (
.vv( )
ViewDatavv) 1
[vv1 2
$strvv2 >
]vv> ?
asvv@ B
stringvvC I
??ww 
Systemww 
.ww 
IOww 
.ww 
Pathww !
.ww! "'
GetFileNameWithoutExtensionww" =
(ww= >
viewContextww> I
.wwI J
ActionDescriptorwwJ Z
.wwZ [
DisplayNameww[ f
)wwf g
;wwg h
returnxx 
stringxx 
.xx 
Equalsxx  
(xx  !

activePagexx! +
,xx+ ,
pagexx- 1
,xx1 2
StringComparisonxx3 C
.xxC D
OrdinalIgnoreCasexxD U
)xxU V
?xxW X
$strxxY a
:xxb c
nullxxd h
;xxh i
}yy 	
}zz 
}{{ †4
RC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\Index.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 

IndexModel 
: 
	PageModel '
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public 

IndexModel 
( 
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
)8 9
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
public!! 
string!! 
Username!! 
{!!  
get!!! $
;!!$ %
set!!& )
;!!) *
}!!+ ,
['' 	
TempData''	 
]'' 
public(( 
string(( 
StatusMessage(( #
{(($ %
get((& )
;(() *
set((+ .
;((. /
}((0 1
[.. 	
BindProperty..	 
].. 
public// 

InputModel// 
Input// 
{//  !
get//" %
;//% &
set//' *
;//* +
}//, -
public55 
class55 

InputModel55 
{66 	
[;; 
Phone;; 
];; 
[<< 
Display<< 
(<< 
Name<< 
=<< 
$str<< *
)<<* +
]<<+ ,
public== 
string== 
PhoneNumber== %
{==& '
get==( +
;==+ ,
set==- 0
;==0 1
}==2 3
}>> 	
private@@ 
async@@ 
Task@@ 
	LoadAsync@@ $
(@@$ %
ApplicationUser@@% 4
user@@5 9
)@@9 :
{AA 	
varBB 
userNameBB 
=BB 
awaitBB  
_userManagerBB! -
.BB- .
GetUserNameAsyncBB. >
(BB> ?
userBB? C
)BBC D
;BBD E
varCC 
phoneNumberCC 
=CC 
awaitCC #
_userManagerCC$ 0
.CC0 1
GetPhoneNumberAsyncCC1 D
(CCD E
userCCE I
)CCI J
;CCJ K
UsernameEE 
=EE 
userNameEE 
;EE  
InputGG 
=GG 
newGG 

InputModelGG "
{HH 
PhoneNumberII 
=II 
phoneNumberII )
}JJ 
;JJ 
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (

OnGetAsyncMM) 3
(MM3 4
)MM4 5
{NN 	
varOO 
userOO 
=OO 
awaitOO 
_userManagerOO )
.OO) *
GetUserAsyncOO* 6
(OO6 7
UserOO7 ;
)OO; <
;OO< =
ifPP 
(PP 
userPP 
==PP 
nullPP 
)PP 
{QQ 
returnRR 
NotFoundRR 
(RR  
$"RR  "
$strRR" ?
{RR? @
_userManagerRR@ L
.RRL M
	GetUserIdRRM V
(RRV W
UserRRW [
)RR[ \
}RR\ ]
$strRR] _
"RR_ `
)RR` a
;RRa b
}SS 
awaitUU 
	LoadAsyncUU 
(UU 
userUU  
)UU  !
;UU! "
returnVV 
PageVV 
(VV 
)VV 
;VV 
}WW 	
publicYY 
asyncYY 
TaskYY 
<YY 
IActionResultYY '
>YY' (
OnPostAsyncYY) 4
(YY4 5
)YY5 6
{ZZ 	
var[[ 
user[[ 
=[[ 
await[[ 
_userManager[[ )
.[[) *
GetUserAsync[[* 6
([[6 7
User[[7 ;
)[[; <
;[[< =
if\\ 
(\\ 
user\\ 
==\\ 
null\\ 
)\\ 
{]] 
return^^ 
NotFound^^ 
(^^  
$"^^  "
$str^^" ?
{^^? @
_userManager^^@ L
.^^L M
	GetUserId^^M V
(^^V W
User^^W [
)^^[ \
}^^\ ]
$str^^] _
"^^_ `
)^^` a
;^^a b
}__ 
ifaa 
(aa 
!aa 

ModelStateaa 
.aa 
IsValidaa #
)aa# $
{bb 
awaitcc 
	LoadAsynccc 
(cc  
usercc  $
)cc$ %
;cc% &
returndd 
Pagedd 
(dd 
)dd 
;dd 
}ee 
vargg 
phoneNumbergg 
=gg 
awaitgg #
_userManagergg$ 0
.gg0 1
GetPhoneNumberAsyncgg1 D
(ggD E
userggE I
)ggI J
;ggJ K
ifhh 
(hh 
Inputhh 
.hh 
PhoneNumberhh !
!=hh" $
phoneNumberhh% 0
)hh0 1
{ii 
varjj 
setPhoneResultjj "
=jj# $
awaitjj% *
_userManagerjj+ 7
.jj7 8
SetPhoneNumberAsyncjj8 K
(jjK L
userjjL P
,jjP Q
InputjjR W
.jjW X
PhoneNumberjjX c
)jjc d
;jjd e
ifkk 
(kk 
!kk 
setPhoneResultkk #
.kk# $
	Succeededkk$ -
)kk- .
{ll 
StatusMessagemm !
=mm" #
$strmm$ W
;mmW X
returnnn 
RedirectToPagenn )
(nn) *
)nn* +
;nn+ ,
}oo 
}pp 
awaitrr 
_signInManagerrr  
.rr  !
RefreshSignInAsyncrr! 3
(rr3 4
userrr4 8
)rr8 9
;rr9 :
StatusMessagess 
=ss 
$strss ;
;ss; <
returntt 
RedirectToPagett !
(tt! "
)tt" #
;tt# $
}uu 	
}vv 
}ww õ+
bC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\GenerateRecoveryCodes.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class &
GenerateRecoveryCodesModel +
:, -
	PageModel. 7
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !&
GenerateRecoveryCodesModel! ;
>; <
_logger= D
;D E
public &
GenerateRecoveryCodesModel )
() *
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< &
GenerateRecoveryCodesModel .
>. /
logger0 6
)6 7
{ 	
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
[!! 	
TempData!!	 
]!! 
public"" 
string"" 
["" 
]"" 
RecoveryCodes"" %
{""& '
get""( +
;""+ ,
set""- 0
;""0 1
}""2 3
[(( 	
TempData((	 
](( 
public)) 
string)) 
StatusMessage)) #
{))$ %
get))& )
;))) *
set))+ .
;)). /
}))0 1
public++ 
async++ 
Task++ 
<++ 
IActionResult++ '
>++' (

OnGetAsync++) 3
(++3 4
)++4 5
{,, 	
var-- 
user-- 
=-- 
await-- 
_userManager-- )
.--) *
GetUserAsync--* 6
(--6 7
User--7 ;
)--; <
;--< =
if.. 
(.. 
user.. 
==.. 
null.. 
).. 
{// 
return00 
NotFound00 
(00  
$"00  "
$str00" ?
{00? @
_userManager00@ L
.00L M
	GetUserId00M V
(00V W
User00W [
)00[ \
}00\ ]
$str00] _
"00_ `
)00` a
;00a b
}11 
var33 
isTwoFactorEnabled33 "
=33# $
await33% *
_userManager33+ 7
.337 8$
GetTwoFactorEnabledAsync338 P
(33P Q
user33Q U
)33U V
;33V W
if44 
(44 
!44 
isTwoFactorEnabled44 #
)44# $
{55 
throw66 
new66 %
InvalidOperationException66 3
(663 4
$"664 6
$str	666 É
"
66É Ñ
)
66Ñ Ö
;
66Ö Ü
}77 
return99 
Page99 
(99 
)99 
;99 
}:: 	
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
OnPostAsync<<) 4
(<<4 5
)<<5 6
{== 	
var>> 
user>> 
=>> 
await>> 
_userManager>> )
.>>) *
GetUserAsync>>* 6
(>>6 7
User>>7 ;
)>>; <
;>>< =
if?? 
(?? 
user?? 
==?? 
null?? 
)?? 
{@@ 
returnAA 
NotFoundAA 
(AA  
$"AA  "
$strAA" ?
{AA? @
_userManagerAA@ L
.AAL M
	GetUserIdAAM V
(AAV W
UserAAW [
)AA[ \
}AA\ ]
$strAA] _
"AA_ `
)AA` a
;AAa b
}BB 
varDD 
isTwoFactorEnabledDD "
=DD# $
awaitDD% *
_userManagerDD+ 7
.DD7 8$
GetTwoFactorEnabledAsyncDD8 P
(DDP Q
userDDQ U
)DDU V
;DDV W
varEE 
userIdEE 
=EE 
awaitEE 
_userManagerEE +
.EE+ ,
GetUserIdAsyncEE, :
(EE: ;
userEE; ?
)EE? @
;EE@ A
ifFF 
(FF 
!FF 
isTwoFactorEnabledFF #
)FF# $
{GG 
throwHH 
newHH %
InvalidOperationExceptionHH 3
(HH3 4
$"HH4 6
$strHH6 ~
"HH~ 
)	HH Ä
;
HHÄ Å
}II 
varKK 
recoveryCodesKK 
=KK 
awaitKK  %
_userManagerKK& 2
.KK2 32
&GenerateNewTwoFactorRecoveryCodesAsyncKK3 Y
(KKY Z
userKKZ ^
,KK^ _
$numKK` b
)KKb c
;KKc d
RecoveryCodesLL 
=LL 
recoveryCodesLL )
.LL) *
ToArrayLL* 1
(LL1 2
)LL2 3
;LL3 4
_loggerNN 
.NN 
LogInformationNN "
(NN" #
$strNN# b
,NNb c
userIdNNd j
)NNj k
;NNk l
StatusMessageOO 
=OO 
$strOO D
;OOD E
returnPP 
RedirectToPagePP !
(PP! "
$strPP" 7
)PP7 8
;PP8 9
}QQ 	
}RR 
}SS æT
[C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\ExternalLogins.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 
ExternalLoginsModel $
:% &
	PageModel' 0
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 

IUserStore #
<# $
ApplicationUser$ 3
>3 4

_userStore5 ?
;? @
public 
ExternalLoginsModel "
(" #
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9

IUserStore 
< 
ApplicationUser &
>& '
	userStore( 1
)1 2
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +

_userStore 
= 
	userStore "
;" #
}   	
public&& 
IList&& 
<&& 
UserLoginInfo&& "
>&&" #
CurrentLogins&&$ 1
{&&2 3
get&&4 7
;&&7 8
set&&9 <
;&&< =
}&&> ?
public,, 
IList,, 
<,,  
AuthenticationScheme,, )
>,,) *
OtherLogins,,+ 6
{,,7 8
get,,9 <
;,,< =
set,,> A
;,,A B
},,C D
public22 
bool22 
ShowRemoveButton22 $
{22% &
get22' *
;22* +
set22, /
;22/ 0
}221 2
[88 	
TempData88	 
]88 
public99 
string99 
StatusMessage99 #
{99$ %
get99& )
;99) *
set99+ .
;99. /
}990 1
public;; 
async;; 
Task;; 
<;; 
IActionResult;; '
>;;' (

OnGetAsync;;) 3
(;;3 4
);;4 5
{<< 	
var== 
user== 
=== 
await== 
_userManager== )
.==) *
GetUserAsync==* 6
(==6 7
User==7 ;
)==; <
;==< =
if>> 
(>> 
user>> 
==>> 
null>> 
)>> 
{?? 
return@@ 
NotFound@@ 
(@@  
$"@@  "
$str@@" ?
{@@? @
_userManager@@@ L
.@@L M
	GetUserId@@M V
(@@V W
User@@W [
)@@[ \
}@@\ ]
$str@@] _
"@@_ `
)@@` a
;@@a b
}AA 
CurrentLoginsCC 
=CC 
awaitCC !
_userManagerCC" .
.CC. /
GetLoginsAsyncCC/ =
(CC= >
userCC> B
)CCB C
;CCC D
OtherLoginsDD 
=DD 
(DD 
awaitDD  
_signInManagerDD! /
.DD/ 01
%GetExternalAuthenticationSchemesAsyncDD0 U
(DDU V
)DDV W
)DDW X
.EE 
WhereEE 
(EE 
authEE 
=>EE 
CurrentLoginsEE ,
.EE, -
AllEE- 0
(EE0 1
ulEE1 3
=>EE4 6
authEE7 ;
.EE; <
NameEE< @
!=EEA C
ulEED F
.EEF G
LoginProviderEEG T
)EET U
)EEU V
.FF 
ToListFF 
(FF 
)FF 
;FF 
stringHH 
passwordHashHH 
=HH  !
nullHH" &
;HH& '
ifII 
(II 

_userStoreII 
isII 
IUserPasswordStoreII 0
<II0 1
ApplicationUserII1 @
>II@ A
userPasswordStoreIIB S
)IIS T
{JJ 
passwordHashKK 
=KK 
awaitKK $
userPasswordStoreKK% 6
.KK6 7 
GetPasswordHashAsyncKK7 K
(KKK L
userKKL P
,KKP Q
HttpContextKKR ]
.KK] ^
RequestAbortedKK^ l
)KKl m
;KKm n
}LL 
ShowRemoveButtonNN 
=NN 
passwordHashNN +
!=NN, .
nullNN/ 3
||NN4 6
CurrentLoginsNN7 D
.NND E
CountNNE J
>NNK L
$numNNM N
;NNN O
returnOO 
PageOO 
(OO 
)OO 
;OO 
}PP 	
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' ("
OnPostRemoveLoginAsyncRR) ?
(RR? @
stringRR@ F
loginProviderRRG T
,RRT U
stringRRV \
providerKeyRR] h
)RRh i
{SS 	
varTT 
userTT 
=TT 
awaitTT 
_userManagerTT )
.TT) *
GetUserAsyncTT* 6
(TT6 7
UserTT7 ;
)TT; <
;TT< =
ifUU 
(UU 
userUU 
==UU 
nullUU 
)UU 
{VV 
returnWW 
NotFoundWW 
(WW  
$"WW  "
$strWW" ?
{WW? @
_userManagerWW@ L
.WWL M
	GetUserIdWWM V
(WWV W
UserWWW [
)WW[ \
}WW\ ]
$strWW] _
"WW_ `
)WW` a
;WWa b
}XX 
varZZ 
resultZZ 
=ZZ 
awaitZZ 
_userManagerZZ +
.ZZ+ ,
RemoveLoginAsyncZZ, <
(ZZ< =
userZZ= A
,ZZA B
loginProviderZZC P
,ZZP Q
providerKeyZZR ]
)ZZ] ^
;ZZ^ _
if[[ 
([[ 
![[ 
result[[ 
.[[ 
	Succeeded[[ !
)[[! "
{\\ 
StatusMessage]] 
=]] 
$str]]  E
;]]E F
return^^ 
RedirectToPage^^ %
(^^% &
)^^& '
;^^' (
}__ 
awaitaa 
_signInManageraa  
.aa  !
RefreshSignInAsyncaa! 3
(aa3 4
useraa4 8
)aa8 9
;aa9 :
StatusMessagebb 
=bb 
$strbb =
;bb= >
returncc 
RedirectToPagecc !
(cc! "
)cc" #
;cc# $
}dd 	
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' ( 
OnPostLinkLoginAsyncff) =
(ff= >
stringff> D
providerffE M
)ffM N
{gg 	
awaitii 
HttpContextii 
.ii 
SignOutAsyncii *
(ii* +
IdentityConstantsii+ <
.ii< =
ExternalSchemeii= K
)iiK L
;iiL M
varll 
redirectUrlll 
=ll 
Urlll !
.ll! "
Pagell" &
(ll& '
$strll' 9
,ll9 :
pageHandlerll; F
:llF G
$strllH [
)ll[ \
;ll\ ]
varmm 

propertiesmm 
=mm 
_signInManagermm +
.mm+ ,5
)ConfigureExternalAuthenticationPropertiesmm, U
(mmU V
providermmV ^
,mm^ _
redirectUrlmm` k
,mmk l
_userManagermmm y
.mmy z
	GetUserId	mmz É
(
mmÉ Ñ
User
mmÑ à
)
mmà â
)
mmâ ä
;
mmä ã
returnnn 
newnn 
ChallengeResultnn &
(nn& '
providernn' /
,nn/ 0

propertiesnn1 ;
)nn; <
;nn< =
}oo 	
publicqq 
asyncqq 
Taskqq 
<qq 
IActionResultqq '
>qq' ('
OnGetLinkLoginCallbackAsyncqq) D
(qqD E
)qqE F
{rr 	
varss 
userss 
=ss 
awaitss 
_userManagerss )
.ss) *
GetUserAsyncss* 6
(ss6 7
Userss7 ;
)ss; <
;ss< =
iftt 
(tt 
usertt 
==tt 
nulltt 
)tt 
{uu 
returnvv 
NotFoundvv 
(vv  
$"vv  "
$strvv" ?
{vv? @
_userManagervv@ L
.vvL M
	GetUserIdvvM V
(vvV W
UservvW [
)vv[ \
}vv\ ]
$strvv] _
"vv_ `
)vv` a
;vva b
}ww 
varyy 
userIdyy 
=yy 
awaityy 
_userManageryy +
.yy+ ,
GetUserIdAsyncyy, :
(yy: ;
useryy; ?
)yy? @
;yy@ A
varzz 
infozz 
=zz 
awaitzz 
_signInManagerzz +
.zz+ ,%
GetExternalLoginInfoAsynczz, E
(zzE F
userIdzzF L
)zzL M
;zzM N
if{{ 
({{ 
info{{ 
=={{ 
null{{ 
){{ 
{|| 
throw}} 
new}} %
InvalidOperationException}} 3
(}}3 4
$"}}4 6
$str}}6 l
"}}l m
)}}m n
;}}n o
}~~ 
var
ÄÄ 
result
ÄÄ 
=
ÄÄ 
await
ÄÄ 
_userManager
ÄÄ +
.
ÄÄ+ ,
AddLoginAsync
ÄÄ, 9
(
ÄÄ9 :
user
ÄÄ: >
,
ÄÄ> ?
info
ÄÄ@ D
)
ÄÄD E
;
ÄÄE F
if
ÅÅ 
(
ÅÅ 
!
ÅÅ 
result
ÅÅ 
.
ÅÅ 
	Succeeded
ÅÅ !
)
ÅÅ! "
{
ÇÇ 
StatusMessage
ÉÉ 
=
ÉÉ 
$str
ÉÉ  |
;
ÉÉ| }
return
ÑÑ 
RedirectToPage
ÑÑ %
(
ÑÑ% &
)
ÑÑ& '
;
ÑÑ' (
}
ÖÖ 
await
àà 
HttpContext
àà 
.
àà 
SignOutAsync
àà *
(
àà* +
IdentityConstants
àà+ <
.
àà< =
ExternalScheme
àà= K
)
ààK L
;
ààL M
StatusMessage
ää 
=
ää 
$str
ää ;
;
ää; <
return
ãã 
RedirectToPage
ãã !
(
ãã! "
)
ãã" #
;
ãã# $
}
åå 	
}
çç 
}éé Ég
`C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\EnableAuthenticator.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class $
EnableAuthenticatorModel )
:* +
	PageModel, 5
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !$
EnableAuthenticatorModel! 9
>9 :
_logger; B
;B C
private 
readonly 

UrlEncoder #
_urlEncoder$ /
;/ 0
private 
const 
string "
AuthenticatorUriFormat 3
=4 5
$str6 m
;m n
public $
EnableAuthenticatorModel '
(' (
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< $
EnableAuthenticatorModel ,
>, -
logger. 4
,4 5

UrlEncoder 

urlEncoder !
)! "
{   	
_userManager!! 
=!! 
userManager!! &
;!!& '
_logger"" 
="" 
logger"" 
;"" 
_urlEncoder## 
=## 

urlEncoder## $
;##$ %
}$$ 	
public** 
string** 
	SharedKey** 
{**  !
get**" %
;**% &
set**' *
;*** +
}**, -
public00 
string00 
AuthenticatorUri00 &
{00' (
get00) ,
;00, -
set00. 1
;001 2
}003 4
[66 	
TempData66	 
]66 
public77 
string77 
[77 
]77 
RecoveryCodes77 %
{77& '
get77( +
;77+ ,
set77- 0
;770 1
}772 3
[== 	
TempData==	 
]== 
public>> 
string>> 
StatusMessage>> #
{>>$ %
get>>& )
;>>) *
set>>+ .
;>>. /
}>>0 1
[DD 	
BindPropertyDD	 
]DD 
publicEE 

InputModelEE 
InputEE 
{EE  !
getEE" %
;EE% &
setEE' *
;EE* +
}EE, -
publicKK 
classKK 

InputModelKK 
{LL 	
[QQ 
RequiredQQ 
]QQ 
[RR 
StringLengthRR 
(RR 
$numRR 
,RR 
ErrorMessageRR )
=RR* +
$strRR, j
,RRj k
MinimumLengthRRl y
=RRz {
$numRR| }
)RR} ~
]RR~ 
[SS 
DataTypeSS 
(SS 
DataTypeSS 
.SS 
TextSS #
)SS# $
]SS$ %
[TT 
DisplayTT 
(TT 
NameTT 
=TT 
$strTT /
)TT/ 0
]TT0 1
publicUU 
stringUU 
CodeUU 
{UU  
getUU! $
;UU$ %
setUU& )
;UU) *
}UU+ ,
}VV 	
publicXX 
asyncXX 
TaskXX 
<XX 
IActionResultXX '
>XX' (

OnGetAsyncXX) 3
(XX3 4
)XX4 5
{YY 	
varZZ 
userZZ 
=ZZ 
awaitZZ 
_userManagerZZ )
.ZZ) *
GetUserAsyncZZ* 6
(ZZ6 7
UserZZ7 ;
)ZZ; <
;ZZ< =
if[[ 
([[ 
user[[ 
==[[ 
null[[ 
)[[ 
{\\ 
return]] 
NotFound]] 
(]]  
$"]]  "
$str]]" ?
{]]? @
_userManager]]@ L
.]]L M
	GetUserId]]M V
(]]V W
User]]W [
)]][ \
}]]\ ]
$str]]] _
"]]_ `
)]]` a
;]]a b
}^^ 
await`` *
LoadSharedKeyAndQrCodeUriAsync`` 0
(``0 1
user``1 5
)``5 6
;``6 7
returnbb 
Pagebb 
(bb 
)bb 
;bb 
}cc 	
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
OnPostAsyncee) 4
(ee4 5
)ee5 6
{ff 	
vargg 
usergg 
=gg 
awaitgg 
_userManagergg )
.gg) *
GetUserAsyncgg* 6
(gg6 7
Usergg7 ;
)gg; <
;gg< =
ifhh 
(hh 
userhh 
==hh 
nullhh 
)hh 
{ii 
returnjj 
NotFoundjj 
(jj  
$"jj  "
$strjj" ?
{jj? @
_userManagerjj@ L
.jjL M
	GetUserIdjjM V
(jjV W
UserjjW [
)jj[ \
}jj\ ]
$strjj] _
"jj_ `
)jj` a
;jja b
}kk 
ifmm 
(mm 
!mm 

ModelStatemm 
.mm 
IsValidmm #
)mm# $
{nn 
awaitoo *
LoadSharedKeyAndQrCodeUriAsyncoo 4
(oo4 5
useroo5 9
)oo9 :
;oo: ;
returnpp 
Pagepp 
(pp 
)pp 
;pp 
}qq 
vartt 
verificationCodett  
=tt! "
Inputtt# (
.tt( )
Codett) -
.tt- .
Replacett. 5
(tt5 6
$strtt6 9
,tt9 :
stringtt; A
.ttA B
EmptyttB G
)ttG H
.ttH I
ReplacettI P
(ttP Q
$strttQ T
,ttT U
stringttV \
.tt\ ]
Emptytt] b
)ttb c
;ttc d
varvv 
is2faTokenValidvv 
=vv  !
awaitvv" '
_userManagervv( 4
.vv4 5%
VerifyTwoFactorTokenAsyncvv5 N
(vvN O
userww 
,ww 
_userManagerww "
.ww" #
Optionsww# *
.ww* +
Tokensww+ 1
.ww1 2&
AuthenticatorTokenProviderww2 L
,wwL M
verificationCodewwN ^
)ww^ _
;ww_ `
ifyy 
(yy 
!yy 
is2faTokenValidyy  
)yy  !
{zz 

ModelState{{ 
.{{ 
AddModelError{{ (
({{( )
$str{{) 5
,{{5 6
$str{{7 V
){{V W
;{{W X
await|| *
LoadSharedKeyAndQrCodeUriAsync|| 4
(||4 5
user||5 9
)||9 :
;||: ;
return}} 
Page}} 
(}} 
)}} 
;}} 
}~~ 
await
ÄÄ 
_userManager
ÄÄ 
.
ÄÄ &
SetTwoFactorEnabledAsync
ÄÄ 7
(
ÄÄ7 8
user
ÄÄ8 <
,
ÄÄ< =
true
ÄÄ> B
)
ÄÄB C
;
ÄÄC D
var
ÅÅ 
userId
ÅÅ 
=
ÅÅ 
await
ÅÅ 
_userManager
ÅÅ +
.
ÅÅ+ ,
GetUserIdAsync
ÅÅ, :
(
ÅÅ: ;
user
ÅÅ; ?
)
ÅÅ? @
;
ÅÅ@ A
_logger
ÇÇ 
.
ÇÇ 
LogInformation
ÇÇ "
(
ÇÇ" #
$str
ÇÇ# g
,
ÇÇg h
userId
ÇÇi o
)
ÇÇo p
;
ÇÇp q
StatusMessage
ÑÑ 
=
ÑÑ 
$str
ÑÑ G
;
ÑÑG H
if
ÜÜ 
(
ÜÜ 
await
ÜÜ 
_userManager
ÜÜ "
.
ÜÜ" #%
CountRecoveryCodesAsync
ÜÜ# :
(
ÜÜ: ;
user
ÜÜ; ?
)
ÜÜ? @
==
ÜÜA C
$num
ÜÜD E
)
ÜÜE F
{
áá 
var
àà 
recoveryCodes
àà !
=
àà" #
await
àà$ )
_userManager
àà* 6
.
àà6 74
&GenerateNewTwoFactorRecoveryCodesAsync
àà7 ]
(
àà] ^
user
àà^ b
,
ààb c
$num
ààd f
)
ààf g
;
ààg h
RecoveryCodes
ââ 
=
ââ 
recoveryCodes
ââ  -
.
ââ- .
ToArray
ââ. 5
(
ââ5 6
)
ââ6 7
;
ââ7 8
return
ää 
RedirectToPage
ää %
(
ää% &
$str
ää& ;
)
ää; <
;
ää< =
}
ãã 
else
åå 
{
çç 
return
éé 
RedirectToPage
éé %
(
éé% &
$str
éé& A
)
ééA B
;
ééB C
}
èè 
}
êê 	
private
íí 
async
íí 
Task
íí ,
LoadSharedKeyAndQrCodeUriAsync
íí 9
(
íí9 :
ApplicationUser
íí: I
user
ííJ N
)
ííN O
{
ìì 	
var
ïï 
unformattedKey
ïï 
=
ïï  
await
ïï! &
_userManager
ïï' 3
.
ïï3 4&
GetAuthenticatorKeyAsync
ïï4 L
(
ïïL M
user
ïïM Q
)
ïïQ R
;
ïïR S
if
ññ 
(
ññ 
string
ññ 
.
ññ 
IsNullOrEmpty
ññ $
(
ññ$ %
unformattedKey
ññ% 3
)
ññ3 4
)
ññ4 5
{
óó 
await
òò 
_userManager
òò "
.
òò" #(
ResetAuthenticatorKeyAsync
òò# =
(
òò= >
user
òò> B
)
òòB C
;
òòC D
unformattedKey
ôô 
=
ôô  
await
ôô! &
_userManager
ôô' 3
.
ôô3 4&
GetAuthenticatorKeyAsync
ôô4 L
(
ôôL M
user
ôôM Q
)
ôôQ R
;
ôôR S
}
öö 
	SharedKey
úú 
=
úú 
	FormatKey
úú !
(
úú! "
unformattedKey
úú" 0
)
úú0 1
;
úú1 2
var
ûû 
email
ûû 
=
ûû 
await
ûû 
_userManager
ûû *
.
ûû* +
GetEmailAsync
ûû+ 8
(
ûû8 9
user
ûû9 =
)
ûû= >
;
ûû> ?
AuthenticatorUri
üü 
=
üü 
GenerateQrCodeUri
üü 0
(
üü0 1
email
üü1 6
,
üü6 7
unformattedKey
üü8 F
)
üüF G
;
üüG H
}
†† 	
private
¢¢ 
string
¢¢ 
	FormatKey
¢¢  
(
¢¢  !
string
¢¢! '
unformattedKey
¢¢( 6
)
¢¢6 7
{
££ 	
var
§§ 
result
§§ 
=
§§ 
new
§§ 
StringBuilder
§§ *
(
§§* +
)
§§+ ,
;
§§, -
int
•• 
currentPosition
•• 
=
••  !
$num
••" #
;
••# $
while
¶¶ 
(
¶¶ 
currentPosition
¶¶ "
+
¶¶# $
$num
¶¶% &
<
¶¶' (
unformattedKey
¶¶) 7
.
¶¶7 8
Length
¶¶8 >
)
¶¶> ?
{
ßß 
result
®® 
.
®® 
Append
®® 
(
®® 
unformattedKey
®® ,
.
®®, -
AsSpan
®®- 3
(
®®3 4
currentPosition
®®4 C
,
®®C D
$num
®®E F
)
®®F G
)
®®G H
.
®®H I
Append
®®I O
(
®®O P
$char
®®P S
)
®®S T
;
®®T U
currentPosition
©© 
+=
©©  "
$num
©©# $
;
©©$ %
}
™™ 
if
´´ 
(
´´ 
currentPosition
´´ 
<
´´  !
unformattedKey
´´" 0
.
´´0 1
Length
´´1 7
)
´´7 8
{
¨¨ 
result
≠≠ 
.
≠≠ 
Append
≠≠ 
(
≠≠ 
unformattedKey
≠≠ ,
.
≠≠, -
AsSpan
≠≠- 3
(
≠≠3 4
currentPosition
≠≠4 C
)
≠≠C D
)
≠≠D E
;
≠≠E F
}
ÆÆ 
return
∞∞ 
result
∞∞ 
.
∞∞ 
ToString
∞∞ "
(
∞∞" #
)
∞∞# $
.
∞∞$ %
ToLowerInvariant
∞∞% 5
(
∞∞5 6
)
∞∞6 7
;
∞∞7 8
}
±± 	
private
≥≥ 
string
≥≥ 
GenerateQrCodeUri
≥≥ (
(
≥≥( )
string
≥≥) /
email
≥≥0 5
,
≥≥5 6
string
≥≥7 =
unformattedKey
≥≥> L
)
≥≥L M
{
¥¥ 	
return
µµ 
string
µµ 
.
µµ 
Format
µµ  
(
µµ  !
CultureInfo
∂∂ 
.
∂∂ 
InvariantCulture
∂∂ ,
,
∂∂, -$
AuthenticatorUriFormat
∑∑ &
,
∑∑& '
_urlEncoder
∏∏ 
.
∏∏ 
Encode
∏∏ "
(
∏∏" #
$str
∏∏# E
)
∏∏E F
,
∏∏F G
_urlEncoder
ππ 
.
ππ 
Encode
ππ "
(
ππ" #
email
ππ# (
)
ππ( )
,
ππ) *
unformattedKey
∫∫ 
)
∫∫ 
;
∫∫  
}
ªª 	
}
ºº 
}ΩΩ ¥`
RC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\Email.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 

EmailModel 
: 
	PageModel '
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
IEmailSender %
_emailSender& 2
;2 3
public 

EmailModel 
( 
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
IEmailSender 
emailSender $
)$ %
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_emailSender   
=   
emailSender   &
;  & '
}!! 	
public'' 
string'' 
Email'' 
{'' 
get'' !
;''! "
set''# &
;''& '
}''( )
public-- 
bool-- 
IsEmailConfirmed-- $
{--% &
get--' *
;--* +
set--, /
;--/ 0
}--1 2
[33 	
TempData33	 
]33 
public44 
string44 
StatusMessage44 #
{44$ %
get44& )
;44) *
set44+ .
;44. /
}440 1
[:: 	
BindProperty::	 
]:: 
public;; 

InputModel;; 
Input;; 
{;;  !
get;;" %
;;;% &
set;;' *
;;;* +
};;, -
publicAA 
classAA 

InputModelAA 
{BB 	
[GG 
RequiredGG 
]GG 
[HH 
EmailAddressHH 
]HH 
[II 
DisplayII 
(II 
NameII 
=II 
$strII '
)II' (
]II( )
publicJJ 
stringJJ 
NewEmailJJ "
{JJ# $
getJJ% (
;JJ( )
setJJ* -
;JJ- .
}JJ/ 0
}KK 	
privateMM 
asyncMM 
TaskMM 
	LoadAsyncMM $
(MM$ %
ApplicationUserMM% 4
userMM5 9
)MM9 :
{NN 	
varOO 
emailOO 
=OO 
awaitOO 
_userManagerOO *
.OO* +
GetEmailAsyncOO+ 8
(OO8 9
userOO9 =
)OO= >
;OO> ?
EmailPP 
=PP 
emailPP 
;PP 
InputRR 
=RR 
newRR 

InputModelRR "
{SS 
NewEmailTT 
=TT 
emailTT  
,TT  !
}UU 
;UU 
IsEmailConfirmedWW 
=WW 
awaitWW $
_userManagerWW% 1
.WW1 2!
IsEmailConfirmedAsyncWW2 G
(WWG H
userWWH L
)WWL M
;WWM N
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
<ZZ 
IActionResultZZ '
>ZZ' (

OnGetAsyncZZ) 3
(ZZ3 4
)ZZ4 5
{[[ 	
var\\ 
user\\ 
=\\ 
await\\ 
_userManager\\ )
.\\) *
GetUserAsync\\* 6
(\\6 7
User\\7 ;
)\\; <
;\\< =
if]] 
(]] 
user]] 
==]] 
null]] 
)]] 
{^^ 
return__ 
NotFound__ 
(__  
$"__  "
$str__" ?
{__? @
_userManager__@ L
.__L M
	GetUserId__M V
(__V W
User__W [
)__[ \
}__\ ]
$str__] _
"___ `
)__` a
;__a b
}`` 
awaitbb 
	LoadAsyncbb 
(bb 
userbb  
)bb  !
;bb! "
returncc 
Pagecc 
(cc 
)cc 
;cc 
}dd 	
publicff 
asyncff 
Taskff 
<ff 
IActionResultff '
>ff' ("
OnPostChangeEmailAsyncff) ?
(ff? @
)ff@ A
{gg 	
varhh 
userhh 
=hh 
awaithh 
_userManagerhh )
.hh) *
GetUserAsynchh* 6
(hh6 7
Userhh7 ;
)hh; <
;hh< =
ifii 
(ii 
userii 
==ii 
nullii 
)ii 
{jj 
returnkk 
NotFoundkk 
(kk  
$"kk  "
$strkk" ?
{kk? @
_userManagerkk@ L
.kkL M
	GetUserIdkkM V
(kkV W
UserkkW [
)kk[ \
}kk\ ]
$strkk] _
"kk_ `
)kk` a
;kka b
}ll 
ifnn 
(nn 
!nn 

ModelStatenn 
.nn 
IsValidnn #
)nn# $
{oo 
awaitpp 
	LoadAsyncpp 
(pp  
userpp  $
)pp$ %
;pp% &
returnqq 
Pageqq 
(qq 
)qq 
;qq 
}rr 
vartt 
emailtt 
=tt 
awaittt 
_userManagertt *
.tt* +
GetEmailAsynctt+ 8
(tt8 9
usertt9 =
)tt= >
;tt> ?
ifuu 
(uu 
Inputuu 
.uu 
NewEmailuu 
!=uu !
emailuu" '
)uu' (
{vv 
varww 
userIdww 
=ww 
awaitww "
_userManagerww# /
.ww/ 0
GetUserIdAsyncww0 >
(ww> ?
userww? C
)wwC D
;wwD E
varxx 
codexx 
=xx 
awaitxx  
_userManagerxx! -
.xx- .)
GenerateChangeEmailTokenAsyncxx. K
(xxK L
userxxL P
,xxP Q
InputxxR W
.xxW X
NewEmailxxX `
)xx` a
;xxa b
codeyy 
=yy 
WebEncodersyy "
.yy" #
Base64UrlEncodeyy# 2
(yy2 3
Encodingyy3 ;
.yy; <
UTF8yy< @
.yy@ A
GetBytesyyA I
(yyI J
codeyyJ N
)yyN O
)yyO P
;yyP Q
varzz 
callbackUrlzz 
=zz  !
Urlzz" %
.zz% &
Pagezz& *
(zz* +
$str{{ 1
,{{1 2
pageHandler|| 
:||  
null||! %
,||% &
values}} 
:}} 
new}} 
{}}  !
area}}" &
=}}' (
$str}}) 3
,}}3 4
userId}}5 ;
=}}< =
userId}}> D
,}}D E
email}}F K
=}}L M
Input}}N S
.}}S T
NewEmail}}T \
,}}\ ]
code}}^ b
=}}c d
code}}e i
}}}j k
,}}k l
protocol~~ 
:~~ 
Request~~ %
.~~% &
Scheme~~& ,
)~~, -
;~~- .
await 
_emailSender "
." #
SendEmailAsync# 1
(1 2
Input
ÄÄ 
.
ÄÄ 
NewEmail
ÄÄ "
,
ÄÄ" #
$str
ÅÅ (
,
ÅÅ( )
$"
ÇÇ 
$str
ÇÇ >
{
ÇÇ> ?
HtmlEncoder
ÇÇ? J
.
ÇÇJ K
Default
ÇÇK R
.
ÇÇR S
Encode
ÇÇS Y
(
ÇÇY Z
callbackUrl
ÇÇZ e
)
ÇÇe f
}
ÇÇf g
$str
ÇÇg {
"
ÇÇ{ |
)
ÇÇ| }
;
ÇÇ} ~
StatusMessage
ÑÑ 
=
ÑÑ 
$str
ÑÑ  b
;
ÑÑb c
return
ÖÖ 
RedirectToPage
ÖÖ %
(
ÖÖ% &
)
ÖÖ& '
;
ÖÖ' (
}
ÜÜ 
StatusMessage
àà 
=
àà 
$str
àà 6
;
àà6 7
return
ââ 
RedirectToPage
ââ !
(
ââ! "
)
ââ" #
;
ââ# $
}
ää 	
public
åå 
async
åå 
Task
åå 
<
åå 
IActionResult
åå '
>
åå' (.
 OnPostSendVerificationEmailAsync
åå) I
(
ååI J
)
ååJ K
{
çç 	
var
éé 
user
éé 
=
éé 
await
éé 
_userManager
éé )
.
éé) *
GetUserAsync
éé* 6
(
éé6 7
User
éé7 ;
)
éé; <
;
éé< =
if
èè 
(
èè 
user
èè 
==
èè 
null
èè 
)
èè 
{
êê 
return
ëë 
NotFound
ëë 
(
ëë  
$"
ëë  "
$str
ëë" ?
{
ëë? @
_userManager
ëë@ L
.
ëëL M
	GetUserId
ëëM V
(
ëëV W
User
ëëW [
)
ëë[ \
}
ëë\ ]
$str
ëë] _
"
ëë_ `
)
ëë` a
;
ëëa b
}
íí 
if
îî 
(
îî 
!
îî 

ModelState
îî 
.
îî 
IsValid
îî #
)
îî# $
{
ïï 
await
ññ 
	LoadAsync
ññ 
(
ññ  
user
ññ  $
)
ññ$ %
;
ññ% &
return
óó 
Page
óó 
(
óó 
)
óó 
;
óó 
}
òò 
var
öö 
userId
öö 
=
öö 
await
öö 
_userManager
öö +
.
öö+ ,
GetUserIdAsync
öö, :
(
öö: ;
user
öö; ?
)
öö? @
;
öö@ A
var
õõ 
email
õõ 
=
õõ 
await
õõ 
_userManager
õõ *
.
õõ* +
GetEmailAsync
õõ+ 8
(
õõ8 9
user
õõ9 =
)
õõ= >
;
õõ> ?
var
úú 
code
úú 
=
úú 
await
úú 
_userManager
úú )
.
úú) *1
#GenerateEmailConfirmationTokenAsync
úú* M
(
úúM N
user
úúN R
)
úúR S
;
úúS T
code
ùù 
=
ùù 
WebEncoders
ùù 
.
ùù 
Base64UrlEncode
ùù .
(
ùù. /
Encoding
ùù/ 7
.
ùù7 8
UTF8
ùù8 <
.
ùù< =
GetBytes
ùù= E
(
ùùE F
code
ùùF J
)
ùùJ K
)
ùùK L
;
ùùL M
var
ûû 
callbackUrl
ûû 
=
ûû 
Url
ûû !
.
ûû! "
Page
ûû" &
(
ûû& '
$str
üü '
,
üü' (
pageHandler
†† 
:
†† 
null
†† !
,
††! "
values
°° 
:
°° 
new
°° 
{
°° 
area
°° "
=
°°# $
$str
°°% /
,
°°/ 0
userId
°°1 7
=
°°8 9
userId
°°: @
,
°°@ A
code
°°B F
=
°°G H
code
°°I M
}
°°N O
,
°°O P
protocol
¢¢ 
:
¢¢ 
Request
¢¢ !
.
¢¢! "
Scheme
¢¢" (
)
¢¢( )
;
¢¢) *
await
££ 
_emailSender
££ 
.
££ 
SendEmailAsync
££ -
(
££- .
email
§§ 
,
§§ 
$str
•• $
,
••$ %
$"
¶¶ 
$str
¶¶ :
{
¶¶: ;
HtmlEncoder
¶¶; F
.
¶¶F G
Default
¶¶G N
.
¶¶N O
Encode
¶¶O U
(
¶¶U V
callbackUrl
¶¶V a
)
¶¶a b
}
¶¶b c
$str
¶¶c w
"
¶¶w x
)
¶¶x y
;
¶¶y z
StatusMessage
®® 
=
®® 
$str
®® O
;
®®O P
return
©© 
RedirectToPage
©© !
(
©©! "
)
©©" #
;
©©# $
}
™™ 	
}
´´ 
}¨¨ ˙)
aC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\DownloadPersonalData.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class %
DownloadPersonalDataModel *
:+ ,
	PageModel- 6
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !%
DownloadPersonalDataModel! :
>: ;
_logger< C
;C D
public %
DownloadPersonalDataModel (
(( )
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< %
DownloadPersonalDataModel -
>- .
logger/ 5
)5 6
{ 	
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
public   
IActionResult   
OnGet   "
(  " #
)  # $
{!! 	
return"" 
NotFound"" 
("" 
)"" 
;"" 
}## 	
public%% 
async%% 
Task%% 
<%% 
IActionResult%% '
>%%' (
OnPostAsync%%) 4
(%%4 5
)%%5 6
{&& 	
var'' 
user'' 
='' 
await'' 
_userManager'' )
.'') *
GetUserAsync''* 6
(''6 7
User''7 ;
)''; <
;''< =
if(( 
((( 
user(( 
==(( 
null(( 
)(( 
{)) 
return** 
NotFound** 
(**  
$"**  "
$str**" ?
{**? @
_userManager**@ L
.**L M
	GetUserId**M V
(**V W
User**W [
)**[ \
}**\ ]
$str**] _
"**_ `
)**` a
;**a b
}++ 
_logger-- 
.-- 
LogInformation-- "
(--" #
$str--# [
,--[ \
_userManager--] i
.--i j
	GetUserId--j s
(--s t
User--t x
)--x y
)--y z
;--z {
var00 
personalData00 
=00 
new00 "

Dictionary00# -
<00- .
string00. 4
,004 5
string006 <
>00< =
(00= >
)00> ?
;00? @
var11 
personalDataProps11 !
=11" #
typeof11$ *
(11* +
ApplicationUser11+ :
)11: ;
.11; <
GetProperties11< I
(11I J
)11J K
.11K L
Where11L Q
(11Q R
prop22  
=>22! #
	Attribute22$ -
.22- .
	IsDefined22. 7
(227 8
prop228 <
,22< =
typeof22> D
(22D E!
PersonalDataAttribute22E Z
)22Z [
)22[ \
)22\ ]
;22] ^
foreach33 
(33 
var33 
p33 
in33 
personalDataProps33 /
)33/ 0
{44 
personalData55 
.55 
Add55  
(55  !
p55! "
.55" #
Name55# '
,55' (
p55) *
.55* +
GetValue55+ 3
(553 4
user554 8
)558 9
?559 :
.55: ;
ToString55; C
(55C D
)55D E
??55F H
$str55I O
)55O P
;55P Q
}66 
var88 
logins88 
=88 
await88 
_userManager88 +
.88+ ,
GetLoginsAsync88, :
(88: ;
user88; ?
)88? @
;88@ A
foreach99 
(99 
var99 
l99 
in99 
logins99 $
)99$ %
{:: 
personalData;; 
.;; 
Add;;  
(;;  !
$";;! #
{;;# $
l;;$ %
.;;% &
LoginProvider;;& 3
};;3 4
$str;;4 P
";;P Q
,;;Q R
l;;S T
.;;T U
ProviderKey;;U `
);;` a
;;;a b
}<< 
personalData>> 
.>> 
Add>> 
(>> 
$">> 
$str>> 0
">>0 1
,>>1 2
await>>3 8
_userManager>>9 E
.>>E F$
GetAuthenticatorKeyAsync>>F ^
(>>^ _
user>>_ c
)>>c d
)>>d e
;>>e f
Response@@ 
.@@ 
Headers@@ 
.@@ 
TryAdd@@ #
(@@# $
$str@@$ 9
,@@9 :
$str@@; c
)@@c d
;@@d e
returnAA 
newAA 
FileContentResultAA (
(AA( )
JsonSerializerAA) 7
.AA7 8 
SerializeToUtf8BytesAA8 L
(AAL M
personalDataAAM Y
)AAY Z
,AAZ [
$strAA\ n
)AAn o
;AAo p
}BB 	
}CC 
}DD ß$
WC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\Disable2fa.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 
Disable2faModel  
:! "
	PageModel# ,
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !
Disable2faModel! 0
>0 1
_logger2 9
;9 :
public 
Disable2faModel 
( 
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< 
Disable2faModel #
># $
logger% +
)+ ,
{ 	
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
[   	
TempData  	 
]   
public!! 
string!! 
StatusMessage!! #
{!!$ %
get!!& )
;!!) *
set!!+ .
;!!. /
}!!0 1
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
OnGet##) .
(##. /
)##/ 0
{$$ 	
var%% 
user%% 
=%% 
await%% 
_userManager%% )
.%%) *
GetUserAsync%%* 6
(%%6 7
User%%7 ;
)%%; <
;%%< =
if&& 
(&& 
user&& 
==&& 
null&& 
)&& 
{'' 
return(( 
NotFound(( 
(((  
$"((  "
$str((" ?
{((? @
_userManager((@ L
.((L M
	GetUserId((M V
(((V W
User((W [
)(([ \
}((\ ]
$str((] _
"((_ `
)((` a
;((a b
})) 
if++ 
(++ 
!++ 
await++ 
_userManager++ #
.++# $$
GetTwoFactorEnabledAsync++$ <
(++< =
user++= A
)++A B
)++B C
{,, 
throw-- 
new-- %
InvalidOperationException-- 3
(--3 4
$"--4 6
$str--6 p
"--p q
)--q r
;--r s
}.. 
return00 
Page00 
(00 
)00 
;00 
}11 	
public33 
async33 
Task33 
<33 
IActionResult33 '
>33' (
OnPostAsync33) 4
(334 5
)335 6
{44 	
var55 
user55 
=55 
await55 
_userManager55 )
.55) *
GetUserAsync55* 6
(556 7
User557 ;
)55; <
;55< =
if66 
(66 
user66 
==66 
null66 
)66 
{77 
return88 
NotFound88 
(88  
$"88  "
$str88" ?
{88? @
_userManager88@ L
.88L M
	GetUserId88M V
(88V W
User88W [
)88[ \
}88\ ]
$str88] _
"88_ `
)88` a
;88a b
}99 
var;; 
disable2faResult;;  
=;;! "
await;;# (
_userManager;;) 5
.;;5 6$
SetTwoFactorEnabledAsync;;6 N
(;;N O
user;;O S
,;;S T
false;;U Z
);;Z [
;;;[ \
if<< 
(<< 
!<< 
disable2faResult<< !
.<<! "
	Succeeded<<" +
)<<+ ,
{== 
throw>> 
new>> %
InvalidOperationException>> 3
(>>3 4
$">>4 6
$str>>6 ^
">>^ _
)>>_ `
;>>` a
}?? 
_loggerAA 
.AA 
LogInformationAA "
(AA" #
$strAA# N
,AAN O
_userManagerAAP \
.AA\ ]
	GetUserIdAA] f
(AAf g
UserAAg k
)AAk l
)AAl m
;AAm n
StatusMessageBB 
=BB 
$strBB m
;BBm n
returnCC 
RedirectToPageCC !
(CC! "
$strCC" =
)CC= >
;CC> ?
}DD 	
}EE 
}FF Ø2
_C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\DeletePersonalData.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class #
DeletePersonalDataModel (
:) *
	PageModel+ 4
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ILogger  
<  !#
DeletePersonalDataModel! 8
>8 9
_logger: A
;A B
public #
DeletePersonalDataModel &
(& '
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
ILogger 
< #
DeletePersonalDataModel +
>+ ,
logger- 3
)3 4
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_logger 
= 
logger 
; 
} 	
[$$ 	
BindProperty$$	 
]$$ 
public%% 

InputModel%% 
Input%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
public++ 
class++ 

InputModel++ 
{,, 	
[11 
Required11 
]11 
[22 
DataType22 
(22 
DataType22 
.22 
Password22 '
)22' (
]22( )
public33 
string33 
Password33 "
{33# $
get33% (
;33( )
set33* -
;33- .
}33/ 0
}44 	
public:: 
bool:: 
RequirePassword:: #
{::$ %
get::& )
;::) *
set::+ .
;::. /
}::0 1
public<< 
async<< 
Task<< 
<<< 
IActionResult<< '
><<' (
OnGet<<) .
(<<. /
)<</ 0
{== 	
var>> 
user>> 
=>> 
await>> 
_userManager>> )
.>>) *
GetUserAsync>>* 6
(>>6 7
User>>7 ;
)>>; <
;>>< =
if?? 
(?? 
user?? 
==?? 
null?? 
)?? 
{@@ 
returnAA 
NotFoundAA 
(AA  
$"AA  "
$strAA" ?
{AA? @
_userManagerAA@ L
.AAL M
	GetUserIdAAM V
(AAV W
UserAAW [
)AA[ \
}AA\ ]
$strAA] _
"AA_ `
)AA` a
;AAa b
}BB 
RequirePasswordDD 
=DD 
awaitDD #
_userManagerDD$ 0
.DD0 1
HasPasswordAsyncDD1 A
(DDA B
userDDB F
)DDF G
;DDG H
returnEE 
PageEE 
(EE 
)EE 
;EE 
}FF 	
publicHH 
asyncHH 
TaskHH 
<HH 
IActionResultHH '
>HH' (
OnPostAsyncHH) 4
(HH4 5
)HH5 6
{II 	
varJJ 
userJJ 
=JJ 
awaitJJ 
_userManagerJJ )
.JJ) *
GetUserAsyncJJ* 6
(JJ6 7
UserJJ7 ;
)JJ; <
;JJ< =
ifKK 
(KK 
userKK 
==KK 
nullKK 
)KK 
{LL 
returnMM 
NotFoundMM 
(MM  
$"MM  "
$strMM" ?
{MM? @
_userManagerMM@ L
.MML M
	GetUserIdMMM V
(MMV W
UserMMW [
)MM[ \
}MM\ ]
$strMM] _
"MM_ `
)MM` a
;MMa b
}NN 
RequirePasswordPP 
=PP 
awaitPP #
_userManagerPP$ 0
.PP0 1
HasPasswordAsyncPP1 A
(PPA B
userPPB F
)PPF G
;PPG H
ifQQ 
(QQ 
RequirePasswordQQ 
)QQ  
{RR 
ifSS 
(SS 
!SS 
awaitSS 
_userManagerSS '
.SS' (
CheckPasswordAsyncSS( :
(SS: ;
userSS; ?
,SS? @
InputSSA F
.SSF G
PasswordSSG O
)SSO P
)SSP Q
{TT 

ModelStateUU 
.UU 
AddModelErrorUU ,
(UU, -
stringUU- 3
.UU3 4
EmptyUU4 9
,UU9 :
$strUU; P
)UUP Q
;UUQ R
returnVV 
PageVV 
(VV  
)VV  !
;VV! "
}WW 
}XX 
varZZ 
resultZZ 
=ZZ 
awaitZZ 
_userManagerZZ +
.ZZ+ ,
DeleteAsyncZZ, 7
(ZZ7 8
userZZ8 <
)ZZ< =
;ZZ= >
var[[ 
userId[[ 
=[[ 
await[[ 
_userManager[[ +
.[[+ ,
GetUserIdAsync[[, :
([[: ;
user[[; ?
)[[? @
;[[@ A
if\\ 
(\\ 
!\\ 
result\\ 
.\\ 
	Succeeded\\ !
)\\! "
{]] 
throw^^ 
new^^ %
InvalidOperationException^^ 3
(^^3 4
$"^^4 6
$str^^6 ^
"^^^ _
)^^_ `
;^^` a
}__ 
awaitaa 
_signInManageraa  
.aa  !
SignOutAsyncaa! -
(aa- .
)aa. /
;aa/ 0
_loggercc 
.cc 
LogInformationcc "
(cc" #
$strcc# P
,ccP Q
userIdccR X
)ccX Y
;ccY Z
returnee 
Redirectee 
(ee 
$stree  
)ee  !
;ee! "
}ff 	
}gg 
}hh ã>
[C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Manage\ChangePassword.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
./ 0
Manage0 6
{ 
public 

class 
ChangePasswordModel $
:% &
	PageModel' 0
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ILogger  
<  !
ChangePasswordModel! 4
>4 5
_logger6 =
;= >
public 
ChangePasswordModel "
(" #
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
ILogger 
< 
ChangePasswordModel '
>' (
logger) /
)/ 0
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
_logger 
= 
logger 
; 
} 	
[$$ 	
BindProperty$$	 
]$$ 
public%% 

InputModel%% 
Input%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
[++ 	
TempData++	 
]++ 
public,, 
string,, 
StatusMessage,, #
{,,$ %
get,,& )
;,,) *
set,,+ .
;,,. /
},,0 1
public22 
class22 

InputModel22 
{33 	
[88 
Required88 
]88 
[99 
DataType99 
(99 
DataType99 
.99 
Password99 '
)99' (
]99( )
[:: 
Display:: 
(:: 
Name:: 
=:: 
$str:: .
)::. /
]::/ 0
public;; 
string;; 
OldPassword;; %
{;;& '
get;;( +
;;;+ ,
set;;- 0
;;;0 1
};;2 3
[AA 
RequiredAA 
]AA 
[BB 
StringLengthBB 
(BB 
$numBB 
,BB 
ErrorMessageBB +
=BB, -
$strBB. l
,BBl m
MinimumLengthBBn {
=BB| }
$numBB~ 
)	BB Ä
]
BBÄ Å
[CC 
DataTypeCC 
(CC 
DataTypeCC 
.CC 
PasswordCC '
)CC' (
]CC( )
[DD 
DisplayDD 
(DD 
NameDD 
=DD 
$strDD *
)DD* +
]DD+ ,
publicEE 
stringEE 
NewPasswordEE %
{EE& '
getEE( +
;EE+ ,
setEE- 0
;EE0 1
}EE2 3
[KK 
DataTypeKK 
(KK 
DataTypeKK 
.KK 
PasswordKK '
)KK' (
]KK( )
[LL 
DisplayLL 
(LL 
NameLL 
=LL 
$strLL 2
)LL2 3
]LL3 4
[MM 
CompareMM 
(MM 
$strMM "
,MM" #
ErrorMessageMM$ 0
=MM1 2
$strMM3 m
)MMm n
]MMn o
publicNN 
stringNN 
ConfirmPasswordNN )
{NN* +
getNN, /
;NN/ 0
setNN1 4
;NN4 5
}NN6 7
}OO 	
publicQQ 
asyncQQ 
TaskQQ 
<QQ 
IActionResultQQ '
>QQ' (

OnGetAsyncQQ) 3
(QQ3 4
)QQ4 5
{RR 	
varSS 
userSS 
=SS 
awaitSS 
_userManagerSS )
.SS) *
GetUserAsyncSS* 6
(SS6 7
UserSS7 ;
)SS; <
;SS< =
ifTT 
(TT 
userTT 
==TT 
nullTT 
)TT 
{UU 
returnVV 
NotFoundVV 
(VV  
$"VV  "
$strVV" ?
{VV? @
_userManagerVV@ L
.VVL M
	GetUserIdVVM V
(VVV W
UserVVW [
)VV[ \
}VV\ ]
$strVV] _
"VV_ `
)VV` a
;VVa b
}WW 
varYY 
hasPasswordYY 
=YY 
awaitYY #
_userManagerYY$ 0
.YY0 1
HasPasswordAsyncYY1 A
(YYA B
userYYB F
)YYF G
;YYG H
ifZZ 
(ZZ 
!ZZ 
hasPasswordZZ 
)ZZ 
{[[ 
return\\ 
RedirectToPage\\ %
(\\% &
$str\\& 5
)\\5 6
;\\6 7
}]] 
return__ 
Page__ 
(__ 
)__ 
;__ 
}`` 	
publicbb 
asyncbb 
Taskbb 
<bb 
IActionResultbb '
>bb' (
OnPostAsyncbb) 4
(bb4 5
)bb5 6
{cc 	
ifdd 
(dd 
!dd 

ModelStatedd 
.dd 
IsValiddd #
)dd# $
{ee 
returnff 
Pageff 
(ff 
)ff 
;ff 
}gg 
varii 
userii 
=ii 
awaitii 
_userManagerii )
.ii) *
GetUserAsyncii* 6
(ii6 7
Userii7 ;
)ii; <
;ii< =
ifjj 
(jj 
userjj 
==jj 
nulljj 
)jj 
{kk 
returnll 
NotFoundll 
(ll  
$"ll  "
$strll" ?
{ll? @
_userManagerll@ L
.llL M
	GetUserIdllM V
(llV W
UserllW [
)ll[ \
}ll\ ]
$strll] _
"ll_ `
)ll` a
;lla b
}mm 
varoo  
changePasswordResultoo $
=oo% &
awaitoo' ,
_userManageroo- 9
.oo9 :
ChangePasswordAsyncoo: M
(ooM N
userooN R
,ooR S
InputooT Y
.ooY Z
OldPasswordooZ e
,ooe f
Inputoog l
.ool m
NewPasswordoom x
)oox y
;ooy z
ifpp 
(pp 
!pp  
changePasswordResultpp %
.pp% &
	Succeededpp& /
)pp/ 0
{qq 
foreachrr 
(rr 
varrr 
errorrr "
inrr# % 
changePasswordResultrr& :
.rr: ;
Errorsrr; A
)rrA B
{ss 

ModelStatett 
.tt 
AddModelErrortt ,
(tt, -
stringtt- 3
.tt3 4
Emptytt4 9
,tt9 :
errortt; @
.tt@ A
DescriptionttA L
)ttL M
;ttM N
}uu 
returnvv 
Pagevv 
(vv 
)vv 
;vv 
}ww 
awaityy 
_signInManageryy  
.yy  !
RefreshSignInAsyncyy! 3
(yy3 4
useryy4 8
)yy8 9
;yy9 :
_loggerzz 
.zz 
LogInformationzz "
(zz" #
$strzz# N
)zzN O
;zzO P
StatusMessage{{ 
={{ 
$str{{ =
;{{= >
return}} 
RedirectToPage}} !
(}}! "
)}}" #
;}}# $
}~~ 	
} 
}ÄÄ Æ
LC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Logout.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
LogoutModel 
: 
	PageModel (
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
ILogger  
<  !
LogoutModel! ,
>, -
_logger. 5
;5 6
public 
LogoutModel 
( 
SignInManager (
<( )
ApplicationUser) 8
>8 9
signInManager: G
,G H
ILoggerI P
<P Q
LogoutModelQ \
>\ ]
logger^ d
)d e
{ 	
_signInManager 
= 
signInManager *
;* +
_logger 
= 
logger 
; 
} 	
public 
async 
Task 
< 
IActionResult '
>' (
OnPost) /
(/ 0
string0 6
	returnUrl7 @
=A B
nullC G
)G H
{ 	
await 
_signInManager  
.  !
SignOutAsync! -
(- .
). /
;/ 0
_logger 
. 
LogInformation "
(" #
$str# 5
)5 6
;6 7
if 
( 
	returnUrl 
!= 
null !
)! "
{   
return!! 
LocalRedirect!! $
(!!$ %
	returnUrl!!% .
)!!. /
;!!/ 0
}"" 
else## 
{$$ 
return'' 
RedirectToPage'' %
(''% &
)''& '
;''' (
}(( 
})) 	
public** 
string**  
GetRedirectUrlByRole** *
(*** +
)**+ ,
{++ 	
if,, 
(,, 
User,, 
.,, 
IsInRole,, 
(,, 
$str,, -
),,- .
),,. /
{-- 
return.. 
$str.. +
;..+ ,
}// 
else00 
if00 
(00 
User00 
.00 
IsInRole00 "
(00" #
$str00# 3
)003 4
)004 5
{11 
return22 
$str22 3
;223 4
}33 
else44 
if44 
(44 
User44 
.44 
IsInRole44 "
(44" #
$str44# -
)44- .
)44. /
{55 
return66 
$str66 *
;66* +
}77 
else88 
{99 
return:: 
$str:: +
;::+ ,
};; 
}== 	
}>> 
}?? á5
[C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\LoginWithRecoveryCode.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class &
LoginWithRecoveryCodeModel +
:, -
	PageModel. 7
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !&
LoginWithRecoveryCodeModel! ;
>; <
_logger= D
;D E
public &
LoginWithRecoveryCodeModel )
() *
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< &
LoginWithRecoveryCodeModel .
>. /
logger0 6
)6 7
{ 	
_signInManager 
= 
signInManager *
;* +
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
} 	
[$$ 	
BindProperty$$	 
]$$ 
public%% 

InputModel%% 
Input%% 
{%%  !
get%%" %
;%%% &
set%%' *
;%%* +
}%%, -
public++ 
string++ 
	ReturnUrl++ 
{++  !
get++" %
;++% &
set++' *
;++* +
}++, -
public11 
class11 

InputModel11 
{22 	
[77 
BindProperty77 
]77 
[88 
Required88 
]88 
[99 
DataType99 
(99 
DataType99 
.99 
Text99 #
)99# $
]99$ %
[:: 
Display:: 
(:: 
Name:: 
=:: 
$str:: +
)::+ ,
]::, -
public;; 
string;; 
RecoveryCode;; &
{;;' (
get;;) ,
;;;, -
set;;. 1
;;;1 2
};;3 4
}<< 	
public>> 
async>> 
Task>> 
<>> 
IActionResult>> '
>>>' (

OnGetAsync>>) 3
(>>3 4
string>>4 :
	returnUrl>>; D
=>>E F
null>>G K
)>>K L
{?? 	
varAA 
userAA 
=AA 
awaitAA 
_signInManagerAA +
.AA+ ,/
#GetTwoFactorAuthenticationUserAsyncAA, O
(AAO P
)AAP Q
;AAQ R
ifBB 
(BB 
userBB 
==BB 
nullBB 
)BB 
{CC 
throwDD 
newDD %
InvalidOperationExceptionDD 3
(DD3 4
$"DD4 6
$strDD6 d
"DDd e
)DDe f
;DDf g
}EE 
	ReturnUrlGG 
=GG 
	returnUrlGG !
;GG! "
returnII 
PageII 
(II 
)II 
;II 
}JJ 	
publicLL 
asyncLL 
TaskLL 
<LL 
IActionResultLL '
>LL' (
OnPostAsyncLL) 4
(LL4 5
stringLL5 ;
	returnUrlLL< E
=LLF G
nullLLH L
)LLL M
{MM 	
ifNN 
(NN 
!NN 

ModelStateNN 
.NN 
IsValidNN #
)NN# $
{OO 
returnPP 
PagePP 
(PP 
)PP 
;PP 
}QQ 
varSS 
userSS 
=SS 
awaitSS 
_signInManagerSS +
.SS+ ,/
#GetTwoFactorAuthenticationUserAsyncSS, O
(SSO P
)SSP Q
;SSQ R
ifTT 
(TT 
userTT 
==TT 
nullTT 
)TT 
{UU 
throwVV 
newVV %
InvalidOperationExceptionVV 3
(VV3 4
$"VV4 6
$strVV6 d
"VVd e
)VVe f
;VVf g
}WW 
varYY 
recoveryCodeYY 
=YY 
InputYY $
.YY$ %
RecoveryCodeYY% 1
.YY1 2
ReplaceYY2 9
(YY9 :
$strYY: =
,YY= >
stringYY? E
.YYE F
EmptyYYF K
)YYK L
;YYL M
var[[ 
result[[ 
=[[ 
await[[ 
_signInManager[[ -
.[[- .,
 TwoFactorRecoveryCodeSignInAsync[[. N
([[N O
recoveryCode[[O [
)[[[ \
;[[\ ]
var]] 
userId]] 
=]] 
await]] 
_userManager]] +
.]]+ ,
GetUserIdAsync]], :
(]]: ;
user]]; ?
)]]? @
;]]@ A
if__ 
(__ 
result__ 
.__ 
	Succeeded__  
)__  !
{`` 
_loggeraa 
.aa 
LogInformationaa &
(aa& '
$straa' `
,aa` a
useraab f
.aaf g
Idaag i
)aai j
;aaj k
returnbb 
LocalRedirectbb $
(bb$ %
	returnUrlbb% .
??bb/ 1
Urlbb2 5
.bb5 6
Contentbb6 =
(bb= >
$strbb> B
)bbB C
)bbC D
;bbD E
}cc 
ifdd 
(dd 
resultdd 
.dd 
IsLockedOutdd "
)dd" #
{ee 
_loggerff 
.ff 

LogWarningff "
(ff" #
$strff# =
)ff= >
;ff> ?
returngg 
RedirectToPagegg %
(gg% &
$strgg& 1
)gg1 2
;gg2 3
}hh 
elseii 
{jj 
_loggerkk 
.kk 

LogWarningkk "
(kk" #
$strkk# _
,kk_ `
userkka e
.kke f
Idkkf h
)kkh i
;kki j

ModelStatell 
.ll 
AddModelErrorll (
(ll( )
stringll) /
.ll/ 0
Emptyll0 5
,ll5 6
$strll7 W
)llW X
;llX Y
returnmm 
Pagemm 
(mm 
)mm 
;mm 
}nn 
}oo 	
}pp 
}qq >
RC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\LoginWith2fa.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
LoginWith2faModel "
:# $
	PageModel% .
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !
LoginWith2faModel! 2
>2 3
_logger4 ;
;; <
public 
LoginWith2faModel  
(  !
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger 
< 
LoginWith2faModel %
>% &
logger' -
)- .
{ 	
_signInManager 
= 
signInManager *
;* +
_userManager 
= 
userManager &
;& '
_logger 
= 
logger 
; 
}   	
[&& 	
BindProperty&&	 
]&& 
public'' 

InputModel'' 
Input'' 
{''  !
get''" %
;''% &
set''' *
;''* +
}'', -
public-- 
bool-- 

RememberMe-- 
{--  
get--! $
;--$ %
set--& )
;--) *
}--+ ,
public33 
string33 
	ReturnUrl33 
{33  !
get33" %
;33% &
set33' *
;33* +
}33, -
public99 
class99 

InputModel99 
{:: 	
[?? 
Required?? 
]?? 
[@@ 
StringLength@@ 
(@@ 
$num@@ 
,@@ 
ErrorMessage@@ )
=@@* +
$str@@, j
,@@j k
MinimumLength@@l y
=@@z {
$num@@| }
)@@} ~
]@@~ 
[AA 
DataTypeAA 
(AA 
DataTypeAA 
.AA 
TextAA #
)AA# $
]AA$ %
[BB 
DisplayBB 
(BB 
NameBB 
=BB 
$strBB 0
)BB0 1
]BB1 2
publicCC 
stringCC 
TwoFactorCodeCC '
{CC( )
getCC* -
;CC- .
setCC/ 2
;CC2 3
}CC4 5
[II 
DisplayII 
(II 
NameII 
=II 
$strII 3
)II3 4
]II4 5
publicJJ 
boolJJ 
RememberMachineJJ '
{JJ( )
getJJ* -
;JJ- .
setJJ/ 2
;JJ2 3
}JJ4 5
}KK 	
publicMM 
asyncMM 
TaskMM 
<MM 
IActionResultMM '
>MM' (

OnGetAsyncMM) 3
(MM3 4
boolMM4 8

rememberMeMM9 C
,MMC D
stringMME K
	returnUrlMML U
=MMV W
nullMMX \
)MM\ ]
{NN 	
varPP 
userPP 
=PP 
awaitPP 
_signInManagerPP +
.PP+ ,/
#GetTwoFactorAuthenticationUserAsyncPP, O
(PPO P
)PPP Q
;PPQ R
ifRR 
(RR 
userRR 
==RR 
nullRR 
)RR 
{SS 
throwTT 
newTT %
InvalidOperationExceptionTT 3
(TT3 4
$"TT4 6
$strTT6 d
"TTd e
)TTe f
;TTf g
}UU 
	ReturnUrlWW 
=WW 
	returnUrlWW !
;WW! "

RememberMeXX 
=XX 

rememberMeXX #
;XX# $
returnZZ 
PageZZ 
(ZZ 
)ZZ 
;ZZ 
}[[ 	
public]] 
async]] 
Task]] 
<]] 
IActionResult]] '
>]]' (
OnPostAsync]]) 4
(]]4 5
bool]]5 9

rememberMe]]: D
,]]D E
string]]F L
	returnUrl]]M V
=]]W X
null]]Y ]
)]]] ^
{^^ 	
if__ 
(__ 
!__ 

ModelState__ 
.__ 
IsValid__ #
)__# $
{`` 
returnaa 
Pageaa 
(aa 
)aa 
;aa 
}bb 
	returnUrldd 
=dd 
	returnUrldd !
??dd" $
Urldd% (
.dd( )
Contentdd) 0
(dd0 1
$strdd1 5
)dd5 6
;dd6 7
varff 
userff 
=ff 
awaitff 
_signInManagerff +
.ff+ ,/
#GetTwoFactorAuthenticationUserAsyncff, O
(ffO P
)ffP Q
;ffQ R
ifgg 
(gg 
usergg 
==gg 
nullgg 
)gg 
{hh 
throwii 
newii %
InvalidOperationExceptionii 3
(ii3 4
$"ii4 6
$strii6 d
"iid e
)iie f
;iif g
}jj 
varll 
authenticatorCodell !
=ll" #
Inputll$ )
.ll) *
TwoFactorCodell* 7
.ll7 8
Replacell8 ?
(ll? @
$strll@ C
,llC D
stringllE K
.llK L
EmptyllL Q
)llQ R
.llR S
ReplacellS Z
(llZ [
$strll[ ^
,ll^ _
stringll` f
.llf g
Emptyllg l
)lll m
;llm n
varnn 
resultnn 
=nn 
awaitnn 
_signInManagernn -
.nn- .-
!TwoFactorAuthenticatorSignInAsyncnn. O
(nnO P
authenticatorCodennP a
,nna b

rememberMennc m
,nnm n
Inputnno t
.nnt u
RememberMachine	nnu Ñ
)
nnÑ Ö
;
nnÖ Ü
varpp 
userIdpp 
=pp 
awaitpp 
_userManagerpp +
.pp+ ,
GetUserIdAsyncpp, :
(pp: ;
userpp; ?
)pp? @
;pp@ A
ifrr 
(rr 
resultrr 
.rr 
	Succeededrr  
)rr  !
{ss 
_loggertt 
.tt 
LogInformationtt &
(tt& '
$strtt' T
,ttT U
userttV Z
.ttZ [
Idtt[ ]
)tt] ^
;tt^ _
returnuu 
LocalRedirectuu $
(uu$ %
	returnUrluu% .
)uu. /
;uu/ 0
}vv 
elseww 
ifww 
(ww 
resultww 
.ww 
IsLockedOutww '
)ww' (
{xx 
_loggeryy 
.yy 

LogWarningyy "
(yy" #
$stryy# P
,yyP Q
useryyR V
.yyV W
IdyyW Y
)yyY Z
;yyZ [
returnzz 
RedirectToPagezz %
(zz% &
$strzz& 1
)zz1 2
;zz2 3
}{{ 
else|| 
{}} 
_logger~~ 
.~~ 

LogWarning~~ "
(~~" #
$str~~# d
,~~d e
user~~f j
.~~j k
Id~~k m
)~~m n
;~~n o

ModelState 
. 
AddModelError (
(( )
string) /
./ 0
Empty0 5
,5 6
$str7 T
)T U
;U V
return
ÄÄ 
Page
ÄÄ 
(
ÄÄ 
)
ÄÄ 
;
ÄÄ 
}
ÅÅ 
}
ÇÇ 	
}
ÉÉ 
}ÑÑ Èz
KC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Login.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 

LoginModel 
: 
	PageModel '
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
ILogger  
<  !

LoginModel! +
>+ ,
_logger- 4
;4 5
private 
readonly 
RoleManager $
<$ %
IdentityRole% 1
>1 2
_roleManager3 ?
;? @
public 

LoginModel 
( 
SignInManager 
< 
ApplicationUser )
>) *
signInManager+ 8
,8 9
UserManager 
< 
ApplicationUser '
>' (
userManager) 4
,4 5
ILogger   
<   

LoginModel   
>   
logger    &
,  & '
RoleManager!! 
<!! 
IdentityRole!! $
>!!$ %
roleManager!!& 1
)!!1 2
{"" 	
_signInManager## 
=## 
signInManager## *
;##* +
_userManager$$ 
=$$ 
userManager$$ &
;$$& '
_logger%% 
=%% 
logger%% 
;%% 
_roleManager&& 
=&& 
roleManager&& &
;&&& '
}'' 	
[)) 	
BindProperty))	 
])) 
public** 

InputModel** 
Input** 
{**  !
get**" %
;**% &
set**' *
;*** +
}**, -
public,, 
IList,, 
<,,  
AuthenticationScheme,, )
>,,) *
ExternalLogins,,+ 9
{,,: ;
get,,< ?
;,,? @
set,,A D
;,,D E
},,F G
public.. 
string.. 
	ReturnUrl.. 
{..  !
get.." %
;..% &
set..' *
;..* +
}.., -
[00 	
TempData00	 
]00 
public11 
string11 
ErrorMessage11 "
{11# $
get11% (
;11( )
set11* -
;11- .
}11/ 0
public33 
class33 

InputModel33 
{44 	
[55 
Required55 
(55 
ErrorMessage55 "
=55# $
$str55% E
)55E F
]55F G
[66 
EmailAddress66 
]66 
public77 
string77 
Email77 
{77  !
get77" %
;77% &
set77' *
;77* +
}77, -
[99 
Required99 
(99 
ErrorMessage99 "
=99# $
$str99% E
)99E F
]99F G
[:: 
DataType:: 
(:: 
DataType:: 
.:: 
Password:: '
)::' (
]::( )
public;; 
string;; 
Password;; "
{;;# $
get;;% (
;;;( )
set;;* -
;;;- .
};;/ 0
[== 
Display== 
(== 
Name== 
=== 
$str== E
)==E F
]==F G
public>> 
bool>> 

RememberMe>> "
{>># $
get>>% (
;>>( )
set>>* -
;>>- .
}>>/ 0
}?? 	
publicAA 
asyncAA 
TaskAA 

OnGetAsyncAA $
(AA$ %
stringAA% +
	returnUrlAA, 5
=AA6 7
nullAA8 <
)AA< =
{BB 	
ifCC 
(CC 
!CC 
stringCC 
.CC 
IsNullOrEmptyCC %
(CC% &
ErrorMessageCC& 2
)CC2 3
)CC3 4
{DD 

ModelStateEE 
.EE 
AddModelErrorEE (
(EE( )
stringEE) /
.EE/ 0
EmptyEE0 5
,EE5 6
ErrorMessageEE7 C
)EEC D
;EED E
}FF 
	returnUrlHH 
??=HH 
UrlHH 
.HH 
ContentHH %
(HH% &
$strHH& *
)HH* +
;HH+ ,
awaitKK 
HttpContextKK 
.KK 
SignOutAsyncKK *
(KK* +
IdentityConstantsKK+ <
.KK< =
ExternalSchemeKK= K
)KKK L
;KKL M
ExternalLoginsMM 
=MM 
(MM 
awaitMM #
_signInManagerMM$ 2
.MM2 31
%GetExternalAuthenticationSchemesAsyncMM3 X
(MMX Y
)MMY Z
)MMZ [
.MM[ \
ToListMM\ b
(MMb c
)MMc d
;MMd e
	ReturnUrlOO 
=OO 
	returnUrlOO !
;OO! "
}PP 	
publicRR 
asyncRR 
TaskRR 
<RR 
IActionResultRR '
>RR' (
OnPostAsyncRR) 4
(RR4 5
stringRR5 ;
	returnUrlRR< E
=RRF G
nullRRH L
)RRL M
{SS 	
	returnUrlTT 
??=TT 
UrlTT 
.TT 
ContentTT %
(TT% &
$strTT& *
)TT* +
;TT+ ,
ExternalLoginsUU 
=UU 
(UU 
awaitUU #
_signInManagerUU$ 2
.UU2 31
%GetExternalAuthenticationSchemesAsyncUU3 X
(UUX Y
)UUY Z
)UUZ [
.UU[ \
ToListUU\ b
(UUb c
)UUc d
;UUd e
ifWW 
(WW 

ModelStateWW 
.WW 
IsValidWW "
)WW" #
{XX 
varZZ 
userZZ 
=ZZ 
awaitZZ  
_userManagerZZ! -
.ZZ- .
FindByEmailAsyncZZ. >
(ZZ> ?
InputZZ? D
.ZZD E
EmailZZE J
)ZZJ K
;ZZK L
if\\ 
(\\ 
user\\ 
==\\ 
null\\  
)\\  !
{]] 

ModelState__ 
.__ 
AddModelError__ ,
(__, -
string__- 3
.__3 4
Empty__4 9
,__9 :
$str__; ]
)__] ^
;__^ _
return`` 
Page`` 
(``  
)``  !
;``! "
}aa 
vardd 
resultdd 
=dd 
awaitdd "
_signInManagerdd# 1
.dd1 2
PasswordSignInAsyncdd2 E
(ddE F
Inputee 
.ee 
Emailee 
,ee  
Inputff 
.ff 
Passwordff "
,ff" #
Inputgg 
.gg 

RememberMegg $
,gg$ %
lockoutOnFailurehh $
:hh$ %
falsehh& +
)hh+ ,
;hh, -
ifjj 
(jj 
resultjj 
.jj 
	Succeededjj $
)jj$ %
{kk 
_loggerll 
.ll 
LogInformationll *
(ll* +
$strll+ H
)llH I
;llI J
ifoo 
(oo 
useroo 
!=oo 
nulloo  $
&&oo% '
awaitoo( -
_userManageroo. :
.oo: ;
IsInRoleAsyncoo; H
(ooH I
userooI M
,ooM N
$strooO _
)oo_ `
)oo` a
{pp 
varqq 
existingClaimsqq *
=qq+ ,
awaitqq- 2
_userManagerqq3 ?
.qq? @
GetClaimsAsyncqq@ N
(qqN O
userqqO S
)qqS T
;qqT U
varrr 
layoutClaimrr '
=rr( )
existingClaimsrr* 8
.rr8 9
FirstOrDefaultrr9 G
(rrG H
crrH I
=>rrJ L
crrM N
.rrN O
TyperrO S
==rrT V
$strrrW i
)rri j
;rrj k
iftt 
(tt 
layoutClaimtt '
!=tt( *
nulltt+ /
)tt/ 0
{uu 
awaitvv !
_userManagervv" .
.vv. /
RemoveClaimAsyncvv/ ?
(vv? @
uservv@ D
,vvD E
layoutClaimvvF Q
)vvQ R
;vvR S
}ww 
awaitxx 
_userManagerxx *
.xx* +
AddClaimAsyncxx+ 8
(xx8 9
userxx9 =
,xx= >
newxx? B
ClaimxxC H
(xxH I
$strxxI [
,xx[ \
$strxx] f
)xxf g
)xxg h
;xxh i
awaityy 
_signInManageryy ,
.yy, -
RefreshSignInAsyncyy- ?
(yy? @
useryy@ D
)yyD E
;yyE F
returnzz 
RedirectToActionzz /
(zz/ 0
$strzz0 ?
,zz? @
$strzzA N
)zzN O
;zzO P
}{{ 
if~~ 
(~~ 
user~~ 
!=~~ 
null~~  $
&&~~% '
await~~( -
_userManager~~. :
.~~: ;
IsInRoleAsync~~; H
(~~H I
user~~I M
,~~M N
$str~~O ^
)~~^ _
)~~_ `
{ 
var
ÄÄ 
existingClaims
ÄÄ *
=
ÄÄ+ ,
await
ÄÄ- 2
_userManager
ÄÄ3 ?
.
ÄÄ? @
GetClaimsAsync
ÄÄ@ N
(
ÄÄN O
user
ÄÄO S
)
ÄÄS T
;
ÄÄT U
var
ÅÅ 
layoutClaim
ÅÅ '
=
ÅÅ( )
existingClaims
ÅÅ* 8
.
ÅÅ8 9
FirstOrDefault
ÅÅ9 G
(
ÅÅG H
c
ÅÅH I
=>
ÅÅJ L
c
ÅÅM N
.
ÅÅN O
Type
ÅÅO S
==
ÅÅT V
$str
ÅÅW i
)
ÅÅi j
;
ÅÅj k
if
ÉÉ 
(
ÉÉ 
layoutClaim
ÉÉ '
!=
ÉÉ( *
null
ÉÉ+ /
)
ÉÉ/ 0
{
ÑÑ 
await
ÖÖ !
_userManager
ÖÖ" .
.
ÖÖ. /
RemoveClaimAsync
ÖÖ/ ?
(
ÖÖ? @
user
ÖÖ@ D
,
ÖÖD E
layoutClaim
ÖÖF Q
)
ÖÖQ R
;
ÖÖR S
}
ÜÜ 
await
áá 
_userManager
áá *
.
áá* +
AddClaimAsync
áá+ 8
(
áá8 9
user
áá9 =
,
áá= >
new
áá? B
Claim
ááC H
(
ááH I
$str
ááI [
,
áá[ \
$str
áá] l
)
áál m
)
áám n
;
áán o
await
àà 
_signInManager
àà ,
.
àà, - 
RefreshSignInAsync
àà- ?
(
àà? @
user
àà@ D
)
ààD E
;
ààE F
return
ââ 
RedirectToAction
ââ /
(
ââ/ 0
$str
ââ0 8
,
ââ8 9
$str
ââ: F
)
ââF G
;
ââG H
}
ää 
if
çç 
(
çç 
user
çç 
!=
çç 
null
çç  $
&&
çç% '
await
çç( -
_userManager
çç. :
.
çç: ;
IsInRoleAsync
çç; H
(
ççH I
user
ççI M
,
ççM N
$str
ççO Y
)
ççY Z
)
ççZ [
{
éé 
var
èè 
existingClaims
èè *
=
èè+ ,
await
èè- 2
_userManager
èè3 ?
.
èè? @
GetClaimsAsync
èè@ N
(
èèN O
user
èèO S
)
èèS T
;
èèT U
var
êê 
layoutClaim
êê '
=
êê( )
existingClaims
êê* 8
.
êê8 9
FirstOrDefault
êê9 G
(
êêG H
c
êêH I
=>
êêJ L
c
êêM N
.
êêN O
Type
êêO S
==
êêT V
$str
êêW i
)
êêi j
;
êêj k
if
íí 
(
íí 
layoutClaim
íí '
!=
íí( *
null
íí+ /
)
íí/ 0
{
ìì 
await
îî !
_userManager
îî" .
.
îî. /
RemoveClaimAsync
îî/ ?
(
îî? @
user
îî@ D
,
îîD E
layoutClaim
îîF Q
)
îîQ R
;
îîR S
}
ïï 
await
ññ 
_userManager
ññ *
.
ññ* +
AddClaimAsync
ññ+ 8
(
ññ8 9
user
ññ9 =
,
ññ= >
new
ññ? B
Claim
ññC H
(
ññH I
$str
ññI [
,
ññ[ \
$str
ññ] g
)
ññg h
)
ññh i
;
ññi j
await
óó 
_signInManager
óó ,
.
óó, - 
RefreshSignInAsync
óó- ?
(
óó? @
user
óó@ D
)
óóD E
;
óóE F
return
òò 
RedirectToAction
òò /
(
òò/ 0
$str
òò0 9
,
òò9 :
$str
òò; E
)
òòE F
;
òòF G
}
ôô 
return
õõ 
RedirectToAction
õõ +
(
õõ+ ,
$str
õõ, 3
,
õõ3 4
$str
õõ5 ;
)
õõ; <
;
õõ< =
}
úú 
if
ùù 
(
ùù 
!
ùù 
result
ùù 
.
ùù 
	Succeeded
ùù %
)
ùù% &
{
ûû 

ModelState
üü 
.
üü 
AddModelError
üü ,
(
üü, -
string
üü- 3
.
üü3 4
Empty
üü4 9
,
üü9 :
$str
üü; ]
)
üü] ^
;
üü^ _
return
†† 
Page
†† 
(
††  
)
††  !
;
††! "
}
°° 
if
¢¢ 
(
¢¢ 
result
¢¢ 
.
¢¢ 
RequiresTwoFactor
¢¢ ,
)
¢¢, -
{
££ 
return
§§ 
RedirectToPage
§§ )
(
§§) *
$str
§§* :
,
§§: ;
new
§§< ?
{
§§@ A
	ReturnUrl
§§B K
=
§§L M
	returnUrl
§§N W
,
§§W X

RememberMe
§§Y c
=
§§d e
Input
§§f k
.
§§k l

RememberMe
§§l v
}
§§w x
)
§§x y
;
§§y z
}
•• 
if
¶¶ 
(
¶¶ 
result
¶¶ 
.
¶¶ 
IsLockedOut
¶¶ &
)
¶¶& '
{
ßß 
_logger
®® 
.
®® 

LogWarning
®® &
(
®®& '
$str
®®' E
)
®®E F
;
®®F G
return
©© 
RedirectToPage
©© )
(
©©) *
$str
©©* 5
)
©©5 6
;
©©6 7
}
™™ 
else
´´ 
{
¨¨ 

ModelState
ÆÆ 
.
ÆÆ 
AddModelError
ÆÆ ,
(
ÆÆ, -
string
ÆÆ- 3
.
ÆÆ3 4
Empty
ÆÆ4 9
,
ÆÆ9 :
$str
ÆÆ; ]
)
ÆÆ] ^
;
ÆÆ^ _
return
ØØ 
Page
ØØ 
(
ØØ  
)
ØØ  !
;
ØØ! "
}
∞∞ 
}
±± 
if
≤≤ 
(
≤≤ 
!
≤≤ 

ModelState
≤≤ 
.
≤≤ 
IsValid
≤≤ #
)
≤≤# $
{
≥≥ 

ModelState
µµ 
.
µµ 
Clear
µµ  
(
µµ  !
)
µµ! "
;
µµ" #

ModelState
∏∏ 
.
∏∏ 
AddModelError
∏∏ (
(
∏∏( )
string
∏∏) /
.
∏∏/ 0
Empty
∏∏0 5
,
∏∏5 6
$str
∏∏7 W
)
∏∏W X
;
∏∏X Y
return
ππ 
Page
ππ 
(
ππ 
)
ππ 
;
ππ 
}
∫∫ 
return
ΩΩ 
Page
ΩΩ 
(
ΩΩ 
)
ΩΩ 
;
ΩΩ 
}
ææ 	
}
øø 
}¿¿ ’
MC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\Lockout.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{		 
[ 
AllowAnonymous 
] 
public 

class 
LockoutModel 
: 
	PageModel  )
{ 
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} ˆ
`C:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ForgotPasswordConfirmation.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{		 
[ 
AllowAnonymous 
] 
public 

class &
ForgotPasswordConfirmation +
:, -
	PageModel. 7
{ 
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} á'
TC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ForgotPassword.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
ForgotPasswordModel $
:% &
	PageModel' 0
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
IEmailSender %
_emailSender& 2
;2 3
public 
ForgotPasswordModel "
(" #
UserManager# .
<. /
ApplicationUser/ >
>> ?
userManager@ K
,K L
IEmailSenderM Y
emailSenderZ e
)e f
{ 	
_userManager 
= 
userManager &
;& '
_emailSender 
= 
emailSender &
;& '
} 	
[## 	
BindProperty##	 
]## 
public$$ 

InputModel$$ 
Input$$ 
{$$  !
get$$" %
;$$% &
set$$' *
;$$* +
}$$, -
public** 
class** 

InputModel** 
{++ 	
[11 
Required11 
(11 
ErrorMessage11 "
=11# $
$str11% K
)11K L
]11L M
[22 
EmailAddress22 
(22 
ErrorMessage22 &
=22' (
$str22) X
)22X Y
]22Y Z
[33 
Display33 
(33 
Name33 
=33 
$str33 0
)330 1
]331 2
public44 
string44 
Email44 
{44  !
get44" %
;44% &
set44' *
;44* +
}44, -
}55 	
public77 
async77 
Task77 
<77 
IActionResult77 '
>77' (
OnPostAsync77) 4
(774 5
)775 6
{88 	
if99 
(99 

ModelState99 
.99 
IsValid99 "
)99" #
{:: 
var;; 
user;; 
=;; 
await;;  
_userManager;;! -
.;;- .
FindByEmailAsync;;. >
(;;> ?
Input;;? D
.;;D E
Email;;E J
);;J K
;;;K L
if<< 
(<< 
user<< 
==<< 
null<<  
||<<! #
!<<$ %
(<<% &
await<<& +
_userManager<<, 8
.<<8 9!
IsEmailConfirmedAsync<<9 N
(<<N O
user<<O S
)<<S T
)<<T U
)<<U V
{== 
return?? 
RedirectToPage?? )
(??) *
$str??* H
)??H I
;??I J
}@@ 
varDD 
codeDD 
=DD 
awaitDD  
_userManagerDD! -
.DD- .+
GeneratePasswordResetTokenAsyncDD. M
(DDM N
userDDN R
)DDR S
;DDS T
codeEE 
=EE 
WebEncodersEE "
.EE" #
Base64UrlEncodeEE# 2
(EE2 3
EncodingEE3 ;
.EE; <
UTF8EE< @
.EE@ A
GetBytesEEA I
(EEI J
codeEEJ N
)EEN O
)EEO P
;EEP Q
varFF 
callbackUrlFF 
=FF  !
UrlFF" %
.FF% &
PageFF& *
(FF* +
$strGG ,
,GG, -
pageHandlerHH 
:HH  
nullHH! %
,HH% &
valuesII 
:II 
newII 
{II  !
areaII" &
=II' (
$strII) 3
,II3 4
codeII5 9
}II: ;
,II; <
protocolJJ 
:JJ 
RequestJJ %
.JJ% &
SchemeJJ& ,
)JJ, -
;JJ- .
varLL 
	emailBodyLL 
=LL 
$@"LL  #
$strLi# (
{ii( )
HtmlEncoderii) 4
.ii4 5
Defaultii5 <
.ii< =
Encodeii= C
(iiC D
callbackUrliiD O
)iiO P
}iiP Q
$strimQ !
{mm! "
DateTimemm" *
.mm* +
Nowmm+ .
.mm. /
Yearmm/ 3
}mm3 4
$strmq4 
"qq 
;qq 
awaitss 
_emailSenderss "
.ss" #
SendEmailAsyncss# 1
(ss1 2
Inputtt 
.tt 
Emailtt 
,tt  
$struu :
,uu: ;
	emailBodyvv 
)vv 
;vv 
returnxx 
RedirectToPagexx %
(xx% &
$strxx& D
)xxD E
;xxE F
}yy 
return{{ 
Page{{ 
({{ 
){{ 
;{{ 
}|| 	
}}} 
}~~ ‘ç
SC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ExternalLogin.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
[ 
AllowAnonymous 
] 
public 

class 
ExternalLoginModel #
:$ %
	PageModel& /
{ 
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 

IUserStore #
<# $
ApplicationUser$ 3
>3 4

_userStore5 ?
;? @
private 
readonly 
IUserEmailStore (
<( )
ApplicationUser) 8
>8 9
_emailStore: E
;E F
private 
readonly 
IEmailSender %
_emailSender& 2
;2 3
private   
readonly   
ILogger    
<    !
ExternalLoginModel  ! 3
>  3 4
_logger  5 <
;  < =
public"" 
ExternalLoginModel"" !
(""! "
SignInManager## 
<## 
ApplicationUser## )
>##) *
signInManager##+ 8
,##8 9
UserManager$$ 
<$$ 
ApplicationUser$$ '
>$$' (
userManager$$) 4
,$$4 5

IUserStore%% 
<%% 
ApplicationUser%% &
>%%& '
	userStore%%( 1
,%%1 2
ILogger&& 
<&& 
ExternalLoginModel&& &
>&&& '
logger&&( .
,&&. /
IEmailSender'' 
emailSender'' $
)''$ %
{(( 	
_signInManager)) 
=)) 
signInManager)) *
;))* +
_userManager** 
=** 
userManager** &
;**& '

_userStore++ 
=++ 
	userStore++ "
;++" #
_emailStore,, 
=,, 
GetEmailStore,, '
(,,' (
),,( )
;,,) *
_logger-- 
=-- 
logger-- 
;-- 
_emailSender.. 
=.. 
emailSender.. &
;..& '
}// 	
[55 	
BindProperty55	 
]55 
public66 

InputModel66 
Input66 
{66  !
get66" %
;66% &
set66' *
;66* +
}66, -
public<< 
string<< 
ProviderDisplayName<< )
{<<* +
get<<, /
;<</ 0
set<<1 4
;<<4 5
}<<6 7
publicBB 
stringBB 
	ReturnUrlBB 
{BB  !
getBB" %
;BB% &
setBB' *
;BB* +
}BB, -
[HH 	
TempDataHH	 
]HH 
publicII 
stringII 
ErrorMessageII "
{II# $
getII% (
;II( )
setII* -
;II- .
}II/ 0
publicOO 
classOO 

InputModelOO 
{PP 	
[UU 
RequiredUU 
]UU 
[VV 
EmailAddressVV 
]VV 
[WW 
DisplayWW 
(WW 
NameWW 
=WW 
$strWW #
)WW# $
]WW$ %
publicXX 
stringXX 
EmailXX 
{XX  !
getXX" %
;XX% &
setXX' *
;XX* +
}XX, -
}YY 	
public[[ 
IActionResult[[ 
OnGet[[ "
([[" #
)[[# $
=>[[% '
RedirectToPage[[( 6
([[6 7
$str[[7 @
)[[@ A
;[[A B
public]] 
IActionResult]] 
OnPost]] #
(]]# $
string]]$ *
provider]]+ 3
,]]3 4
string]]5 ;
	returnUrl]]< E
=]]F G
null]]H L
)]]L M
{^^ 	
var`` 
redirectUrl`` 
=`` 
Url`` !
.``! "
Page``" &
(``& '
$str``' 8
,``8 9
pageHandler``: E
:``E F
$str``G Q
,``Q R
values``S Y
:``Y Z
new``[ ^
{``_ `
	returnUrl``a j
}``k l
)``l m
;``m n
varaa 

propertiesaa 
=aa 
_signInManageraa +
.aa+ ,5
)ConfigureExternalAuthenticationPropertiesaa, U
(aaU V
provideraaV ^
,aa^ _
redirectUrlaa` k
)aak l
;aal m
returnbb 
newbb 
ChallengeResultbb &
(bb& '
providerbb' /
,bb/ 0

propertiesbb1 ;
)bb; <
;bb< =
}cc 	
publicee 
asyncee 
Taskee 
<ee 
IActionResultee '
>ee' (
OnGetCallbackAsyncee) ;
(ee; <
stringee< B
	returnUrleeC L
=eeM N
nulleeO S
,eeS T
stringeeU [
remoteErroree\ g
=eeh i
nulleej n
)een o
{ff 	
	returnUrlgg 
=gg 
	returnUrlgg !
??gg" $
Urlgg% (
.gg( )
Contentgg) 0
(gg0 1
$strgg1 5
)gg5 6
;gg6 7
ifhh 
(hh 
remoteErrorhh 
!=hh 
nullhh #
)hh# $
{ii 
ErrorMessagejj 
=jj 
$"jj !
$strjj! ?
{jj? @
remoteErrorjj@ K
}jjK L
"jjL M
;jjM N
returnkk 
RedirectToPagekk %
(kk% &
$strkk& /
,kk/ 0
newkk1 4
{kk5 6
	ReturnUrlkk7 @
=kkA B
	returnUrlkkC L
}kkM N
)kkN O
;kkO P
}ll 
varmm 
infomm 
=mm 
awaitmm 
_signInManagermm +
.mm+ ,%
GetExternalLoginInfoAsyncmm, E
(mmE F
)mmF G
;mmG H
ifnn 
(nn 
infonn 
==nn 
nullnn 
)nn 
{oo 
ErrorMessagepp 
=pp 
$strpp J
;ppJ K
returnqq 
RedirectToPageqq %
(qq% &
$strqq& /
,qq/ 0
newqq1 4
{qq5 6
	ReturnUrlqq7 @
=qqA B
	returnUrlqqC L
}qqM N
)qqN O
;qqO P
}rr 
varuu 
resultuu 
=uu 
awaituu 
_signInManageruu -
.uu- .$
ExternalLoginSignInAsyncuu. F
(uuF G
infouuG K
.uuK L
LoginProvideruuL Y
,uuY Z
infouu[ _
.uu_ `
ProviderKeyuu` k
,uuk l
isPersistentuum y
:uuy z
false	uu{ Ä
,
uuÄ Å
bypassTwoFactor
uuÇ ë
:
uuë í
true
uuì ó
)
uuó ò
;
uuò ô
ifvv 
(vv 
resultvv 
.vv 
	Succeededvv  
)vv  !
{ww 
_loggerxx 
.xx 
LogInformationxx &
(xx& '
$strxx' X
,xxX Y
infoxxZ ^
.xx^ _
	Principalxx_ h
.xxh i
Identityxxi q
.xxq r
Namexxr v
,xxv w
infoxxx |
.xx| }
LoginProvider	xx} ä
)
xxä ã
;
xxã å
returnyy 
LocalRedirectyy $
(yy$ %
	returnUrlyy% .
)yy. /
;yy/ 0
}zz 
if{{ 
({{ 
result{{ 
.{{ 
IsLockedOut{{ "
){{" #
{|| 
return}} 
RedirectToPage}} %
(}}% &
$str}}& 1
)}}1 2
;}}2 3
}~~ 
else 
{
ÄÄ 
	ReturnUrl
ÇÇ 
=
ÇÇ 
	returnUrl
ÇÇ %
;
ÇÇ% &!
ProviderDisplayName
ÉÉ #
=
ÉÉ$ %
info
ÉÉ& *
.
ÉÉ* +!
ProviderDisplayName
ÉÉ+ >
;
ÉÉ> ?
if
ÑÑ 
(
ÑÑ 
info
ÑÑ 
.
ÑÑ 
	Principal
ÑÑ "
.
ÑÑ" #
HasClaim
ÑÑ# +
(
ÑÑ+ ,
c
ÑÑ, -
=>
ÑÑ. 0
c
ÑÑ1 2
.
ÑÑ2 3
Type
ÑÑ3 7
==
ÑÑ8 :

ClaimTypes
ÑÑ; E
.
ÑÑE F
Email
ÑÑF K
)
ÑÑK L
)
ÑÑL M
{
ÖÖ 
Input
ÜÜ 
=
ÜÜ 
new
ÜÜ 

InputModel
ÜÜ  *
{
áá 
Email
àà 
=
àà 
info
àà  $
.
àà$ %
	Principal
àà% .
.
àà. /
FindFirstValue
àà/ =
(
àà= >

ClaimTypes
àà> H
.
ààH I
Email
ààI N
)
ààN O
}
ââ 
;
ââ 
}
ää 
return
ãã 
Page
ãã 
(
ãã 
)
ãã 
;
ãã 
}
åå 
}
çç 	
public
èè 
async
èè 
Task
èè 
<
èè 
IActionResult
èè '
>
èè' (%
OnPostConfirmationAsync
èè) @
(
èè@ A
string
èèA G
	returnUrl
èèH Q
=
èèR S
null
èèT X
)
èèX Y
{
êê 	
	returnUrl
ëë 
=
ëë 
	returnUrl
ëë !
??
ëë" $
Url
ëë% (
.
ëë( )
Content
ëë) 0
(
ëë0 1
$str
ëë1 5
)
ëë5 6
;
ëë6 7
var
ìì 
info
ìì 
=
ìì 
await
ìì 
_signInManager
ìì +
.
ìì+ ,'
GetExternalLoginInfoAsync
ìì, E
(
ììE F
)
ììF G
;
ììG H
if
îî 
(
îî 
info
îî 
==
îî 
null
îî 
)
îî 
{
ïï 
ErrorMessage
ññ 
=
ññ 
$str
ññ ^
;
ññ^ _
return
óó 
RedirectToPage
óó %
(
óó% &
$str
óó& /
,
óó/ 0
new
óó1 4
{
óó5 6
	ReturnUrl
óó7 @
=
óóA B
	returnUrl
óóC L
}
óóM N
)
óóN O
;
óóO P
}
òò 
if
öö 
(
öö 

ModelState
öö 
.
öö 
IsValid
öö "
)
öö" #
{
õõ 
var
úú 
user
úú 
=
úú 

CreateUser
úú %
(
úú% &
)
úú& '
;
úú' (
await
ûû 

_userStore
ûû  
.
ûû  !
SetUserNameAsync
ûû! 1
(
ûû1 2
user
ûû2 6
,
ûû6 7
Input
ûû8 =
.
ûû= >
Email
ûû> C
,
ûûC D
CancellationToken
ûûE V
.
ûûV W
None
ûûW [
)
ûû[ \
;
ûû\ ]
await
üü 
_emailStore
üü !
.
üü! "
SetEmailAsync
üü" /
(
üü/ 0
user
üü0 4
,
üü4 5
Input
üü6 ;
.
üü; <
Email
üü< A
,
üüA B
CancellationToken
üüC T
.
üüT U
None
üüU Y
)
üüY Z
;
üüZ [
var
°° 
result
°° 
=
°° 
await
°° "
_userManager
°°# /
.
°°/ 0
CreateAsync
°°0 ;
(
°°; <
user
°°< @
)
°°@ A
;
°°A B
if
¢¢ 
(
¢¢ 
result
¢¢ 
.
¢¢ 
	Succeeded
¢¢ $
)
¢¢$ %
{
££ 
result
§§ 
=
§§ 
await
§§ "
_userManager
§§# /
.
§§/ 0
AddLoginAsync
§§0 =
(
§§= >
user
§§> B
,
§§B C
info
§§D H
)
§§H I
;
§§I J
if
•• 
(
•• 
result
•• 
.
•• 
	Succeeded
•• (
)
••( )
{
¶¶ 
_logger
ßß 
.
ßß  
LogInformation
ßß  .
(
ßß. /
$str
ßß/ _
,
ßß_ `
info
ßßa e
.
ßße f
LoginProvider
ßßf s
)
ßßs t
;
ßßt u
var
©© 
userId
©© "
=
©©# $
await
©©% *
_userManager
©©+ 7
.
©©7 8
GetUserIdAsync
©©8 F
(
©©F G
user
©©G K
)
©©K L
;
©©L M
var
™™ 
code
™™  
=
™™! "
await
™™# (
_userManager
™™) 5
.
™™5 61
#GenerateEmailConfirmationTokenAsync
™™6 Y
(
™™Y Z
user
™™Z ^
)
™™^ _
;
™™_ `
code
´´ 
=
´´ 
WebEncoders
´´ *
.
´´* +
Base64UrlEncode
´´+ :
(
´´: ;
Encoding
´´; C
.
´´C D
UTF8
´´D H
.
´´H I
GetBytes
´´I Q
(
´´Q R
code
´´R V
)
´´V W
)
´´W X
;
´´X Y
var
¨¨ 
callbackUrl
¨¨ '
=
¨¨( )
Url
¨¨* -
.
¨¨- .
Page
¨¨. 2
(
¨¨2 3
$str
≠≠ 3
,
≠≠3 4
pageHandler
ÆÆ '
:
ÆÆ' (
null
ÆÆ) -
,
ÆÆ- .
values
ØØ "
:
ØØ" #
new
ØØ$ '
{
ØØ( )
area
ØØ* .
=
ØØ/ 0
$str
ØØ1 ;
,
ØØ; <
userId
ØØ= C
=
ØØD E
userId
ØØF L
,
ØØL M
code
ØØN R
=
ØØS T
code
ØØU Y
}
ØØZ [
,
ØØ[ \
protocol
∞∞ $
:
∞∞$ %
Request
∞∞& -
.
∞∞- .
Scheme
∞∞. 4
)
∞∞4 5
;
∞∞5 6
await
≤≤ 
_emailSender
≤≤ *
.
≤≤* +
SendEmailAsync
≤≤+ 9
(
≤≤9 :
Input
≤≤: ?
.
≤≤? @
Email
≤≤@ E
,
≤≤E F
$str
≤≤G [
,
≤≤[ \
$"
≥≥ 
$str
≥≥ F
{
≥≥F G
HtmlEncoder
≥≥G R
.
≥≥R S
Default
≥≥S Z
.
≥≥Z [
Encode
≥≥[ a
(
≥≥a b
callbackUrl
≥≥b m
)
≥≥m n
}
≥≥n o
$str≥≥o É
"≥≥É Ñ
)≥≥Ñ Ö
;≥≥Ö Ü
if
∂∂ 
(
∂∂ 
_userManager
∂∂ (
.
∂∂( )
Options
∂∂) 0
.
∂∂0 1
SignIn
∂∂1 7
.
∂∂7 8%
RequireConfirmedAccount
∂∂8 O
)
∂∂O P
{
∑∑ 
return
∏∏ "
RedirectToPage
∏∏# 1
(
∏∏1 2
$str
∏∏2 J
,
∏∏J K
new
∏∏L O
{
∏∏P Q
Email
∏∏R W
=
∏∏X Y
Input
∏∏Z _
.
∏∏_ `
Email
∏∏` e
}
∏∏f g
)
∏∏g h
;
∏∏h i
}
ππ 
await
ªª 
_signInManager
ªª ,
.
ªª, -
SignInAsync
ªª- 8
(
ªª8 9
user
ªª9 =
,
ªª= >
isPersistent
ªª? K
:
ªªK L
false
ªªM R
,
ªªR S
info
ªªT X
.
ªªX Y
LoginProvider
ªªY f
)
ªªf g
;
ªªg h
return
ºº 
LocalRedirect
ºº ,
(
ºº, -
	returnUrl
ºº- 6
)
ºº6 7
;
ºº7 8
}
ΩΩ 
}
ææ 
foreach
øø 
(
øø 
var
øø 
error
øø "
in
øø# %
result
øø& ,
.
øø, -
Errors
øø- 3
)
øø3 4
{
¿¿ 

ModelState
¡¡ 
.
¡¡ 
AddModelError
¡¡ ,
(
¡¡, -
string
¡¡- 3
.
¡¡3 4
Empty
¡¡4 9
,
¡¡9 :
error
¡¡; @
.
¡¡@ A
Description
¡¡A L
)
¡¡L M
;
¡¡M N
}
¬¬ 
}
√√ !
ProviderDisplayName
≈≈ 
=
≈≈  !
info
≈≈" &
.
≈≈& '!
ProviderDisplayName
≈≈' :
;
≈≈: ;
	ReturnUrl
∆∆ 
=
∆∆ 
	returnUrl
∆∆ !
;
∆∆! "
return
«« 
Page
«« 
(
«« 
)
«« 
;
«« 
}
»» 	
private
   
ApplicationUser
   

CreateUser
    *
(
  * +
)
  + ,
{
ÀÀ 	
try
ÃÃ 
{
ÕÕ 
return
ŒŒ 
	Activator
ŒŒ  
.
ŒŒ  !
CreateInstance
ŒŒ! /
<
ŒŒ/ 0
ApplicationUser
ŒŒ0 ?
>
ŒŒ? @
(
ŒŒ@ A
)
ŒŒA B
;
ŒŒB C
}
œœ 
catch
–– 
{
—— 
throw
““ 
new
““ '
InvalidOperationException
““ 3
(
““3 4
$"
““4 6
$str
““6 S
{
““S T
nameof
““T Z
(
““Z [
ApplicationUser
““[ j
)
““j k
}
““k l
$str
““l o
"
““o p
+
““q r
$"
”” 
$str
”” #
{
””# $
nameof
””$ *
(
””* +
ApplicationUser
””+ :
)
””: ;
}
””; <
$str””< ç
"””ç é
+””è ê
$"
‘‘ 
$str
‘‘ l
"
‘‘l m
)
‘‘m n
;
‘‘n o
}
’’ 
}
÷÷ 	
private
ÿÿ 
IUserEmailStore
ÿÿ 
<
ÿÿ  
ApplicationUser
ÿÿ  /
>
ÿÿ/ 0
GetEmailStore
ÿÿ1 >
(
ÿÿ> ?
)
ÿÿ? @
{
ŸŸ 	
if
⁄⁄ 
(
⁄⁄ 
!
⁄⁄ 
_userManager
⁄⁄ 
.
⁄⁄ 
SupportsUserEmail
⁄⁄ /
)
⁄⁄/ 0
{
€€ 
throw
‹‹ 
new
‹‹ #
NotSupportedException
‹‹ /
(
‹‹/ 0
$str
‹‹0 j
)
‹‹j k
;
‹‹k l
}
›› 
return
ﬁﬁ 
(
ﬁﬁ 
IUserEmailStore
ﬁﬁ #
<
ﬁﬁ# $
ApplicationUser
ﬁﬁ$ 3
>
ﬁﬁ3 4
)
ﬁﬁ4 5

_userStore
ﬁﬁ5 ?
;
ﬁﬁ? @
}
ﬂﬂ 	
}
‡‡ 
}·· ¨#
XC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ConfirmEmailChange.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class #
ConfirmEmailChangeModel (
:) *
	PageModel+ 4
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
private 
readonly 
SignInManager &
<& '
ApplicationUser' 6
>6 7
_signInManager8 F
;F G
public #
ConfirmEmailChangeModel &
(& '
UserManager' 2
<2 3
ApplicationUser3 B
>B C
userManagerD O
,O P
SignInManagerQ ^
<^ _
ApplicationUser_ n
>n o
signInManagerp }
)} ~
{ 	
_userManager 
= 
userManager &
;& '
_signInManager 
= 
signInManager *
;* +
} 	
[   	
TempData  	 
]   
public!! 
string!! 
StatusMessage!! #
{!!$ %
get!!& )
;!!) *
set!!+ .
;!!. /
}!!0 1
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (

OnGetAsync##) 3
(##3 4
string##4 :
userId##; A
,##A B
string##C I
email##J O
,##O P
string##Q W
code##X \
)##\ ]
{$$ 	
if%% 
(%% 
userId%% 
==%% 
null%% 
||%% !
email%%" '
==%%( *
null%%+ /
||%%0 2
code%%3 7
==%%8 :
null%%; ?
)%%? @
{&& 
return'' 
RedirectToPage'' %
(''% &
$str''& .
)''. /
;''/ 0
}(( 
var** 
user** 
=** 
await** 
_userManager** )
.**) *
FindByIdAsync*** 7
(**7 8
userId**8 >
)**> ?
;**? @
if++ 
(++ 
user++ 
==++ 
null++ 
)++ 
{,, 
return-- 
NotFound-- 
(--  
$"--  "
$str--" ?
{--? @
userId--@ F
}--F G
$str--G I
"--I J
)--J K
;--K L
}.. 
code00 
=00 
Encoding00 
.00 
UTF800  
.00  !
	GetString00! *
(00* +
WebEncoders00+ 6
.006 7
Base64UrlDecode007 F
(00F G
code00G K
)00K L
)00L M
;00M N
var11 
result11 
=11 
await11 
_userManager11 +
.11+ ,
ChangeEmailAsync11, <
(11< =
user11= A
,11A B
email11C H
,11H I
code11J N
)11N O
;11O P
if22 
(22 
!22 
result22 
.22 
	Succeeded22 !
)22! "
{33 
StatusMessage44 
=44 
$str44  7
;447 8
return55 
Page55 
(55 
)55 
;55 
}66 
var:: 
setUserNameResult:: !
=::" #
await::$ )
_userManager::* 6
.::6 7
SetUserNameAsync::7 G
(::G H
user::H L
,::L M
email::N S
)::S T
;::T U
if;; 
(;; 
!;; 
setUserNameResult;; "
.;;" #
	Succeeded;;# ,
);;, -
{<< 
StatusMessage== 
=== 
$str==  ;
;==; <
return>> 
Page>> 
(>> 
)>> 
;>> 
}?? 
awaitAA 
_signInManagerAA  
.AA  !
RefreshSignInAsyncAA! 3
(AA3 4
userAA4 8
)AA8 9
;AA9 :
StatusMessageBB 
=BB 
$strBB I
;BBI J
returnCC 
PageCC 
(CC 
)CC 
;CC 
}DD 	
}EE 
}FF ﬂ
RC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\ConfirmEmail.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
ConfirmEmailModel "
:# $
	PageModel% .
{ 
private 
readonly 
UserManager $
<$ %
ApplicationUser% 4
>4 5
_userManager6 B
;B C
public 
ConfirmEmailModel  
(  !
UserManager! ,
<, -
ApplicationUser- <
>< =
userManager> I
)I J
{ 	
_userManager 
= 
userManager &
;& '
} 	
[ 	
TempData	 
] 
public   
string   
StatusMessage   #
{  $ %
get  & )
;  ) *
set  + .
;  . /
}  0 1
public!! 
async!! 
Task!! 
<!! 
IActionResult!! '
>!!' (

OnGetAsync!!) 3
(!!3 4
string!!4 :
userId!!; A
,!!A B
string!!C I
code!!J N
)!!N O
{"" 	
if## 
(## 
userId## 
==## 
null## 
||## !
code##" &
==##' )
null##* .
)##. /
{$$ 
return%% 
RedirectToPage%% %
(%%% &
$str%%& .
)%%. /
;%%/ 0
}&& 
var(( 
user(( 
=(( 
await(( 
_userManager(( )
.(() *
FindByIdAsync((* 7
(((7 8
userId((8 >
)((> ?
;((? @
if)) 
()) 
user)) 
==)) 
null)) 
))) 
{** 
return++ 
NotFound++ 
(++  
$"++  "
$str++" ?
{++? @
userId++@ F
}++F G
$str++G I
"++I J
)++J K
;++K L
},, 
code.. 
=.. 
Encoding.. 
... 
UTF8..  
...  !
	GetString..! *
(..* +
WebEncoders..+ 6
...6 7
Base64UrlDecode..7 F
(..F G
code..G K
)..K L
)..L M
;..M N
var// 
result// 
=// 
await// 
_userManager// +
.//+ ,
ConfirmEmailAsync//, =
(//= >
user//> B
,//B C
code//D H
)//H I
;//I J
StatusMessage00 
=00 
result00 "
.00" #
	Succeeded00# ,
?00- .
$str00/ U
:00V W
$str00X v
;00v w
return11 
Page11 
(11 
)11 
;11 
}22 	
}33 
}44 •
RC:\Users\ACER\Desktop\GRINPLAS\Areas\Identity\Pages\Account\AccessDenied.cshtml.cs
	namespace 	
GRINPLAS
 
. 
Areas 
. 
Identity !
.! "
Pages" '
.' (
Account( /
{ 
public 

class 
AccessDeniedModel "
:# $
	PageModel% .
{ 
public 
void 
OnGet 
( 
) 
{ 	
} 	
} 
} 