@model GRINPLAS.Models.Comentarios

@{
  ViewData["Title"] = "Home Page";
}
@if (TempData["Mensaje"] != null)
{
  <div id="mensajeExito" data-mensaje="@TempData["Mensaje"]"></div>
}


<div class="container">
  <div class="row align-items-center">
    <div class="col-md-6 mb-4 mb-md-0">
      <img src="https://i.postimg.cc/Nj6BDF8H/fabrica2.png"
        alt="Imagen de una calle con edificios de ladrillo y puertas metálicas" class="img-fluid rounded-lg img-card" />
    </div>
    <div class="col-md-6">
      <div class="d-flex1 mb-4 justify-content-center position-relative">
        <i class="fa-solid fa-angles-right"></i>
        <i class="fa-solid fa-angles-right"></i>
      </div>
      <div class="text">
        <h2 class="font-weight-bold">
          <span class="line1">PRODUCTOS DE <span class="highlight fw-bold">CALIDAD Y</span></span>
          <br />
          <span class="line2"><span class="highlight fw-bold">GRAN VARIEDAD,</span> DE
            ACUERDO</span>
          <br />
          A SU REQUERIMIENTO.
        </h2>

        <div class="p-4 rounded-lg mt-4 color contenido">
          <div class="d-flex align-items-center mb-2 current-status">
            <i class="fa-solid fa-award"></i>
            <span class="ml-2">EN LA ACTUALIDAD</span>
          </div>
          <p class="text-secondary">
            Atendemos a importantes empresas de diversos sectores que
            despachan sus productos tanto a nivel nacional como
            internacional, teniendo la certeza de que los envases y
            empaques que contienen sus productos cumplen con las normas de
            calidad e higiene exigidas que aseguran su aceptación.
          </p>
        </div>
        <div class="boton">
          <a href="~/Home/Informacion" class="text-success font-weight-bold d-flex align-items-center">
            ver más <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container" id="cards2">
  <div class="d-flex justify-content-center align-items-center">
    <p class="h4">
      Mira algunos de nuestros
      <span class="highlight">videos</span>
      demostrativos
    </p>
  </div>
  <div class="card__container">
    <article class="card__article">
      <img src="https://i.postimg.cc/6QBwmKz1/7c584e3c86a9bb7cc15cdb2b8db06167.png" alt="image" class="card__img" />

      <div class="card__data">
        <a href="#" class="card__button">
          Ver video <i class="fa-solid fa-play"></i></a>
      </div>
    </article>

    <article class="card__article">
      <img src="https://i.postimg.cc/ZRMSndm1/9523376ecb24e2c5019ff46463d78ffa.png" alt="image" class="card__img" />

      <div class="card__data">
        <a href="#" class="card__button">
          Ver video <i class="fa-solid fa-play"></i></a>
      </div>
    </article>

    <article class="card__article">
      <img src="https://i.postimg.cc/brSjtwNd/6d7e9ac6b6ae214d5d0422e6670fb09e.png" alt="image" class="card__img" />

      <div class="card__data">
        <a href="#" class="card__button">
          Ver video <i class="fa-solid fa-play"></i></a>
      </div>
    </article>
  </div>
</div>

<!-- Chatbot circular -->
@if (User.Identity.IsAuthenticated)
{
  <!--<div id="chatbot-circle"
    style="position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background-color: #1B665E; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; z-index: 1000; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
    <i class="fas fa-comment-dots text-white" style="font-size: 25px;"></i>
  </div>-->

  <div id="chatbot-container"
    style="position: fixed; bottom: 100px; right: 30px; width: 320px; background: white; border: 1px solid #ddd; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); display: none; z-index: 1001; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <div id="chatbot-header"
      style="background: #1B665E; color: white; padding: 15px; border-top-left-radius: 15px; border-top-right-radius: 15px; display: flex; justify-content: space-between; align-items: center;">
      <span style="font-weight: 600;">Asistente de Reclamos</span>
      <button id="close-chatbot"
        style="background: none; border: none; color: white; font-size: 18px; cursor: pointer;">×</button>
    </div>
    <div id="chatbot-messages" style="height: 250px; overflow-y: auto; padding: 15px; background: #f9f9f9;"></div>
    <div
      style="padding: 15px; border-top: 1px solid #eee; background: white; border-bottom-left-radius: 15px; border-bottom-right-radius: 15px;">
      <div style="display: flex;">
        <input id="user-input" type="text"
          style="flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 20px; outline: none;"
          placeholder="Escribe tu mensaje..." />
        <button id="send-btn"
          style="margin-left: 10px; width: 40px; height: 40px; border-radius: 50%; background: #1B665E; color: white; border: none; cursor: pointer;">
          <i class="fas fa-paper-plane"></i>
        </button>
      </div>
    </div>
  </div>
  @if (TempData["Mensaje"] != null)
  {
    <div id="mensajeExito" data-mensaje="@TempData["Mensaje"]"></div>
  }
}

<script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
<df-messenger
  intent="WELCOME"
  chat-title="GrinBot"
  agent-id="b40ee012-cc61-4612-a9d1-a882911aeaa1"
  language-code="es"
></df-messenger>

@section Scripts {
  <script src="~/js/chatbot.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const contenedor = document.getElementById("mensajeExito");
      if (!contenedor) return;

      const mensaje = contenedor.getAttribute("data-mensaje");

      const modalHTML = `
                          <div class="modal fade" id="comentarioExitoModal" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                              <div class="modal-content text-center p-4 border-0 shadow-lg">
                                <div class="modal-body">
                                  <i class="fas fa-check-circle" style="font-size: 60px; color: #09c33d;"></i>
                                  <h5 class="mt-3 mb-0 text-success fw-bold">${mensaje}</h5>
                                </div>
                              </div>
                            </div>
                          </div>`;

      document.body.insertAdjacentHTML('beforeend', modalHTML);

      const modalEl = document.getElementById('comentarioExitoModal');
      const modal = new bootstrap.Modal(modalEl, { backdrop: false });

      modal.show();

      setTimeout(() => {
        modal.hide();
      }, 2500);

      modalEl.addEventListener('hidden.bs.modal', function () {
        modalEl.remove();
      });
    });
  </script>
}
